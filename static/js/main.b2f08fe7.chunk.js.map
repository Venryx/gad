{"version":3,"sources":["images/gad-logo-small-white.png","assets/gad-title.png","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodes/@MapNodeType.js","components/TopNav.tsx","components/PageEffects.tsx","pages/Welcome.tsx","components/TitleBlock.tsx","components/ExploreScore.tsx","components/Topic.tsx","pages/Debates.tsx","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodes/@MapNode.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodes/@MapNodeRevision.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/maps/@Map.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/maps.js","../../../DebateMap/Server/Dist/@Shared/MobXFirelink.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/users.js","../../../DebateMap/Server/Dist/@Shared/CommandMacros.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@SourceChain.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/images.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/images/@Image.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeTags/@MapNodeTag.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeTags.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/users/$user.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodes/$node.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodes.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddNodeRevision.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddChildNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddArgumentAndClaim.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddImage.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddLayer.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddMap.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddNodeTag.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddPhrasing.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/userMapInfo.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/layers.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddSubnode.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddTerm.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddTimeline.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/timelines.js","../../../DebateMap/Server/Dist/@Shared/Commands/AddTimelineStep.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@QuoteAttachment.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@ImageAttachment.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@EquationAttachment.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@ReferencesAttachment.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@AttachmentType.js","../../../DebateMap/Server/Dist/@Shared/Commands/ChangeClaimType.js","../../../DebateMap/Server/Dist/@Shared/Commands/ChangeNodeOwnerMap.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/UnlinkNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/LinkNode_HighLevel.js","../../../DebateMap/Server/Dist/@Shared/Utils/Store/PathFinder.js","../../../DebateMap/Server/Dist/@Shared/Commands/LinkNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/CloneNode.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteImage.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteLayer.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteMap.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteNodeTag.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodePhrasings.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeletePhrasing.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/terms.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteTerm.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteTimeline.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/timelineSteps.js","../../../DebateMap/Server/Dist/@Shared/Commands/DeleteTimelineStep.js","../../../DebateMap/Server/Dist/@Shared/Commands/ImportSubtree_Old.js","../../../DebateMap/Server/Dist/@Shared/Commands/ImportSubtree.js","../../../DebateMap/Server/Dist/@Shared/Commands/ReverseArgumentPolarity.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetLayerAttachedToMap.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetMapFeatured.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetMapLayerStateForUser.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetNodeIsMultiPremiseArgument.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRatings/@Rating.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRatings/ReasonScore.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRatings.js","../../../DebateMap/Server/Dist/@Shared/Utils/Store/RatingProcessor.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetNodeRating.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetUserData.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/users_private.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateImageData.js","../../../DebateMap/Server/Dist/@Shared/Commands/SetUserData_Private.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateLink.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateMapDetails.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateNodeChildrenOrder.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateNodeTag.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdatePhrasing.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateTerm.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateTimeline.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateTimelineStep.js","../../../DebateMap/Server/Dist/@Shared/Commands/UpdateTimelineStepOrder.js","../../../DebateMap/Server/Dist/@Shared/Commands/ConsoleOnly/DeleteNodeSubtree.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/mapNodeEditTimes.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/layers/@Layer.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/maps/$map.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodePhrasings/@MapNodePhrasing.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRatings/@RatingType.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/nodeRevisions/@TermAttachment.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/terms/@Term.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/timelineSteps/@TimelineStep.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/timelines/@Timeline.js","../../../DebateMap/Server/Dist/@Shared/Store/firebase/users/@User.js","firestore/firestore.ts","pages/Questions.tsx","components/Position.tsx","pages/Positions.tsx","components/Reason.tsx","pages/Reasons.tsx","pages/Argument.tsx","pages/Claim.tsx","firestore/init-dm-link.ts","App.tsx","index.ts","../../../DebateMap/Server/Dist/@Shared/Store/firebase/users_private/@User_Private.js"],"names":["module","exports","__webpack_require__","p","_MapNodeType_Info$for","MapNodeType","TopNav","props","_React$useState","React","_React$useState2","Object","slicedToArray","showMenu","setShowMenu","toggleMenu","e","react","className","react_router_dom","to","src","logo","alt","onClick","classNames","hidden","PageEffects","animation","duration","options","keyframes","fadeOut","opacity","timingOptions","once","iterations","fill","linkClickHandler","preventDefault","document","getElementsByClassName","animate","window","setTimeout","location","target","closest","href","requestAnimationFrame","links","getElementsByTagName","i","length","addEventListener","removeEventListener","Welcome","PageEffects_PageEffects","gadTitle","TitleBlock","title","subtitle","titleSize","subtitleSize","text-size-xxs","text-size-xs","text-size-s","text-size-m","text-size-l","text-size-xl","ExploreScore","exploreScore","size","circle-s","circle-m","circle-l","Topic","subdebates","ExploreScore_ExploreScore","Debates","TitleBlock_TitleBlock","Topic_Topic","_MapNodeType_MapNodeType_Info","MapNodeType_Info","initialData","classCallCheck","this","js_vextensions_Dist","VSet","for","defineProperty","Category","childTypes","Package","MultiChoiceQuestion","Claim","minWidth","maxWidth","Argument","AccessLevel","ClaimForm","Polarity","_MapNode_MapNode","MapNode","Dist","properties","type","oneOf","creator","createdAt","rootNodeForMap","$ref","ownerMapID","currentRevision","parents","children","childrenOrder","items","multiPremiseArgument","layerPlusAnchorParents","required","schema","patternProperties","_","form","seriesAnchor","polarity","concat","PermissionInfoType","base","negation","yesNoQuestion","allTerms","_MapNodeRevision_PermissionInfo","PermissionInfo","mapID","MapNodeRevision_Defaultable_props","ArgumentType","MapType","_MapNodeRevision_MapNodeRevision","MapNodeRevision","titles","accessLevel","Basic","permission_edit","Creator","permission_contribute","Anyone","node","note","termAttachments","argumentType","equation","references","quote","image","const","votingDisabled","fontSizeOverride","widthOverride","allOf","if","prohibited","then","_CE","name","pattern","noteInline","rootNode","defaultExpandDepth","defaultTimelineID","requireMapEditorsCanEdit","nodeDefaults","Including","apply","toConsumableArray","featured","editorIDs","edits","editedAt","layers","timelines","GetMaps","s","orderByEdits","arguments","undefined","mapsMap","a","maps","result","VValues","OrderByDescending","GetMap","filter","Private","Public","id","get","fire","GetAuth","userInfo","MeID","userInfo_raw","GetUser","userID","users","MapEdit","mapIDKey","ApplyToClass","targetClass","prototype","oldValidate","Validate","_a","payload","map","map_oldEditCount","oldGetDBUpdates","GetDBUpdates","updates","newUpdates","Date","now","UserEdit","user","user_oldEditCount","SourceType","GetNodeRevision","nodeRevisions","GetNodeRevisions","nodeID","queryOps","GetNodeRevisionsByTitle","titleKey","GetImage","images","url","sources","minItems","ImageType","author","link","enum","Writing","Speech","anyOf","Webpage","description","previewWidth","sourceChains","nodes","mirrorChildrenFromXToY","xIsExtendedByY","mutuallyExclusiveGroup","restrictMirroringOfX","_MapNodeTag_TagComp","TagComp","createClass","key","value","compClass","TagComp_classes","find","As","_MapNodeTag_TagComp_MirrorChildrenFromXToY","_TagComp","TagComp_MirrorChildrenFromXToY","_this","possibleConstructorReturn","getPrototypeOf","call","mirrorSupporting","mirrorOpposing","reversePolarities","disableDirectChildren","assertThisInitialized","inherits","displayName","nodeKeys","nodeX","nodeY","_MapNodeTag_TagComp_XIsExtendedByY","_TagComp2","TagComp_XIsExtendedByY","_this2","mirrorComp_xConsToY","push","mirrorComp_yProsToX","AsMultiline","_MapNodeTag_TagComp_MutuallyExclusiveGroup","_TagComp3","TagComp_MutuallyExclusiveGroup","_this3","mirrorXProsAsYCons","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Except","mirrorComp","err","return","_MapNodeTag_TagComp_RestrictMirroringOfX","_TagComp4","TagComp_RestrictMirroringOfX","_this4","blacklistAllMirrorParents","blacklistedMirrorParents","_b","_i","_TagComp_classes","CalculateTagCompKey","CalculateTagCompDisplayName","CalculateTagCompClassStatics","TagComp_keys","c","replace","m","startUpper_to_lower","lowerUpper_to_lowerSpaceLower","_i2","_autoSlotNames","slotName","RegExp","toUpperCase","GetTagCompClassByTag","tag","GetTagCompOfTag","GetNodeTags","nodeTags","GetNodeTag","tagID","GetNodeTagComps","unwrapCompositeTags","tagsToIgnore","tags","SelectMany","includes","_key","baseComp","GetFinalTagCompsForTag","comp","GetFinalTagComps","defaultPermissions","basic","verified","mod","admin","GetUserPermissionGroups","permissionGroups","CanGetBasicPermissions","userIDOrPermissions","permissions","HasBasicPermissions","HasModPermissions","HasAdminPermissions","IsUserCreatorOrMod","entity","CanContributeToNode","_c","_d","GetNodeL2","revision","current","editPerm","MapEditors","contributePerm","GetRatingTypesForNode","main","GetMainRatingType","FirstOrX","ReversePolarity","Supporting","Opposing","GetDisplayPolarityAtPath","path","parent","GetParentNodeL2","GetLinkUnderParent","parentForm","GetNodeForm","slice","join","GetDisplayPolarity","basePolarity","Negation","AsNodeL1","GetNode","AsNodeL2","AsNodeL3","displayPolarity","Base","GetNodeL3","GetNodeID","IsNodeSubnode","GetParentNode","pathOrParent","IsNodeL3","includeMirrorLinks","tagComps","_loop","mirrorChildren","GetNodeChildrenL3","nodeL3ForNodeAsMirrorChildInThisTag","child","$node_NodeContributionInfo","NodeContributionInfo","proArgs","$node_NodeContributionInfo_ForPolarity","conArgs","NodeContributionInfo_ForPolarity","canAdd","hostNodeID","Any","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","addForPolarities_short","_addForPolarities_sho","polarity_short","GetNodeDisplayText","baseClaim","GetNodeChildrenL2","text","latex","g1","g2","html","renderToString","ex","message","startsWith","firstSource","Parse","toString","domain_protocol","_firstSource","toLowerCase","missingTitleStrings","YesNoQuestion","HolderType","IsSinglePremiseArgument","IsMultiPremiseArgument","IsPremiseOfSinglePremiseArgument","PathSegmentToNodeID","segment","GetNodesByIDs","ids","emptyForLoading","IsRootNode","VKeys","GetParentCount","GetParentNodeID","pathNodes","Last","parentNodeStr","XFromLast","childPath","GetParentNodeL3","childPathNodes","GetParentPath","ownNodeStr","LastOrX","CleanArray","array","GetNodeParents","GetNodeChildren","includeMirrorChildren","_result","GetNodeMirrorChildren","mirrorChild","directChild","_loop2","tagComp","_result2","mirrorChildrenL3","mirrorChildrenL1","childTagComps","childL3","nodeDirectChildren","otherChild","childPremise","GetPremiseOfSinglePremiseArgument","childPremiseTagComps","index","earlierNodes","argumentNodeID","argument","GetHolderType","childType","parentType","Relevance","Truth","ForLink_GetError","ForDelete_GetError","parentID","newChild","newHolderType","isAlreadyChild","currentHolderType","subcommandInfo","_CE2","_e","baseText","parentsToIgnore","asPartOfMapDelete","nodeChildren","childrenToIgnore","__decorate","decorators","desc","d","r","getOwnPropertyDescriptor","Reflect","decorate","GetSearchTerms","str","separateTermsWithWildcard","terms","trim","split","wholeTerms","Distinct","partialTerms","GetSearchTerms_Advanced","AddNodeRevision_AddNodeRevision","_Command","AddNodeRevision","revisionID","titles_joined","ToMap","parentCommand","node_oldData","returnData","_this$payload","AddNode_AddNode","AddNode","sub_addRevision","MarkAsSubcommand","mapNodeSchema","Excluding","childID","AddChildNode_decorate","AddChildNode_AddChildNode","AddChildNode","asMapRoot","node_withParents","sub_addNode","parent_oldData","_this$payload2","AddImage_decorate","AddImage_AddImage","AddImage","imageID","AddLayer_decorate","AddLayer_AddLayer","AddLayer","layer","layerID","AddMap_decorate","AddMap_AddMap","AddMap","newRootNode","newRootNodeRevision","AddNodeTag_decorate","AddNodeTag_AddNodeTag","AddNodeTag","AddPhrasing_decorate","AddPhrasing_AddPhrasing","AddPhrasing","phrasing","userMapInfo","GetUserLayerStatesForMap","layerStates","GetLayer","userLayerStates","GetMapLayers","GetMapLayerIDs","GetSubnodeIDsInLayer","anchorNodeID","nodeSubnodes","ForDeleteLayer_GetError","layersEnabled","_step$value","state","existingEntry","Remove","Pairs","subnodeIDs","AddSubnode_decorate","AddSubnode_AddSubnode","AddSubnode","subnode","subnodeRevision","layer_oldData","layerPlusAnchorStr","AddTerm_decorate","AddTerm_AddTerm","AddTerm","term","termID","_updates","AddTimeline_decorate","AddTimeline_AddTimeline","AddTimeline","timeline","timelineID","GetTimeline","GetMapTimelineIDs","AddTimelineStep_decorate","AddTimelineStep_AddTimelineStep","AddTimelineStep","step","stepIndex","stepID","timeline_oldSteps","steps","timeline_newSteps","Insert","content","_EquationAttachment_EquationAttachment","EquationAttachment","isStep","explanation","AttachmentType","GetAttachmentType","Equation","References","Quote","Image","None","ChangeClaimType_decorate","conversionTypes","newType","ChangeClaimType_ChangeClaimType","ChangeClaimType","from","oldData","NonNull","oldType","newData","assign","newRevisionID","newRevision","ChangeNodeOwnerMap_1","ChangeNodeOwnerMap_decorate","newOwnerMapID","ChangeNodeOwnerMap_ChangeNodeOwnerMap","ChangeNodeOwnerMap","newOwnerMap","permittedPublicParentIDs","parentsArePrivateInSameMap","every","permittedPrivateChildrenIDs","sub_changeOwnerMapForArgument","DeleteNode_1","DeleteNode_decorate","withContainerArgument","DeleteNode_DeleteNode","DeleteNode","oldRevisions","parentIDs","oldParentChildrenOrders","mapIDs","earlyError","sub_deleteContainerArgument","parent_childrenOrder","IfEmptyThen","_layerPlusAnchorStr$s","_layerPlusAnchorStr$s2","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","UnlinkNode_decorate","UnlinkNode_UnlinkNode","UnlinkNode","allowOrphaning","parent_oldChildrenOrder","LinkNode_HighLevel_LinkNode_HighLevel","LinkNode_HighLevel","oldParentID","newParentID","newForm","allowCreateWrapperArg","unlinkFromOldParent","deleteEmptyArgumentWrapper","newPolarity","map_data","node_data","oldParent_data","newParent_data","pastingPremiseAsRelevanceArg","closestMapRootNode","startNodeID","xMatchFunc","nodeIDsToIgnore","startNode","currentLayerHeads","layerHead","newLayerHeads","_layerHead","SearchUpFromNodeForNodeMatchingX","newParentID_forClaim","canCreateWrapperArg","IsOneOf","argumentWrapper","argumentWrapperRevision","sub_addArgumentWrapper","argumentWrapperID","mustCreateWrapperArg","sub_linkToNewParent","LinkNode_LinkNode","childForm","childPolarity","sub_unlinkFromOldParent","sub_deleteOldParent","defaultPayload","LinkNode_decorate","LinkNode","child_oldData","DeleteImage_decorate","DeleteImage_DeleteImage","DeleteImage","DeleteLayer_decorate","DeleteLayer_DeleteLayer","DeleteLayer","userMapInfoSets","resultForLoading","mapsWhereEnabled","keys","userMapInfoSet","entries","_step3$value","mapID2","DeleteMap_decorate","DeleteMap_DeleteMap","DeleteMap","sub_deleteNode","_step2$value","DeleteNodeTag_decorate","DeleteNodeTag_DeleteNodeTag","DeleteNodeTag","nodePhrasings","GetNodePhrasing","phrasingID","DeletePhrasing_decorate","DeletePhrasing_DeletePhrasing","DeletePhrasing","GetTerm","nodeRevisionID","attachment","DeleteTerm_decorate","DeleteTerm_DeleteTerm","DeleteTerm","DeleteTimeline_decorate","DeleteTimeline_DeleteTimeline","DeleteTimeline","Error","GetTimelineStep","timelineSteps","GetNodeRevealTimesInSteps","baseOnLastReveal","nodeRevealTimes","reveal","show","stepTime_safe","videoTime","Math","max","min","Number","MAX_SAFE_INTEGER","revealDepth","show_revealDepth","currentChildren","v","childrenDepth","nextChildren","childChildren","child2","AddRange","_ret2","hide","nodeReveals","_ret","DeleteTimelineStep_decorate","DeleteTimelineStep_DeleteTimelineStep","DeleteTimelineStep","helperProps","WithoutHelpers","data","treeNodes","treeNode","prop","obj","RemoveHelpers","ReverseArgumentPolarity_decorate","ReverseArgumentPolarity_ReverseArgumentPolarity","ReverseArgumentPolarity","oldNodeData","newLinkData","SetLayerAttachedToMap_decorate","attached","SetLayerAttachedToMap_SetLayerAttachedToMap","SetLayerAttachedToMap","SetMapLayerStateForUser_decorate","SetMapLayerStateForUser_SetMapLayerStateForUser","SetMapLayerStateForUser","SetNodeIsMultiPremiseArgument_decorate","SetNodeIsMultiPremiseArgument_SetNodeIsMultiPremiseArgument","SetNodeIsMultiPremiseArgument","newNodeData","oldChildNode_partialPath","oldChildNode","_Rating_Rating","Rating","updated","RS_CalculateTruthScore","claimID","calculationPath","claim","indexOf","runningAverage","childArguments","GetChildArguments","weightTotalSoFar","premises","truthScoreComposite","RS_CalculateTruthScoreComposite","weight","RS_CalculateWeight","argumentID","CombinePremiseTruthScores","premise","RS_CalculateBaseWeight","truthScore","RS_CalculateWeightMultiplier","runningMultiplier","runningDivisor","truthScoresCombined","premiseIDs","reduce","prev","cur","RS_GetAllValues","useRSPrefix","claimTruthScore","claimBaseWeight","argTruthScoreComposite","argWeightMultiplier","argWeight","rs_argTruthScoreComposite","rs_argWeightMultiplier","rs_argWeight","rs_claimTruthScore","rs_claimBaseWeight","truthScores","All","AnyTwo","highestTruthScore","Max","otherTruthScores","excludeEachOnlyOnce","WeightingType","GetArgumentImpactPseudoRating","combinedTruthOfPremises","premiseProbabilities","ratingType","ratingValue","GetRatingValue","GetRatingAverage","total","strongest","relevance","RoundTo","GetArgumentImpactPseudoRatings","childForms_map","usersWhoRatedArgOrPremise","GetRatings","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","childRatings","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_userID3","nodeRatings","GetRating","resultIfNoData","rating","ratings","Average","GetRatingAverage_AtPath","ShouldRatingTypeBeReversed","rsCompatibleNodeTypes","boxType","_HolderType$Truth$Hol","weighting","Votes","_RS_GetAllValues","_HolderType$Truth$Hol2","GetUser_Private","users_private","UpdateImageData_decorate","UpdateImageData_UpdateImageData","UpdateImageData","UpdateLink_decorate","linkParentID","linkChildID","linkUpdates","UpdateLink_UpdateLink","UpdateLink","UpdateMapDetails_decorate","UpdateMapDetails_UpdateMapDetails","UpdateMapDetails","mapUpdates","UpdateNodeChildrenOrder_decorate","UpdateNodeChildrenOrder_UpdateNodeChildrenOrder","UpdateNodeChildrenOrder","UpdateNodeTag_decorate","minProperties","UpdateNodeTag_UpdateNodeTag","UpdateNodeTag","UpdatePhrasing_decorate","UpdatePhrasing_UpdatePhrasing","UpdatePhrasing","UpdateTerm_decorate","UpdateTerm_UpdateTerm","UpdateTerm","UpdateTimelineStep_decorate","stepUpdates","UpdateTimelineStep_UpdateTimelineStep","UpdateTimelineStep","UpdateTimelineStepOrder_decorate","UpdateTimelineStepOrder_UpdateTimelineStepOrder","UpdateTimelineStepOrder","newIndex","Move","_colorMap","ChangeType","Add","Edit","mapNodeEditTimes","MapNodePhrasingType","GetMapEditorIDs","TermType","disambiguation","forms","uniqueItems","definition","groupID","videoID","videoStartTime","videoHeightVSWidthPercent","photoURL","joinDate","lastEditAt","GetFinalNodeTitle","GetQuestions","StoreAccessor","questions","mainMap_rootNodeID","sort","b","GetQuestionPositions","questionID","GetPositionReasons","positionID","Questions","observer","questionPositions","question","item","Position","positionCount","ctaUrl","react_default","createElement","Positions","useParams","positions","Position_Position","Reason","Reasons","position","reasons","Reason_Reason","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","linkRootPath","store","rootPathInDB","rootStore","firebase","initializeApp","Initialize","initDebateMapServerLink","App","basename","TopNav_TopNav","react_router","component","exact","Component","ReactDOM","render","getElementById","__webpack_exports__","User_Private","C_Root_Apps_V_GAD_Client_Fork_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","mobx_firelink__WEBPACK_IMPORTED_MODULE_1__","email","providerData","backgroundID","backgroundCustom_enabled","backgroundCustom_color","backgroundCustom_url","backgroundCustom_position"],"mappings":"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","file":"static/js/main.b2f08fe7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/gad-logo-small-white.86ba0532.png\";","module.exports = __webpack_public_path__ + \"static/media/gad-title.9e8f6898.png\";","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\n\nvar _MapNodeType_Info$for;\n\nimport { Assert, CE } from \"js-vextensions\";\nimport { Polarity } from \"./@MapNode\";\nexport var MapNodeType;\n\n(function (MapNodeType) {\n  MapNodeType[MapNodeType[\"Category\"] = 10] = \"Category\";\n  MapNodeType[MapNodeType[\"Package\"] = 20] = \"Package\";\n  MapNodeType[MapNodeType[\"MultiChoiceQuestion\"] = 30] = \"MultiChoiceQuestion\";\n  MapNodeType[MapNodeType[\"Claim\"] = 40] = \"Claim\";\n  MapNodeType[MapNodeType[\"Argument\"] = 50] = \"Argument\";\n})(MapNodeType || (MapNodeType = {}));\n\nexport var MapNodeType_Info = function MapNodeType_Info(initialData) {\n  _classCallCheck(this, MapNodeType_Info);\n\n  CE(this).VSet(initialData);\n};\nMapNodeType_Info.for = (_MapNodeType_Info$for = {}, _defineProperty(_MapNodeType_Info$for, MapNodeType.Category, new MapNodeType_Info({\n  childTypes: [MapNodeType.Category, MapNodeType.Package, MapNodeType.MultiChoiceQuestion, MapNodeType.Claim],\n  minWidth: 100,\n  maxWidth: 250\n})), _defineProperty(_MapNodeType_Info$for, MapNodeType.Package, new MapNodeType_Info({\n  childTypes: [MapNodeType.Claim],\n  minWidth: 100,\n  maxWidth: 250\n})), _defineProperty(_MapNodeType_Info$for, MapNodeType.MultiChoiceQuestion, new MapNodeType_Info({\n  childTypes: [MapNodeType.Claim],\n  minWidth: 100,\n  maxWidth: 250\n})), _defineProperty(_MapNodeType_Info$for, MapNodeType.Claim, new MapNodeType_Info({\n  childTypes: [MapNodeType.Argument],\n  minWidth: 350,\n  maxWidth: 550\n})), _defineProperty(_MapNodeType_Info$for, MapNodeType.Argument, new MapNodeType_Info({\n  childTypes: [MapNodeType.Claim, MapNodeType.Argument],\n  minWidth: 100,\n  maxWidth: 300\n})), _MapNodeType_Info$for);\nexport function GetMapNodeTypeDisplayName(type, parentNode, parentNodeForm, polarity) {\n  if (type == MapNodeType.Category) return \"category\";\n  if (type == MapNodeType.Package) return \"package\";\n  if (type == MapNodeType.MultiChoiceQuestion) return \"multi-choice question\";\n\n  if (type == MapNodeType.Claim) {\n    if (parentNode && parentNode.type == MapNodeType.Category) {\n      return \"claim (in question form)\";\n    }\n\n    return \"claim\";\n  }\n\n  if (type == MapNodeType.Argument) {\n    return polarity == Polarity.Supporting ? \"supporting argument\" : \"opposing argument\";\n  }\n\n  Assert(false, \"Invalid node type.\");\n}","import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport classNames from 'classnames'\n\nimport '../styles/TopNav.scss'\nimport logo from '../images/gad-logo-small-white.png'\n\nexport const TopNav = (props) => {\n  let [showMenu, setShowMenu] = React.useState(true)\n\n  const toggleMenu = (e) => {\n    if (showMenu) {\n      setShowMenu(false)\n    } else {\n      setShowMenu(true)\n    }\n  }\n\n  return (\n    <header>\n      <nav className=\"top-nav\">\n        <Link to=\"/\">\n          <img src={logo} alt=\"The Great American Debate\" />\n        </Link>\n        <button className=\"menu-button stylized-button stylized-button-small\" onClick={toggleMenu}>\n          Menu\n        </button>\n      </nav>\n      <aside className={classNames('main-menu', { hidden: showMenu })}>\n        <div className=\"main-menu-header\">\n          <button className=\"stylized-button main-menu-close\" onClick={toggleMenu}>\n            Close\n          </button>\n        </div>\n      </aside>\n    </header>\n  )\n}\n","import * as React from 'react'\n\nexport const PageEffects = (props) => {\n  const { animation, duration, options } = props\n\n  let keyframes = {\n    fadeOut: [\n      // keyframes\n      { opacity: 1 },\n      { opacity: 0 },\n    ],\n  }\n\n  let timingOptions = {\n    once: {\n      // timing options\n      duration: duration,\n      iterations: 1,\n      fill: 'forwards',\n    },\n  }\n\n  let linkClickHandler = (e) => {\n    e.preventDefault()\n    document.getElementsByClassName('page')[0].animate(keyframes[animation], timingOptions[options])\n    window.setTimeout(() => {\n      window.location = e.target.closest('a').href\n    }, duration)\n  }\n\n  let applyHandlerToLinks = () => {\n    window.requestAnimationFrame(() => {\n      let links = document.getElementsByTagName('a')\n\n      for (let i = 0; i < links.length; i++) {\n        links[i].addEventListener('click', linkClickHandler)\n      }\n    })\n    return () => {\n      let links = document.getElementsByTagName('a')\n\n      for (let i = 0; i < links.length; i++) {\n        links[i].removeEventListener('click', linkClickHandler)\n      }\n    }\n  }\n\n  React.useEffect(applyHandlerToLinks, [])\n\n  return null\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { PageEffects } from '../components/PageEffects'\n\nimport '../styles/Welcome.scss'\nimport gadTitle from '../assets/gad-title.png'\n\nexport const Welcome = (props) => {\n  return (\n    <section className=\"page welcome\">\n      <PageEffects duration={200} animation=\"fadeOut\" options=\"once\" />\n      <div className=\"font-preloader\">\n        <span>Load</span> <span>the</span> <span>fonts</span>\n      </div>\n      <div className=\"top-container\">\n        <img className=\"title-image\" src={gadTitle} />\n        <h3 className=\"subheading\">\n          <span>america's arguments,</span> <span>all in one place</span>\n        </h3>\n      </div>\n      <div className=\"bottom-container\">\n        <Link to=\"/debates\" className=\"explore-button stylized-button drop-shadow\">\n          Explore\n        </Link>\n\n        <div className=\"welcome-animation\">\n          <div className=\"animation-container\">\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative reversed\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative reversed\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative\"></div>\n            </div>\n            <div className=\"speech-bubble-container\">\n              <div className=\"speech-bubble decorative\"></div>\n            </div>\n          </div>\n          <div className=\"animation-container\">\n            <div className=\"shadow\"></div>\n            <div className=\"shadow\"></div>\n            <div className=\"shadow\"></div>\n          </div>\n          <div className=\"animation-container\">\n            <div className=\"star-container\">\n              <div className=\"star\"></div>\n            </div>\n            <div className=\"star-container\">\n              <div className=\"star\"></div>\n            </div>\n            <div className=\"star-container\">\n              <div className=\"star\"></div>\n            </div>\n            <div className=\"star-container\">\n              <div className=\"star\"></div>\n            </div>\n            <div className=\"star-container\">\n              <div className=\"star\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n}\n","import * as React from 'react'\nimport classNames from 'classnames'\n\nimport '../styles/TitleBlock.scss'\n\nexport const TitleBlock = (props) => {\n  const { title, subtitle, titleSize, subtitleSize } = props\n\n  return (\n    <div className=\"title-block\">\n      <h1\n        className={classNames(\n          { 'text-size-xxs': titleSize == 'xxs' },\n          { 'text-size-xs': titleSize == 'xs' },\n          { 'text-size-s': titleSize == 's' },\n          { 'text-size-m': titleSize == 'm' },\n          { 'text-size-l': titleSize == 'l' },\n          { 'text-size-xl': titleSize == 'xl' },\n        )}\n      >\n        {title}\n      </h1>\n      <h2\n        className={classNames(\n          'text-color-light',\n          { 'text-size-xxs': subtitleSize == 'xxs' },\n          { 'text-size-xs': subtitleSize == 'xs' },\n          { 'text-size-s': subtitleSize == 's' },\n          { 'text-size-m': subtitleSize == 'm' },\n          { 'text-size-l': subtitleSize == 'l' },\n          { 'text-size-xl': subtitleSize == 'xl' },\n        )}\n      >\n        {subtitle}\n      </h2>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport classNames from 'classnames'\n\nimport '../styles/ExploreScore.scss'\n\nexport const ExploreScore = (props) => {\n  const { exploreScore, size } = props\n\n  return (\n    <button\n      className={classNames(\n        'explore-score',\n        'circle',\n        'bezel-xs',\n        'drop-shadow',\n        { 'circle-s': size === 's' },\n        { 'circle-m': !size || size === 'm' },\n        { 'circle-l': size === 'l' },\n      )}\n    >\n      <p>{exploreScore}%</p>\n      <p>explore score</p>\n    </button>\n  )\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { ExploreScore } from './ExploreScore'\nimport '../styles/Topic.scss'\n\nexport const Topic = (props) => {\n  const { title, subdebates, exploreScore } = props\n\n  return (\n    <div className=\"topic-container\">\n      <button className=\"topic-title circle circle-l bezel-s\">\n        <h2>{title}</h2>\n      </button>\n      <button className=\"topic-search circle circle-s bezel-xs drop-shadow\"></button>\n      <button className=\"topic-media circle circle-m bezel-xs drop-shadow\">\n        <p>media</p>\n      </button>\n      <ExploreScore exploreScore={38} />\n      <button className=\"topic-subdebates circle circle-m bezel-xs drop-shadow\">\n        <p>{subdebates}</p>\n        <p>sub-debates</p>\n      </button>\n      <button className=\"topic-help circle circle-s bezel-xs drop-shadow\">\n        <p>?</p>\n      </button>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { TitleBlock } from '../components/TitleBlock'\nimport { Topic } from '../components/Topic'\nimport '../styles/Debates.scss'\nimport { PageEffects } from '../components/PageEffects'\n\nexport const Debates = (props) => {\n  return (\n    <main className=\"page debates\">\n      <PageEffects duration={200} animation=\"fadeOut\" options=\"once\" />\n      <TitleBlock title=\"Welcome!\" subtitle=\"please explore and search\" />\n      <div className=\"bottom-container\">\n        <Topic title=\"Climate Change\" exploreScore={38} subdebates={170} />\n        <Link to=\"/questions\" className=\"page-cta\">\n          Get into the debate >\n        </Link>\n      </div>\n    </main>\n  )\n}\n","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AddSchema, GetSchemaJSON, UUID_regex, UUID_regex_partial } from \"mobx-firelink\";\nimport { MapNodeType } from \"./@MapNodeType\"; // these are 22-chars, matching 22-char uuids/slug-ids\n\nexport var globalMapID = \"GLOBAL_MAP_00000000001\";\nexport var globalRootNodeID = \"GLOBAL_ROOT_0000000001\";\nexport var AccessLevel;\n\n(function (AccessLevel) {\n  AccessLevel[AccessLevel[\"Basic\"] = 10] = \"Basic\";\n  AccessLevel[AccessLevel[\"Verified\"] = 20] = \"Verified\";\n  AccessLevel[AccessLevel[\"Mod\"] = 30] = \"Mod\";\n  AccessLevel[AccessLevel[\"Admin\"] = 40] = \"Admin\";\n})(AccessLevel || (AccessLevel = {}));\n\nexport var ClaimForm;\n\n(function (ClaimForm) {\n  ClaimForm[ClaimForm[\"Base\"] = 10] = \"Base\";\n  ClaimForm[ClaimForm[\"Negation\"] = 20] = \"Negation\";\n  ClaimForm[ClaimForm[\"YesNoQuestion\"] = 30] = \"YesNoQuestion\";\n})(ClaimForm || (ClaimForm = {}));\n\nexport var MapNode = function MapNode(initialData) {\n  _classCallCheck(this, MapNode);\n\n  CE(this).VSet(initialData);\n}; // export const MapNode_id = UUID_regex;\n// export const MapNode_chainAfterFormat = \"^(\\\\[start\\\\]|[0-9]+)$\";\n\nAddSchema(\"MapNode\", {\n  properties: {\n    type: {\n      oneOf: GetValues_ForSchema(MapNodeType)\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    },\n    rootNodeForMap: {\n      $ref: \"UUID\"\n    },\n    ownerMapID: {\n      $ref: \"UUID\"\n    },\n    currentRevision: {\n      type: \"string\"\n    },\n    parents: {\n      $ref: \"ParentSet\"\n    },\n    children: {\n      $ref: \"ChildSet\"\n    },\n    childrenOrder: {\n      items: {\n        $ref: \"UUID\"\n      }\n    },\n    // talkRoot: {type: \"number\"},\n    multiPremiseArgument: {\n      type: \"boolean\"\n    },\n    layerPlusAnchorParents: {\n      $ref: \"LayerPlusAnchorParentSet\"\n    }\n  },\n  required: [\"type\", \"creator\", \"createdAt\", \"currentRevision\"]\n});\nAddSchema(\"MapNode_Partial\", function () {\n  var schema = GetSchemaJSON(\"MapNode\"); // schema.required = (schema.required as string[]).Except('creator', 'createdAt');\n\n  schema.required = [\"type\"];\n  return schema;\n}());\nexport var Polarity;\n\n(function (Polarity) {\n  Polarity[Polarity[\"Supporting\"] = 10] = \"Supporting\";\n  Polarity[Polarity[\"Opposing\"] = 20] = \"Opposing\";\n})(Polarity || (Polarity = {}));\n\nAddSchema(\"ParentSet\", {\n  patternProperties: _defineProperty({}, UUID_regex, {\n    $ref: \"ParentEntry\"\n  })\n});\nAddSchema(\"ParentEntry\", {\n  properties: {\n    _: {\n      type: \"boolean\"\n    }\n  },\n  required: [\"_\"]\n});\nAddSchema(\"ChildSet\", {\n  patternProperties: _defineProperty({}, UUID_regex, {\n    $ref: \"ChildEntry\"\n  })\n});\nAddSchema(\"ChildEntry\", {\n  properties: {\n    _: {\n      type: \"boolean\"\n    },\n    form: {\n      oneOf: GetValues_ForSchema(ClaimForm)\n    },\n    seriesAnchor: {\n      type: [\"null\", \"boolean\"]\n    },\n    polarity: {\n      oneOf: GetValues_ForSchema(Polarity)\n    }\n  },\n  required: [\"_\"]\n});\nAddSchema(\"LayerPlusAnchorParentSet\", {\n  patternProperties: _defineProperty({}, \"\".concat(UUID_regex_partial, \"\\\\+\").concat(UUID_regex_partial), {\n    type: \"boolean\"\n  })\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AddSchema, GetSchemaJSON } from \"mobx-firelink\";\nimport { MapType } from \"../maps/@Map\";\nimport { AccessLevel } from \"./@MapNode\";\nexport var TitleKey_values = [\"base\", \"negation\", \"yesNoQuestion\"];\nexport var TitlesMap = function TitlesMap() {\n  _classCallCheck(this, TitlesMap);\n};\nAddSchema(\"TitlesMap\", {\n  properties: {\n    base: {\n      type: \"string\"\n    },\n    negation: {\n      type: \"string\"\n    },\n    yesNoQuestion: {\n      type: \"string\"\n    },\n    // allTerms: { items: { type: 'string' } },\n    allTerms: {\n      type: \"object\"\n    }\n  }\n});\nexport var PermissionInfoType;\n\n(function (PermissionInfoType) {\n  PermissionInfoType[PermissionInfoType[\"Creator\"] = 10] = \"Creator\";\n  PermissionInfoType[PermissionInfoType[\"MapEditors\"] = 20] = \"MapEditors\";\n  PermissionInfoType[PermissionInfoType[\"Anyone\"] = 30] = \"Anyone\";\n})(PermissionInfoType || (PermissionInfoType = {}));\n\nexport var PermissionInfo = function PermissionInfo(initialData) {\n  _classCallCheck(this, PermissionInfo);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"PermissionInfo\", {\n  properties: {\n    type: {\n      oneOf: GetValues_ForSchema(PermissionInfoType)\n    },\n    mapID: {\n      type: \"string\"\n    }\n  },\n  required: [\"type\"]\n});\nexport var MapNodeRevision_Defaultable_props = [\"accessLevel\", \"votingDisabled\", \"permission_edit\", \"permission_contribute\"];\nexport function MapNodeRevision_Defaultable_DefaultsForMap(mapType) {\n  return {\n    accessLevel: AccessLevel.Basic,\n    votingDisabled: false,\n    permission_edit: new PermissionInfo({\n      type: mapType == MapType.Private ? PermissionInfoType.MapEditors : PermissionInfoType.Creator\n    }),\n    permission_contribute: new PermissionInfo({\n      type: mapType == MapType.Private ? PermissionInfoType.MapEditors : PermissionInfoType.Anyone\n    })\n  };\n}\nexport var MapNodeRevision = function MapNodeRevision(initialData) {\n  _classCallCheck(this, MapNodeRevision);\n\n  // updatedAt: number;\n  // approved = false;\n  // text\n  this.titles = {\n    base: \"\"\n  }; // permissions\n  // only applied client-side; would need to be in protected branch of tree (or use a long, random, and unreferenced node-id) to be \"actually\" inaccessible\n\n  this.accessLevel = AccessLevel.Basic;\n  this.permission_edit = new PermissionInfo({\n    type: PermissionInfoType.Creator\n  });\n  this.permission_contribute = new PermissionInfo({\n    type: PermissionInfoType.Anyone\n  });\n  CE(this).VSet(initialData);\n}; // export const MapNodeRevision_titlePattern = `(^\\\\S$)|(^\\\\S.*\\\\S$)`; // must start and end with non-whitespace\n\nexport var MapNodeRevision_titlePattern = \"^\\\\S.*$\"; // must start with non-whitespace\n\nAddSchema(\"MapNodeRevision\", {\n  properties: {\n    node: {\n      type: \"string\"\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    },\n    //approved: {type: \"boolean\"},\n    // text\n    titles: {\n      properties: {\n        // base: {pattern: MapNodeRevision_titlePattern}, negation: {pattern: MapNodeRevision_titlePattern}, yesNoQuestion: {pattern: MapNodeRevision_titlePattern},\n        base: {\n          type: \"string\"\n        },\n        negation: {\n          type: \"string\"\n        },\n        yesNoQuestion: {\n          type: \"string\"\n        }\n      }\n    },\n    note: {\n      type: [\"null\", \"string\"]\n    },\n    termAttachments: {\n      items: {\n        $ref: \"TermAttachment\"\n      }\n    },\n    argumentType: {\n      $ref: \"ArgumentType\"\n    },\n    // attachment\n    equation: {\n      $ref: \"EquationAttachment\"\n    },\n    references: {\n      $ref: \"ReferencesAttachment\"\n    },\n    quote: {\n      $ref: \"QuoteAttachment\"\n    },\n    image: {\n      $ref: \"ImageAttachment\"\n    },\n    // permissions\n    accessLevel: {\n      oneOf: GetValues_ForSchema(AccessLevel).concat({\n        const: null\n      })\n    },\n    votingDisabled: {\n      type: [\"null\", \"boolean\"]\n    },\n    // voteLevel: { oneOf: GetValues_ForSchema(AccessLevel).concat({ const: null }) }, // not currently used\n    permission_edit: {\n      $ref: \"PermissionInfo\"\n    },\n    permission_contribute: {\n      $ref: \"PermissionInfo\"\n    },\n    // others\n    fontSizeOverride: {\n      type: [\"number\", \"null\"]\n    },\n    widthOverride: {\n      type: [\"number\", \"null\"]\n    }\n  },\n  required: [\"node\", \"creator\", \"createdAt\"],\n  allOf: [// if not an argument or content-node, require \"titles\" prop\n  {\n    if: {\n      prohibited: [\"argumentType\", \"equation\", \"quote\", \"image\"]\n    },\n    then: {\n      required: [\"titles\"]\n    }\n  }]\n});\nAddSchema(\"MapNodeRevision_Partial\", function () {\n  var schema = GetSchemaJSON(\"MapNodeRevision\"); // schema.required = (schema.required as string[]).Except('creator', 'createdAt');\n\n  schema.required = [];\n  return schema;\n}()); // argument\n// ==========\n\nexport var ArgumentType;\n\n(function (ArgumentType) {\n  ArgumentType[ArgumentType[\"Any\"] = 10] = \"Any\";\n  ArgumentType[ArgumentType[\"AnyTwo\"] = 15] = \"AnyTwo\";\n  ArgumentType[ArgumentType[\"All\"] = 20] = \"All\";\n})(ArgumentType || (ArgumentType = {}));\n\nAddSchema(\"ArgumentType\", {\n  oneOf: GetValues_ForSchema(ArgumentType)\n});\nexport function GetArgumentTypeDisplayText(type) {\n  return {\n    Any: \"any\",\n    AnyTwo: \"any two\",\n    All: \"all\"\n  }[ArgumentType[type]];\n}","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AddSchema, GetSchemaJSON, Schema, UUID_regex } from \"mobx-firelink\";\nimport { MapNodeRevision_Defaultable_props, MapNodeRevision_Defaultable_DefaultsForMap } from \"../nodes/@MapNodeRevision\";\nexport var MapType;\n\n(function (MapType) {\n  MapType[MapType[\"Private\"] = 10] = \"Private\";\n  MapType[MapType[\"Public\"] = 20] = \"Public\";\n  MapType[MapType[\"Global\"] = 30] = \"Global\";\n})(MapType || (MapType = {}));\n\nexport var Map = function Map(initialData) {\n  _classCallCheck(this, Map);\n\n  this.noteInline = true;\n  this.defaultExpandDepth = 2;\n  CE(this).VSet(initialData); // this.createdAt = Date.now();\n\n  if (!(\"requireMapEditorsCanEdit\" in initialData)) {\n    this.requireMapEditorsCanEdit = this.type == MapType.Private;\n  }\n\n  if (!(\"nodeDefaults\" in initialData)) {\n    this.nodeDefaults = MapNodeRevision_Defaultable_DefaultsForMap(this.type);\n  }\n};\nexport var Map_namePattern = '^[a-zA-Z0-9 ,\\'\"%:.?\\\\-()\\\\/]+$'; // export const Map_namePattern = '^\\\\S.*$'; // must start with non-whitespace // todo: probably switch to a more lax pattern like this, eg. so works for other languages\n\nAddSchema(\"Map\", [\"MapNodeRevision\"], function () {\n  var _CE;\n\n  return {\n    properties: {\n      name: {\n        type: \"string\",\n        pattern: Map_namePattern\n      },\n      note: {\n        type: \"string\"\n      },\n      noteInline: {\n        type: \"boolean\"\n      },\n      type: {\n        oneOf: GetValues_ForSchema(MapType)\n      },\n      rootNode: {\n        type: \"string\"\n      },\n      defaultExpandDepth: {\n        type: \"number\"\n      },\n      defaultTimelineID: {\n        type: \"string\"\n      },\n      requireMapEditorsCanEdit: {\n        type: \"boolean\"\n      },\n      nodeDefaults: Schema({\n        properties: (_CE = CE(GetSchemaJSON(\"MapNodeRevision\").properties)).Including.apply(_CE, _toConsumableArray(MapNodeRevision_Defaultable_props))\n      }),\n      featured: {\n        type: \"boolean\"\n      },\n      // editors: { patternProperties: { [UUID_regex]: { type: 'boolean' } } },\n      editorIDs: {\n        items: {\n          type: \"string\"\n        }\n      },\n      creator: {\n        type: \"string\"\n      },\n      createdAt: {\n        type: \"number\"\n      },\n      edits: {\n        type: \"number\"\n      },\n      editedAt: {\n        type: \"number\"\n      },\n      layers: {\n        patternProperties: _defineProperty({}, UUID_regex, {\n          type: \"boolean\"\n        })\n      },\n      timelines: {\n        patternProperties: _defineProperty({}, UUID_regex, {\n          type: \"boolean\"\n        })\n      }\n    },\n    required: [\"name\", \"type\", \"rootNode\", \"creator\", \"createdAt\"]\n  };\n});","import { emptyArray_forLoading, ToNumber, CE, ObjectCE } from \"js-vextensions\";\nimport { GetDoc, GetDocs, StoreAccessor } from \"mobx-firelink\";\nimport { MapType } from \"./maps/@Map\";\nexport var GetMaps = StoreAccessor(function (s) {\n  return function () {\n    var orderByEdits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    /* const mapsMap = GetData({ collection: true }, 'maps');\r\n    return CachedTransform('GetMaps', [], mapsMap, () => (mapsMap ? mapsMap.VValues(true) : [])); */\n    var mapsMap = GetDocs({}, function (a) {\n      return a.maps;\n    });\n    if (!mapsMap) return emptyArray_forLoading;\n    var result = ObjectCE(mapsMap).VValues();\n    if (orderByEdits) result = CE(result).OrderByDescending(function (a) {\n      return ToNumber(a && a.edits, 0);\n    });\n    return result;\n  };\n});\nexport var GetMaps_Private = StoreAccessor(function (s) {\n  return function () {\n    var orderByEdits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return GetMaps(orderByEdits).filter(function (a) {\n      return a && a.type == MapType.Private;\n    });\n  };\n});\nexport var GetMaps_Public = StoreAccessor(function (s) {\n  return function () {\n    var orderByEdits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return GetMaps(orderByEdits).filter(function (a) {\n      return a && a.type == MapType.Public;\n    });\n  };\n});\n/* export function GetMapsOfType(type: MapType): Map[] {\r\n    const mapsMap = GetData({ collection: true }, 'maps');\r\n    return CachedTransform('GetMaps', [type], mapsMap, () => (mapsMap ? mapsMap.VValues(true).filter(a => a && a.type == type) : []));\r\n} */\n\nexport var GetMap = StoreAccessor(function (s) {\n  return function (id) {\n    return GetDoc({}, function (a) {\n      return a.maps.get(id);\n    });\n  };\n});","import \"mobx\"; // import mobx before we declare the module below, otherwise vscode auto-importer gets confused at path to mobx\n\nimport { Firelink, SetDefaultFireOptions } from \"mobx-firelink\";\nexport var fire = new Firelink(); //store.firelink = fire;\n\nSetDefaultFireOptions({\n  fire: fire\n}); // console.log('Default fire options set:', { fire });\n//OnPopulated(()=>fire.InitSubs());\n\nexport function InitFirelink(rootPathInDB, rootStore) {\n  //const linkRootPath = `versions/v${dbVersion}-${DB_SHORT}`;\n  fire.Initialize({\n    rootPathInDB: rootPathInDB,\n    rootStore: rootStore\n  }); // start auto-runs after store+firelink are created\n  //require(\"./Utils/AutoRuns\");\n} // modify some default options\n// StoreAccessorOptions.default.cache_keepAlive = true;\n// mobx debug helper\n// ==========\n\n/* window['mobxDevtools_processChange'] = (change) => {\r\n    // change.rootStoreData = store;\r\n    /* change.mapViews = store.main.mapViews['raw'];\r\n    change.mapViews._sendFull = true; *#/\r\n    change.mapViews = { _serialize() {\r\n        // return store.main.mapViews['raw'];\r\n        return Clone(store.main.mapViews['raw']);\r\n    } };\r\n}; */","import { StoreAccessor } from \"mobx-firelink\";\nimport { fire } from \"../MobXFirelink\"; // manually import these, since otherwise they're never runtime-imported\n\nrequire(\"./firebase/users_private/@User_Private\");\n/* export interface FirebaseDBShape {\r\n    modules: Collection_Closed<{\r\n        // feedback: FeedbackDBShape;\r\n    }>;\r\n\r\n    general: Collection_Closed<{data: GeneralData}>;\r\n    images: Collection<Image>;\r\n    layers: Collection<Layer>;\r\n    maps: Collection<Map, {\r\n        nodeEditTimes: Collection<NodeEditTimes>,\r\n    }>;\r\n    nodes: Collection<MapNode, {\r\n        ratings: Collection<RatingsRoot>, // $ratingType -> $userID -> value -> $value\r\n        // extras: Collection<any>,\r\n        revisions: Collection<MapNodeRevision>,\r\n        // stats: Collection<MapNodeStats>,\r\n        // viewers: Collection<ViewerSet>, // removed due to privacy concerns\r\n        phrasings: Collection<MapNodePhrasing>,\r\n    }>;\r\n    terms: Collection<Term, {\r\n        components: Collection<TermComponent>,\r\n        names: Collection<any>,\r\n    }>;\r\n    timelines: Collection<Timeline, {\r\n        steps: Collection<TimelineStep>,\r\n    }>;\r\n    users: Collection<User, {\r\n        extras: Collection<UserExtraInfo>,\r\n        mapInfo: Collection<UserMapInfoSet>, // $mapID -> layerStates -> $layerID -> [boolean, for whether enabled]\r\n        // viewedNodes: Collection<ViewedNodeSet>, // removed due to privacy concerns\r\n    }>;\r\n} */\n\n\nexport var GetAuth = StoreAccessor(function (s) {\n  return function () {\n    //return s.firelink.userInfo;\n    return fire.userInfo;\n  };\n});\nexport var GetAuth_Raw = StoreAccessor(function (s) {\n  return function () {\n    //return s.firelink.userInfo_raw;\n    return fire.userInfo_raw;\n  };\n});","import { GetDoc, GetDocs, IsAuthValid, StoreAccessor } from \"mobx-firelink\";\nimport { GetAuth } from \"../firebase\";\n/* export function GetAuth(state: RootState) {\r\n    return state.firebase.auth;\r\n} */\n\nexport var MeID = StoreAccessor(function (s) {\n  return function () {\n    // return state.firebase.data.auth ? state.firebase.data.auth.uid : null;\n    // return GetData(state.firebase, \"auth\");\n\n    /* var result = helpers.pathToJS(firebase, \"auth\").uid;\r\n    return result; */\n\n    /* let firebaseSet = State().firebase as Set<any>;\r\n    return firebaseSet.toJS().auth.uid; */\n    // return State(a=>a.firebase.auth) ? State(a=>a.firebase.auth.uid) : null;\n    return IsAuthValid(GetAuth()) ? GetAuth().id : null;\n  };\n});\nexport var Me = StoreAccessor(function (s) {\n  return function () {\n    return GetUser(MeID());\n  };\n});\nexport var GetUser = StoreAccessor(function (s) {\n  return function (userID) {\n    return GetDoc({}, function (a) {\n      return a.users.get(userID);\n    });\n  };\n});\nexport var GetUsers = StoreAccessor(function (s) {\n  return function () {\n    return GetDocs({}, function (a) {\n      return a.users;\n    });\n  };\n});","import { MergeDBUpdates, Command } from \"mobx-firelink\";\nimport { GetMap } from \"./Store/firebase/maps\";\nimport { IsFunction } from \"js-vextensions\";\nimport { GetUser } from \"./Store/firebase/users\";\nexport function MapEdit() {\n  var mapIDKey = \"mapID\";\n\n  if (IsFunction(arguments.length <= 0 ? undefined : arguments[0])) {\n    ApplyToClass(arguments.length <= 0 ? undefined : arguments[0]);\n  } else {\n    mapIDKey = arguments.length <= 0 ? undefined : arguments[0];\n    return ApplyToClass;\n  }\n\n  function ApplyToClass(targetClass) {\n    /* if (targetClass.prototype instanceof Command_Old) {\r\n        const oldPrepare = targetClass.prototype.Prepare;\r\n        targetClass.prototype.Prepare = async function () {\r\n            await oldPrepare.apply(this);\r\n            const mapID = this.payload[mapIDKey];\r\n            if (mapID) {\r\n                this.map_oldEditCount = (await GetAsync(() => GetMap(mapID)))?.edits ?? 0;\r\n            }\r\n        };\r\n    } */\n    if (targetClass.prototype instanceof Command) {\n      var oldValidate = targetClass.prototype.Validate;\n\n      targetClass.prototype.Validate = function () {\n        var _a;\n\n        var result = oldValidate.apply(this);\n        var mapID = this.payload[mapIDKey];\n\n        if (mapID) {\n          var map = GetMap(mapID);\n\n          if (map != null) {\n            this.map_oldEditCount = (_a = map.edits, _a !== null && _a !== void 0 ? _a : 0);\n          }\n        }\n\n        return result;\n      };\n    }\n\n    var oldGetDBUpdates = targetClass.prototype.GetDBUpdates;\n\n    targetClass.prototype.GetDBUpdates = function () {\n      var updates = oldGetDBUpdates.apply(this);\n      var newUpdates = {};\n\n      if (this.map_oldEditCount != null) {\n        var mapID = this.payload[mapIDKey];\n\n        if (mapID) {\n          newUpdates[\"maps/\".concat(mapID, \"/.edits\")] = this.map_oldEditCount + 1;\n          newUpdates[\"maps/\".concat(mapID, \"/.editedAt\")] = Date.now();\n        }\n      }\n\n      return MergeDBUpdates(updates, newUpdates);\n    };\n  }\n}\nexport function UserEdit(targetClass) {\n  /* if (targetClass.prototype instanceof Command_Old) {\r\n      const oldPrepare = targetClass.prototype.Prepare;\r\n      targetClass.prototype.Prepare = async function () {\r\n          await oldPrepare.apply(this);\r\n          this.user_oldEditCount = (await GetAsync(() => GetUserExtraInfo(this.userInfo.id)))?.edits ?? 0;\r\n      };\r\n  } */\n  if (targetClass.prototype instanceof Command) {\n    var oldValidate = targetClass.prototype.Validate;\n\n    targetClass.prototype.Validate = function () {\n      var _a;\n\n      var result = oldValidate.apply(this);\n      var user = GetUser(this.userInfo.id);\n\n      if (user) {\n        this.user_oldEditCount = (_a = user.edits, _a !== null && _a !== void 0 ? _a : 0);\n      }\n\n      return result;\n    };\n  }\n\n  var oldGetDBUpdates = targetClass.prototype.GetDBUpdates;\n\n  targetClass.prototype.GetDBUpdates = function () {\n    var updates = oldGetDBUpdates.apply(this);\n    var newUpdates = {};\n\n    if (this.user_oldEditCount != null) {\n      newUpdates[\"users/\".concat(this.userInfo.id, \"/.edits\")] = this.user_oldEditCount + 1;\n      newUpdates[\"users/\".concat(this.userInfo.id, \"/.lastEditAt\")] = Date.now();\n    }\n\n    return MergeDBUpdates(updates, newUpdates);\n  };\n}","import { IsNaN } from \"js-vextensions\";\nimport { WhereOp, GetDoc, GetDocs, StoreAccessor } from \"mobx-firelink\";\nexport var GetNodeRevision = StoreAccessor(function (s) {\n  return function (id) {\n    if (id == null || IsNaN(id)) return null;\n    return GetDoc({}, function (a) {\n      return a.nodeRevisions.get(id);\n    });\n  };\n}); // todo: make this use an actual query, to improve performance\n// todo2 (nvm, canceled): actually, maybe instead just use approach used for map-node-phrasings (having separate db-path for each node's phrasing-collection) -- assuming it has no unforeseen issues\n// removed this download-and-watch-whole-collection function because it slows down the website way too much\n\n/* export function GetNodeRevisions(nodeID: string): MapNodeRevision[] {\r\n    const entryMap = GetData({ collection: true }, 'nodeRevisions');\r\n    return CachedTransform('GetNodeRevisions', [nodeID], entryMap, () => (entryMap ? entryMap.VValues(true).filter(a => a && a.node == nodeID) : []));\r\n} */\n\n/* export async function GetNodeRevisionIDsForNode_OneTime(nodeID: UUID) {\r\n    let query = firestoreDB.collection(DBPath('nodeRevisions')) as CollectionReference | Query;\r\n    query = query.where('node', '==', nodeID);\r\n\r\n    const { docs } = await query.get();\r\n    const docIDs = docs.map(a => a.id);\r\n    return docIDs;\r\n} */\n\nexport var GetNodeRevisions = StoreAccessor(function (s) {\n  return function (nodeID) {\n    /* const entryMap = GetData_Query(\r\n        {\r\n            // key: `GetNodeRevisions_${nodeID}`,\r\n            WhereOps: [new WhereOp('node', '==', nodeID)],\r\n            collection: true,\r\n        },\r\n        'nodeRevisions',\r\n    );\r\n    return entryMap ? entryMap.VValues(true).filter((a) => a && a.node == nodeID) : []; */\n    // return entryMap ? entryMap.VValues(true).filter(a => a && a.node == nodeID) : [];\n    return GetDocs({\n      queryOps: [new WhereOp(\"node\", \"==\", nodeID)]\n    }, function (a) {\n      return a.nodeRevisions;\n    });\n  };\n});\nexport var GetNodeRevisionsByTitle = StoreAccessor(function (s) {\n  return function (title, titleKey) {\n    return GetDocs({\n      queryOps: [new WhereOp(\"titles.\".concat(titleKey), \"==\", title)]\n    }, function (a) {\n      return a.nodeRevisions;\n    });\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, Assert } from \"js-vextensions\";\nimport { AddSchema } from \"mobx-firelink\"; // export type SourceChain = { [key: number]: Source; };\n// export type SourceChainI = {[key: number]: Source;};\n// export class SourceChain /*implements SourceChainI*/ {\n\n/* export class SourceChain extends Array {\r\n    [key: number]: Source;\r\n    0 = new Source();\r\n}; */\n\nexport var SourceChain = function SourceChain() {\n  var sources = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n  _classCallCheck(this, SourceChain);\n\n  this.sources = sources;\n}; // AddSchema({patternProperties: {\"^[A-Za-z0-9_-]+$\": {$ref: \"Source\"}}, minProperties: 1}, \"SourceChain\");\n\nAddSchema(\"SourceChain\", {\n  properties: {\n    sources: {\n      items: {\n        $ref: \"Source\"\n      },\n      minItems: 1\n    }\n  },\n  required: [\"sources\"]\n});\nexport var SourceType;\n\n(function (SourceType) {\n  SourceType[SourceType[\"Speech\"] = 10] = \"Speech\";\n  SourceType[SourceType[\"Writing\"] = 20] = \"Writing\";\n  /* Image = 30,\r\n  Video = 40, */\n\n  SourceType[SourceType[\"Webpage\"] = 50] = \"Webpage\";\n})(SourceType || (SourceType = {}));\n\nAddSchema(\"SourceType\", {\n  oneOf: GetValues_ForSchema(SourceType)\n});\nexport var Source_linkURLPattern = \"^https?://[^\\\\s/$.?#]+\\\\.[^\\\\s]+$\";\nexport var Source = function Source() {\n  _classCallCheck(this, Source);\n\n  this.type = SourceType.Webpage;\n};\nAddSchema(\"Source\", {\n  properties: {\n    type: {\n      $ref: \"SourceType\"\n    },\n    name: {\n      pattern: \"\\\\S.*\"\n    },\n    author: {\n      pattern: \"\\\\S.*\"\n    },\n    link: {\n      type: \"string\"\n    }\n  },\n  // required: [\"name\", \"author\", \"link\"],\n\n  /* anyOf: [\r\n      {required: [\"name\"], prohibited: [\"link\"]},\r\n      {required: [\"author\"], prohibited: [\"link\"]},\r\n      {required: [\"link\"], prohibited: [\"name\", \"author\"]}\r\n  ], */\n  allOf: [{\n    if: {\n      properties: {\n        type: {\n          enum: [SourceType.Writing, SourceType.Speech]\n        }\n      }\n    },\n    then: {\n      anyOf: [{\n        required: [\"name\"]\n      }, {\n        required: [\"author\"]\n      }],\n      prohibited: [\"link\"]\n    }\n  }, {\n    if: {\n      properties: {\n        type: {\n          const: SourceType.Webpage\n        }\n      }\n    },\n    then: {\n      required: [\"link\"],\n      prohibited: [\"name\", \"author\"]\n    }\n  }]\n});\nexport function GetSourceNamePlaceholderText(sourceType) {\n  if (sourceType == SourceType.Speech) return \"speech name\";\n  if (sourceType == SourceType.Writing) return \"book/document name\"; // if (sourceType == SourceType.Webpage) return \"(webpage name)\";\n\n  Assert(false);\n}\nexport function GetSourceAuthorPlaceholderText(sourceType) {\n  if (sourceType == SourceType.Speech) return \"speaker\";\n  if (sourceType == SourceType.Writing) return \"book/document author\"; // if (sourceType == SourceType.Webpage) return \"(webpage name)\";\n\n  Assert(false);\n}","import { IsNaN } from \"js-vextensions\";\nimport { GetDoc, GetDocs, StoreAccessor, WhereOp } from \"mobx-firelink\";\nexport var GetImage = StoreAccessor(function (s) {\n  return function (id) {\n    if (id == null || IsNaN(id)) return null;\n    return GetDoc({}, function (a) {\n      return a.images.get(id);\n    });\n  };\n});\n/* export async function GetImageAsync(id: string) {\r\n    return await GetDataAsync(`images/${id}`) as Image;\r\n} */\n\nexport var GetImages = StoreAccessor(function (s) {\n  return function () {\n    return GetDocs({}, function (a) {\n      return a.images;\n    });\n  };\n});\nexport var GetImagesByURL = StoreAccessor(function (s) {\n  return function (url) {\n    return GetDocs({\n      queryOps: [new WhereOp(\"url\", \"==\", url)]\n    }, function (a) {\n      return a.images;\n    });\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { Source } from \"../nodeRevisions/@SourceChain\";\nexport var ImageType;\n\n(function (ImageType) {\n  ImageType[ImageType[\"Photo\"] = 10] = \"Photo\";\n  ImageType[ImageType[\"Illustration\"] = 20] = \"Illustration\";\n})(ImageType || (ImageType = {}));\n\nAddSchema(\"ImageType\", {\n  oneOf: GetValues_ForSchema(ImageType)\n});\nexport function GetNiceNameForImageType(type) {\n  return ImageType[type].toLowerCase();\n}\nexport var Image = function Image(initialData) {\n  _classCallCheck(this, Image);\n\n  this.url = \"\";\n  this.sourceChains = [{\n    sources: [new Source()]\n  }];\n  CE(this).VSet(initialData); // this.createdAt = Date.now();\n};\nexport var Image_namePattern = '^[a-zA-Z0-9 ,\\'\"%\\\\-()\\\\/]+$';\nexport var Image_urlPattern = \"^https?://[^\\\\s/$.?#]+\\\\.[^\\\\s]+\\\\.(jpg|jpeg|gif|png)$\";\nAddSchema(\"Image\", {\n  properties: {\n    name: {\n      type: \"string\",\n      pattern: Image_namePattern\n    },\n    type: {\n      $ref: \"ImageType\"\n    },\n    // url: { pattern: Image_urlPattern },\n    url: {\n      type: \"string\"\n    },\n    description: {\n      type: \"string\"\n    },\n    previewWidth: {\n      type: [\"number\", \"null\"]\n    },\n    sourceChains: {\n      items: {\n        $ref: \"SourceChain\"\n      }\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    }\n  },\n  required: [\"name\", \"type\", \"url\", \"description\", \"sourceChains\", \"creator\", \"createdAt\"]\n});","import _get from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema, Validate } from \"mobx-firelink\";\nimport { ModifyString, CE } from \"js-vextensions\";\nexport var MapNodeTag = function MapNodeTag(initialData) {\n  _classCallCheck(this, MapNodeTag);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"MapNodeTag\", {\n  properties: {\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    },\n    //type: {$ref: \"MapNodeTagType\"},\n    //nodes: {patternProperties: {[UUID_regex]: {type: \"string\"}}},\n    nodes: {\n      items: {\n        $ref: \"UUID\"\n      }\n    },\n    mirrorChildrenFromXToY: {\n      $ref: \"TagComp_MirrorChildrenFromXToY\"\n    },\n    xIsExtendedByY: {\n      $ref: \"TagComp_XIsExtendedByY\"\n    },\n    mutuallyExclusiveGroup: {\n      $ref: \"TagComp_MutuallyExclusiveGroup\"\n    },\n    restrictMirroringOfX: {\n      $ref: \"TagComp_RestrictMirroringOfX\"\n    }\n  },\n  required: [\"creator\", \"createdAt\", \"nodes\"]\n}); // tag comps\n// ==========\n\nexport var TagComp =\n/*#__PURE__*/\nfunction () {\n  function TagComp() {\n    _classCallCheck(this, TagComp);\n  }\n\n  _createClass(TagComp, [{\n    key: \"GetFinalTagComps\",\n\n    /** Has side-effect: Casts data to its original class/type. */\n    value: function GetFinalTagComps() {\n      var compClass = GetTagCompClassByKey(this[\"_key\"]);\n      if (compClass) return [CE(this).As(compClass)];\n      return [this];\n    }\n  }]);\n\n  return TagComp;\n}();\n/*export class TagComp_ExampleBasedClaim extends TagComp {\r\n    //static key = \"exampleBasedClaim\";\r\n    static displayName = \"example-based claim\";\r\n    static description = \"Makes-so only arguments of a given polarity can be added; used for claims which default to true/false, in the absense of arguments to the contrary.\";\r\n    static nodeKeys = [\"nodeX\"];\r\n\r\n    constructor(initialData?: Partial<TagComp_ExampleBasedClaim>) { super(); this.VSet(initialData); }\r\n\r\n    nodeX: string;\r\n    polarityAllowed: Polarity;\r\n}\r\nAddSchema(\"TagComp_ExampleBasedClaim\", {\r\n    properties: {\r\n        nodeX: {$ref: \"UUID\"},\r\n        polarityAllowed: {$ref: \"Polarity\"},\r\n    },\r\n});*/\n\nexport var TagComp_MirrorChildrenFromXToY =\n/*#__PURE__*/\nfunction (_TagComp) {\n  _inherits(TagComp_MirrorChildrenFromXToY, _TagComp);\n\n  function TagComp_MirrorChildrenFromXToY(initialData) {\n    var _this;\n\n    _classCallCheck(this, TagComp_MirrorChildrenFromXToY);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TagComp_MirrorChildrenFromXToY).call(this));\n    _this.mirrorSupporting = true;\n    _this.mirrorOpposing = true;\n    _this.reversePolarities = false;\n    _this.disableDirectChildren = false;\n    CE(_assertThisInitialized(_assertThisInitialized(_this))).VSet(initialData);\n    return _this;\n  }\n\n  return TagComp_MirrorChildrenFromXToY;\n}(TagComp); //static key = \"mirrorChildrenFromXToY\";\n\nTagComp_MirrorChildrenFromXToY.displayName = \"mirror children from X to Y\";\nTagComp_MirrorChildrenFromXToY.description = \"Makes-so any children of node-x (matching the parameters) are shown as children of node-y. (only usable for claims currently)\";\nTagComp_MirrorChildrenFromXToY.nodeKeys = [\"nodeX\", \"nodeY\"];\nAddSchema(\"TagComp_MirrorChildrenFromXToY\", {\n  properties: {\n    nodeX: {\n      $ref: \"UUID\"\n    },\n    nodeY: {\n      $ref: \"UUID\"\n    },\n    mirrorSupporting: {\n      type: \"boolean\"\n    },\n    mirrorOpposing: {\n      type: \"boolean\"\n    },\n    reversePolarities: {\n      type: \"boolean\"\n    },\n    disableDirectChildren: {\n      type: \"boolean\"\n    }\n  }\n});\nexport var TagComp_XIsExtendedByY =\n/*#__PURE__*/\nfunction (_TagComp2) {\n  _inherits(TagComp_XIsExtendedByY, _TagComp2);\n\n  function TagComp_XIsExtendedByY(initialData) {\n    var _this2;\n\n    _classCallCheck(this, TagComp_XIsExtendedByY);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(TagComp_XIsExtendedByY).call(this));\n    CE(_assertThisInitialized(_assertThisInitialized(_this2))).VSet(initialData);\n    return _this2;\n  }\n\n  _createClass(TagComp_XIsExtendedByY, [{\n    key: \"GetFinalTagComps\",\n    value: function GetFinalTagComps() {\n      var result = _get(_getPrototypeOf(TagComp_XIsExtendedByY.prototype), \"GetFinalTagComps\", this).call(this);\n\n      var mirrorComp_xConsToY = new TagComp_MirrorChildrenFromXToY({\n        nodeX: this.nodeX,\n        nodeY: this.nodeY,\n        mirrorSupporting: false,\n        mirrorOpposing: true\n      });\n      result.push(mirrorComp_xConsToY);\n      var mirrorComp_yProsToX = new TagComp_MirrorChildrenFromXToY({\n        nodeX: this.nodeY,\n        nodeY: this.nodeX,\n        mirrorSupporting: true,\n        mirrorOpposing: false\n      });\n      result.push(mirrorComp_yProsToX);\n      return result;\n    }\n  }]);\n\n  return TagComp_XIsExtendedByY;\n}(TagComp);\nTagComp_XIsExtendedByY.displayName = \"X is extended by Y (composite)\";\nTagComp_XIsExtendedByY.description = CE(\"\\n\\t\\tMeaning: claim Y is the same as claim X, except it is wider-scoped (and thus weaker) than X -- along some consistent axis/criteria of a series.\\n\\t\\tExample: X (we should charge at least $50) is extended by Y (we should charge at least $100).\\n\\t\\tEffect: Makes-so any con-args of X (base) are mirrored as con-args of Y (extension), and any pro-args of Y (extension) are mirrored as pro-args of X (base).\\n\\t\").AsMultiline(0);\nTagComp_XIsExtendedByY.nodeKeys = [\"nodeX\", \"nodeY\"];\nAddSchema(\"TagComp_XIsExtendedByY\", {\n  properties: {\n    nodeX: {\n      $ref: \"UUID\"\n    },\n    nodeY: {\n      $ref: \"UUID\"\n    }\n  }\n});\nexport var TagComp_MutuallyExclusiveGroup =\n/*#__PURE__*/\nfunction (_TagComp3) {\n  _inherits(TagComp_MutuallyExclusiveGroup, _TagComp3);\n\n  function TagComp_MutuallyExclusiveGroup(initialData) {\n    var _this3;\n\n    _classCallCheck(this, TagComp_MutuallyExclusiveGroup);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(TagComp_MutuallyExclusiveGroup).call(this));\n    _this3.nodes = [];\n    _this3.mirrorXProsAsYCons = true;\n    CE(_assertThisInitialized(_assertThisInitialized(_this3))).VSet(initialData);\n    return _this3;\n  }\n\n  _createClass(TagComp_MutuallyExclusiveGroup, [{\n    key: \"GetFinalTagComps\",\n    value: function GetFinalTagComps() {\n      var result = _get(_getPrototypeOf(TagComp_MutuallyExclusiveGroup.prototype), \"GetFinalTagComps\", this).call(this);\n\n      if (this.mirrorXProsAsYCons) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var nodeX = _step.value;\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = CE(this.nodes).Except(nodeX)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var nodeY = _step2.value;\n                var mirrorComp = new TagComp_MirrorChildrenFromXToY({\n                  nodeX: nodeX,\n                  nodeY: nodeY,\n                  mirrorSupporting: true,\n                  mirrorOpposing: false,\n                  reversePolarities: true\n                });\n                result.push(mirrorComp);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      return result;\n    }\n  }]);\n\n  return TagComp_MutuallyExclusiveGroup;\n}(TagComp);\nTagComp_MutuallyExclusiveGroup.displayName = \"mutually exclusive group (composite)\";\nTagComp_MutuallyExclusiveGroup.description = CE(\"\\n\\t\\tMarks a set of nodes as being mutually exclusive with each other.\\n\\t\\t(common use: having each one's pro-args be mirrored as con-args of the others)\\n\\t\").AsMultiline(0);\nTagComp_MutuallyExclusiveGroup.nodeKeys = [\"nodes\"];\nAddSchema(\"TagComp_MutuallyExclusiveGroup\", {\n  properties: {\n    nodes: {\n      items: {\n        $ref: \"UUID\"\n      }\n    },\n    mirrorXProsAsYCons: {\n      type: \"boolean\"\n    }\n  }\n});\nexport var TagComp_RestrictMirroringOfX =\n/*#__PURE__*/\nfunction (_TagComp4) {\n  _inherits(TagComp_RestrictMirroringOfX, _TagComp4);\n\n  function TagComp_RestrictMirroringOfX(initialData) {\n    var _this4;\n\n    _classCallCheck(this, TagComp_RestrictMirroringOfX);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(TagComp_RestrictMirroringOfX).call(this));\n    _this4.blacklistAllMirrorParents = true;\n    _this4.blacklistedMirrorParents = [];\n    CE(_assertThisInitialized(_assertThisInitialized(_this4))).VSet(initialData);\n    return _this4;\n  }\n\n  return TagComp_RestrictMirroringOfX;\n}(TagComp);\nTagComp_RestrictMirroringOfX.displayName = \"restrict mirroring of X\";\nTagComp_RestrictMirroringOfX.description = \"Restricts mirroring of node X, by blacklisting certain mirror-parents, or mirror-parents in general.\";\nTagComp_RestrictMirroringOfX.nodeKeys = [\"nodeX\", \"blacklistedMirrorParents\"];\nAddSchema(\"TagComp_RestrictMirroringOfX\", {\n  properties: {\n    nodeX: {\n      $ref: \"UUID\"\n    },\n    blacklistAllMirrorParents: {\n      type: \"boolean\"\n    },\n    blacklistedMirrorParents: {\n      items: {\n        $ref: \"UUID\"\n      }\n    }\n  }\n}); // tag comp meta\n// ==========\n\nexport var TagComp_classes = [TagComp_MirrorChildrenFromXToY, TagComp_XIsExtendedByY, TagComp_MutuallyExclusiveGroup, TagComp_RestrictMirroringOfX];\nCalculateTagCompClassStatics();\nexport var TagComp_keys = TagComp_classes.map(function (c) {\n  return c.key;\n});\nexport var TagComp_names = TagComp_classes.map(function (c) {\n  return c.displayName;\n}); // use class-names to calculate keys and display-names\n\nfunction CalculateTagCompClassStatics() {\n  var _a, _b;\n\n  for (var _i = 0, _TagComp_classes = TagComp_classes; _i < _TagComp_classes.length; _i++) {\n    var compClass = _TagComp_classes[_i];\n    compClass.key = (_a = compClass.key, _a !== null && _a !== void 0 ? _a : CalculateTagCompKey(compClass.name));\n    compClass.displayName = (_b = compClass.displayName, _b !== null && _b !== void 0 ? _b : CalculateTagCompDisplayName(compClass.name));\n  }\n}\n\nexport function CalculateTagCompKey(className) {\n  //return GetSchemaJSON(\"MapNodeTag\").properties.Pairs().find(a=>a.value.$ref == className).key;\n  var displayName = className.replace(/TagComp_/, \"\");\n  displayName = ModifyString(displayName, function (m) {\n    return [m.startUpper_to_lower];\n  });\n  return displayName;\n}\nexport function GetTagCompClassByKey(key) {\n  return TagComp_classes.find(function (a) {\n    return a.key == key;\n  });\n}\nexport function CalculateTagCompDisplayName(className) {\n  var autoSlotNames = [\"x\", \"y\", \"z\"];\n  var displayName = className.replace(/TagComp_/, \"\");\n  displayName = ModifyString(displayName, function (m) {\n    return [m.startUpper_to_lower, m.lowerUpper_to_lowerSpaceLower];\n  });\n\n  for (var _i2 = 0, _autoSlotNames = autoSlotNames; _i2 < _autoSlotNames.length; _i2++) {\n    var slotName = _autoSlotNames[_i2];\n    displayName = displayName.replace(new RegExp(\"(^| )\".concat(slotName, \"( |$)\")), slotName.toUpperCase());\n  }\n\n  return displayName;\n}\nexport function GetTagCompClassByDisplayName(displayName) {\n  return TagComp_classes.find(function (a) {\n    return a.displayName == displayName;\n  });\n}\nexport function GetTagCompClassByTag(tag) {\n  return TagComp_classes.find(function (a) {\n    return a.key in tag;\n  });\n}\nexport function GetTagCompOfTag(tag) {\n  var compClass = GetTagCompClassByTag(tag);\n  return tag[compClass.key];\n}\n/*export type MapNodeTagType = typeof TagComp_classes[number];\r\nexport const MapNodeTagType_values = [\"mirror children from X to Y\"] as const; //, \"example-based claim\", \"X extends Y\"];\r\n//AddSchema(\"MapNodeTagType\", {oneOf: MapNodeTagType_values.map(val=>({const: val}))});\r\nexport const MapNodeTagType_keys = MapNodeTagType_values.map(type=>ConvertNodeTagTypeToKey(type));\r\nexport function ConvertNodeTagTypeToKey(type: MapNodeTagType) {\r\n    return ModifyString(type, m=>[m.spaceLower_to_spaceUpper, m.removeSpaces, m.hyphenLower_to_hyphenUpper, m.removeHyphens]);\r\n}\r\nexport function GetNodeTagKey(tag: MapNodeTag) {\r\n    return MapNodeTagType_keys.find(key=>key in tag);\r\n}\r\nexport function GetNodeTagType(tag: MapNodeTag) {\r\n    const compKeyIndex = MapNodeTagType_keys.findIndex(key=>key in tag);\r\n    return MapNodeTagType_values[compKeyIndex];\r\n}*/\n\nexport function CalculateNodeIDsForTagComp(tagComp, compClass) {\n  /*let compClass = GetTagCompClassByTag(tag);\r\n  let comp = GetTagCompOfTag(tag);*/\n  //let compClass = GetTagCompClassByKey(tagComp[\"_key\"]);\n  return CE(compClass.nodeKeys).SelectMany(function (key) {\n    var nodeKeyValue = tagComp[key];\n    var nodeIDsForKey = Array.isArray(nodeKeyValue) ? nodeKeyValue : [nodeKeyValue];\n    return nodeIDsForKey.filter(function (nodeID) {\n      return Validate(\"UUID\", nodeID) == null;\n    });\n  });\n}","import { WhereOp, GetDoc, GetDocs, StoreAccessor } from \"mobx-firelink\";\nimport { emptyArray_forLoading, CE } from \"js-vextensions\";\nimport { GetTagCompClassByTag, GetTagCompOfTag } from \"./nodeTags/@MapNodeTag\"; // todo: add and use some sort of system where mobx-firelink auto-reattaches data to their classes, based on AJV metadata\n\nexport var GetNodeTags = StoreAccessor(function (s) {\n  return function (nodeID) {\n    return GetDocs({\n      //queryOps: [new WhereOp(`nodes.${nodeID}`, \">\", \"\")], // `if value > \"\"` means \"if key exists\"\n      queryOps: [new WhereOp(\"nodes\", \"array-contains\", nodeID)]\n    }, function (a) {\n      return a.nodeTags;\n    });\n  };\n});\nexport var GetNodeTag = StoreAccessor(function (s) {\n  return function (tagID) {\n    return GetDoc({}, function (a) {\n      return a.nodeTags.get(tagID);\n    });\n  };\n});\nexport var GetNodeTagComps = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var unwrapCompositeTags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var tagsToIgnore = arguments.length > 2 ? arguments[2] : undefined;\n    var tags = GetNodeTags(nodeID);\n    if (tags == emptyArray_forLoading) return emptyArray_forLoading;\n    return CE(tags).SelectMany(function (tag) {\n      var _a;\n\n      if ((_a = tagsToIgnore) === null || _a === void 0 ? void 0 : _a.includes(tag._key)) return [];\n      var baseComp = GetTagCompOfTag(tag);\n      return unwrapCompositeTags ? GetFinalTagCompsForTag(tag) : [baseComp];\n    });\n  };\n});\nexport var GetFinalTagCompsForTag = StoreAccessor(function (s) {\n  return function (tag) {\n    var compClass = GetTagCompClassByTag(tag);\n    var comp = GetTagCompOfTag(tag); //return comp.As(compClass).GetFinalTagComps();\n\n    return compClass.prototype.GetFinalTagComps.call(comp);\n  };\n});","import { Assert, IsString } from \"js-vextensions\";\nimport { StoreAccessor } from \"mobx-firelink\";\nimport { GetMap } from \"../maps\";\nimport { GetNodeL2 } from \"../nodes/$node\";\nimport { AccessLevel } from \"../nodes/@MapNode\";\nimport { PermissionInfoType } from \"../nodes/@MapNodeRevision\";\nimport { GetUser } from \"../users\"; // permissions\n// ==========\n\n/*export const GetUserJoinDate = StoreAccessor(s=>(userID: string): number=>{\r\n    return GetUser(userID)?.joinDate;\r\n});*/\n\nvar defaultPermissions = {\n  basic: true,\n  verified: true,\n  mod: false,\n  admin: false\n}; // temp\n\nexport var GetUserPermissionGroups = StoreAccessor(function (s) {\n  return function (userID) {\n    var _a, _b;\n\n    if (userID == null) return null;\n    return _b = (_a = GetUser(userID)) === null || _a === void 0 ? void 0 : _a.permissionGroups, _b !== null && _b !== void 0 ? _b : defaultPermissions;\n  };\n});\nexport function GetUserAccessLevel(userID) {\n  var groups = GetUserPermissionGroups(userID);\n  if (groups == null) return AccessLevel.Basic;\n  if (groups.admin) return AccessLevel.Admin;\n  if (groups.mod) return AccessLevel.Mod;\n  if (groups.verified) return AccessLevel.Verified; // if (groups.basic) return AccessLevel.Basic;\n\n  Assert(false);\n}\nexport var CanGetBasicPermissions = StoreAccessor(function (s) {\n  return function (userIDOrPermissions) {\n    // if (true) return HasModPermissions(userIDOrPermissions); // temp; will be removed once GAD is over\n    var permissions = IsString(userIDOrPermissions) ? GetUserPermissionGroups(userIDOrPermissions) : userIDOrPermissions;\n    return permissions == null || permissions.basic; // if anon/not-logged-in, assume user can get basic permissions once logged in\n  };\n});\nexport var HasBasicPermissions = StoreAccessor(function (s) {\n  return function (userIDOrPermissions) {\n    // if (true) return HasModPermissions(userIDOrPermissions); // temp; will be removed once GAD is over\n    var permissions = IsString(userIDOrPermissions) ? GetUserPermissionGroups(userIDOrPermissions) : userIDOrPermissions;\n    return permissions ? permissions.basic : false;\n  };\n});\nexport var HasModPermissions = StoreAccessor(function (s) {\n  return function (userIDOrPermissions) {\n    var permissions = IsString(userIDOrPermissions) ? GetUserPermissionGroups(userIDOrPermissions) : userIDOrPermissions;\n    return permissions ? permissions.mod : false;\n  };\n});\nexport var HasAdminPermissions = StoreAccessor(function (s) {\n  return function (userIDOrPermissions) {\n    var permissions = IsString(userIDOrPermissions) ? GetUserPermissionGroups(userIDOrPermissions) : userIDOrPermissions;\n    return permissions ? permissions.admin : false;\n  };\n});\n/** If user is the creator, also requires that they (still) have basic permissions. */\n//export const IsUserCreatorOrMod = StoreAccessor(s=>(userID: string, entity: Term | Image | Map | MapNode | MapNodePhrasing | Timeline /* | Post | Thread */)=>{\n\nexport var IsUserCreatorOrMod = StoreAccessor(function (s) {\n  return function (userID, entity) {\n    return entity && entity.creator === userID && HasBasicPermissions(userID) || HasModPermissions(userID);\n  };\n});\nexport var CanEditNode = StoreAccessor(function (s) {\n  return function (userID, nodeID) {\n    var _a, _b, _c, _d; // mods and admins can always edit\n\n\n    if (HasModPermissions(userID) || HasAdminPermissions(userID)) {\n      return true;\n    }\n    /* let user = GetUser(userID);\r\n    if (user == null) return false; */\n\n\n    var node = GetNodeL2(nodeID);\n    if (node == null) return false;\n    var revision = node.current; // probably temp\n\n    var editPerm = (_a = revision.permission_edit, _a !== null && _a !== void 0 ? _a : {\n      type: PermissionInfoType.Anyone\n    });\n\n    if (editPerm.type == PermissionInfoType.Anyone) {\n      return CanGetBasicPermissions(userID);\n    }\n\n    if (editPerm.type == PermissionInfoType.Creator) {\n      return revision.creator == userID;\n    }\n\n    if (editPerm.type == PermissionInfoType.MapEditors) {\n      if (revision.creator == userID) return true; // node-creator can always edit\n\n      var map = GetMap(node.ownerMapID);\n      return _d = (_c = (_b = map) === null || _b === void 0 ? void 0 : _b.editorIDs) === null || _c === void 0 ? void 0 : _c.includes(userID), _d !== null && _d !== void 0 ? _d : false;\n    }\n\n    Assert(false, \"Invalid permission-info-type.\");\n  };\n});\nexport var CanContributeToNode = StoreAccessor(function (s) {\n  return function (userID, nodeID) {\n    var _a, _b, _c, _d; // mods and admins can always contribute\n\n\n    if (HasModPermissions(userID) || HasAdminPermissions(userID)) {\n      return true;\n    }\n    /* let user = GetUser(userID);\r\n    if (user == null) return false; */\n\n\n    var node = GetNodeL2(nodeID);\n    if (node == null) return false;\n    var revision = node.current; // probably temp\n\n    var contributePerm = (_a = revision.permission_contribute, _a !== null && _a !== void 0 ? _a : {\n      type: PermissionInfoType.Anyone\n    });\n\n    if (contributePerm.type == PermissionInfoType.Anyone) {\n      return CanGetBasicPermissions(userID);\n    }\n\n    if (contributePerm.type == PermissionInfoType.Creator) {\n      return revision.creator == userID;\n    }\n\n    if (contributePerm.type == PermissionInfoType.MapEditors) {\n      if (revision.creator == userID) return true; // node-creator can always contribute\n\n      var map = GetMap(node.ownerMapID);\n      return _d = (_c = (_b = map) === null || _b === void 0 ? void 0 : _b.editorIDs) === null || _c === void 0 ? void 0 : _c.includes(userID), _d !== null && _d !== void 0 ? _d : false;\n    }\n\n    Assert(false, \"Invalid permission-info-type.\");\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { Assert, GetValues, IsString, VURL, E, Clone, CE } from \"js-vextensions\";\nimport { SplitStringBySlash_Cached, SlicePath, StoreAccessor } from \"mobx-firelink\";\nimport { GetImage } from \"../images\";\nimport { GetNiceNameForImageType } from \"../images/@Image\";\nimport { GetNodeRevision } from \"../nodeRevisions\";\nimport { ForLink_GetError, ForNewLink_GetError, GetNode, GetNodeChildrenL2, GetNodeID, GetParentNode, GetParentNodeL2, IsNodeSubnode, GetNodeChildrenL3 } from \"../nodes\";\nimport { ClaimForm, Polarity } from \"./@MapNode\";\nimport { TitleKey_values } from \"./@MapNodeRevision\";\nimport { MapNodeType } from \"./@MapNodeType\";\nimport { GetNodeTags, GetFinalTagCompsForTag } from \"../nodeTags\";\nimport { CanContributeToNode } from \"../users/$user\";\nimport { TagComp_MirrorChildrenFromXToY } from \"../nodeTags/@MapNodeTag\";\nexport function PreProcessLatex(text) {\n  // text = text.replace(/\\\\term{/g, \"\\\\text{\");\n  // \"\\term{some-term}{123}\" -> \"\\text{@term[some-term,123]}\n  //text = text.replace(/\\\\term{(.+?)}{([A-Za-z0-9_-]+?)}/g, (m, g1, g2)=>`\\\\text{@term[${g1},${g2}]}`);\n  // \"\\term{some-term}\" -> \"\\text{@term[some-term]}\n  text = text.replace(/\\\\term{(.+?)}/g, function (m, g1, g2) {\n    return \"\\\\text{@term[\".concat(g1, \"]}\");\n  });\n  text = text.replace(/\\\\term/g, function () {\n    return \"[syntax wrong]\";\n  }); // for user syntax mistakes, keep from causing error\n\n  return text;\n}\nexport function GetFontSizeForNode(node) {\n  var isSubnode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (node.current.fontSizeOverride) return node.current.fontSizeOverride;\n  if (node.current.equation) return node.current.equation.latex ? 14 : 13;\n  if (isSubnode) return 11;\n  return 14;\n}\nexport function GetPaddingForNode(node) {\n  var isSubnode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return isSubnode ? \"1px 4px 2px\" : \"5px 5px 4px\";\n}\nexport function GetRatingTypesForNode(node) {\n  if (node.type == MapNodeType.Category) {\n    if (node.current.votingDisabled) return [];\n    return [{\n      type: \"significance\",\n      main: true\n    }];\n  }\n\n  if (node.type == MapNodeType.Package) {\n    return [{\n      type: \"significance\",\n      main: true\n    }];\n  }\n\n  if (node.type == MapNodeType.MultiChoiceQuestion) {\n    return [{\n      type: \"significance\",\n      main: true\n    }];\n  }\n\n  if (node.type == MapNodeType.Claim) {\n    var result; // result = [{type: \"truth\", main: true}]; //, {type: \"significance\", main: true}];\n\n    result = [{\n      type: \"truth\",\n      main: true\n    }]; // , {type: \"relevance\", main: true}];\n\n    /* if ((node as MapNodeL2).link && (node as MapNodeL2).link.form == ClaimForm.YesNoQuestion) {\r\n        result.Remove(result.First(a=>a.type == \"significance\"));\r\n        result.Insert(0, {type: \"significance\", main: true});\r\n    } */\n\n    return result;\n  }\n\n  if (node.type == MapNodeType.Argument) {\n    // return [{type: \"strength\", main: true}, {type: \"impact\", main: true}];\n    return [{\n      type: \"relevance\"\n    }, {\n      type: \"impact\",\n      main: true\n    }];\n  }\n\n  Assert(false);\n}\nexport var GetMainRatingType = StoreAccessor(function (s) {\n  return function (node) {\n    return CE(GetRatingTypesForNode(node)).FirstOrX(function (a) {\n      return a.main;\n    }, {}).type;\n  };\n});\nexport function GetSortByRatingType(node) {\n  if (node.link && node.link.form == ClaimForm.YesNoQuestion) {\n    return \"significance\";\n  }\n\n  return GetMainRatingType(node);\n}\nexport function ReversePolarity(polarity) {\n  return polarity == Polarity.Supporting ? Polarity.Opposing : Polarity.Supporting;\n}\nexport var GetDisplayPolarityAtPath = StoreAccessor(function (s) {\n  return function (node, path, tagsToIgnore) {\n    Assert(node.type == MapNodeType.Argument, \"Only argument nodes have polarity.\");\n    var parent = GetParentNodeL2(path);\n    if (!parent) return Polarity.Supporting; // can be null, if for NodeUI_ForBots\n\n    var link = GetLinkUnderParent(node._key, parent, true, tagsToIgnore);\n    if (link == null) return Polarity.Supporting; // can be null, if path is invalid (eg. copied-node path)\n\n    Assert(link.polarity != null, \"The link for the argument #\".concat(node._key, \" (from parent #\").concat(parent._key, \") must specify the polarity.\"));\n    var parentForm = GetNodeForm(parent, SplitStringBySlash_Cached(path).slice(0, -1).join(\"/\"));\n    return GetDisplayPolarity(link.polarity, parentForm);\n  };\n});\nexport function GetDisplayPolarity(basePolarity, parentForm) {\n  var result = basePolarity;\n\n  if (parentForm == ClaimForm.Negation) {\n    result = ReversePolarity(result);\n  }\n\n  return result;\n}\nexport function IsNodeL1(node) {\n  return !node[\"current\"];\n}\nexport function AsNodeL1(node) {\n  var result = E(node);\n  delete result.current;\n  delete result[\"displayPolarity\"];\n  delete result[\"link\"];\n  return result;\n}\nexport function IsNodeL2(node) {\n  return node[\"current\"];\n}\nexport function AsNodeL2(node, currentRevision) {\n  // Assert(currentRevision.titles, \"A MapNodeRevision object must have a titles property!\"); // temp removed (for db-upgrade)\n  var result = E(node, {\n    current: currentRevision\n  });\n  delete result[\"displayPolarity\"];\n  delete result[\"link\"];\n  return result;\n}\nexport var GetNodeL2 = StoreAccessor(function (s) {\n  return function (nodeID, path) {\n    if (IsString(nodeID)) nodeID = GetNode(nodeID);\n    if (nodeID == null) return null;\n    var node = nodeID; // if any of the data in a MapNodeL2 is not loaded yet, just return null (we want it to be all or nothing)\n\n    var currentRevision = GetNodeRevision(node.currentRevision);\n    if (currentRevision === undefined) return undefined;\n    var nodeL2 = AsNodeL2(node, currentRevision); //return CachedTransform(\"GetNodeL2\", [path], nodeL2, ()=>nodeL2);\n\n    return nodeL2;\n  };\n});\nexport function IsNodeL3(node) {\n  return node[\"displayPolarity\"] && node[\"link\"];\n}\nexport function AsNodeL3(node, displayPolarity, link) {\n  displayPolarity = displayPolarity || Polarity.Supporting;\n  link = link || {\n    _: true,\n    form: ClaimForm.Base,\n    seriesAnchor: false,\n    polarity: Polarity.Supporting\n  };\n  return E(node, {\n    displayPolarity: displayPolarity,\n    link: link\n  });\n}\nexport var GetNodeL3 = StoreAccessor(function (s) {\n  return function (path, tagsToIgnore) {\n    if (path == null) return null;\n    var nodeID = GetNodeID(path);\n    var node = GetNodeL2(nodeID);\n    if (node == null) return null; // if any of the data in a MapNodeL3 is not loaded yet, just return null (we want it to be all or nothing)\n\n    var displayPolarity = null;\n\n    if (node.type == MapNodeType.Argument) {\n      displayPolarity = GetDisplayPolarityAtPath(node, path, tagsToIgnore);\n      if (displayPolarity == null) return null;\n    }\n\n    var isSubnode = IsNodeSubnode(node);\n\n    if (!isSubnode) {\n      var parent = GetParentNode(path);\n      if (parent == null && path.includes(\"/\")) return null;\n      var link = GetLinkUnderParent(node._key, parent, true, tagsToIgnore);\n      if (link == null && path.includes(\"/\")) return null;\n    }\n\n    var nodeL3 = AsNodeL3(node, displayPolarity, link); // return CachedTransform('GetNodeL3', [path], nodeL3, () => nodeL3);\n\n    return nodeL3;\n  };\n});\n/* export function GetNodeForm(node: MapNode, path: string): ClaimForm {\r\n    let parent = GetParentNode(path);\r\n    return GetNodeForm(node, parent);\r\n}\r\nexport function GetClaimFormUnderParent(node: MapNode, parent: MapNode): ClaimForm {\r\n    let link = GetLinkUnderParent(node._id, parent);\r\n    if (link == null) return ClaimForm.Base;\r\n    return link.form;\r\n} */\n\nexport var GetNodeForm = StoreAccessor(function (s) {\n  return function (node, pathOrParent) {\n    if (IsNodeL3(node)) {\n      return node.link.form;\n    }\n\n    var parent = IsString(pathOrParent) ? GetParentNodeL2(pathOrParent) : pathOrParent;\n    var link = GetLinkUnderParent(node._key, parent);\n    if (link == null) return ClaimForm.Base;\n    return link.form;\n  };\n});\nexport var GetLinkUnderParent = StoreAccessor(function (s) {\n  return function (nodeID, parent) {\n    var includeMirrorLinks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var tagsToIgnore = arguments.length > 3 ? arguments[3] : undefined;\n\n    var _a;\n\n    if (parent == null) return null;\n    var link = (_a = parent.children) === null || _a === void 0 ? void 0 : _a[nodeID]; // null-check, since after child-delete, parent-data might have updated before child-data removed\n\n    if (includeMirrorLinks && link == null) {\n      var tags = GetNodeTags(parent._key).filter(function (tag) {\n        var _a;\n\n        return tag && !((_a = tagsToIgnore) === null || _a === void 0 ? void 0 : _a.includes(tag._key));\n      });\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = tags[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var tag = _step.value;\n          //let tagComps = GetNodeTagComps(parent._key);\n          var tagComps = GetFinalTagCompsForTag(tag);\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            var _loop = function _loop() {\n              var comp = _step2.value;\n\n              if (comp instanceof TagComp_MirrorChildrenFromXToY && comp.nodeY == parent._key) {\n                var mirrorChildren = GetNodeChildrenL3(comp.nodeX, undefined, undefined, (tagsToIgnore !== null && tagsToIgnore !== void 0 ? tagsToIgnore : []).concat(tag._key));\n                mirrorChildren = mirrorChildren.filter(function (child) {\n                  return child && (child.link.polarity == Polarity.Supporting && comp.mirrorSupporting || child.link.polarity == Polarity.Opposing && comp.mirrorOpposing);\n                });\n                var nodeL3ForNodeAsMirrorChildInThisTag = mirrorChildren.find(function (a) {\n                  return a._key == nodeID;\n                }); //const nodeL3ForNodeAsMirrorChildInThisTag = GetNodeL3(`${comp.nodeX}/${nodeID}`);\n\n                if (nodeL3ForNodeAsMirrorChildInThisTag) {\n                  link = Clone(nodeL3ForNodeAsMirrorChildInThisTag.link);\n                  Object.defineProperty(link, \"_mirrorLink\", {\n                    value: true\n                  });\n\n                  if (comp.reversePolarities) {\n                    link.polarity = ReversePolarity(link.polarity);\n                  }\n                }\n              }\n            };\n\n            for (var _iterator2 = tagComps[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              _loop();\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n\n    return link;\n  };\n});\nexport function GetLinkAtPath(path) {\n  var nodeID = GetNodeID(path);\n  var parent = GetNode(GetNodeID(SlicePath(path, 1)));\n  return GetLinkUnderParent(nodeID, parent);\n}\nexport var NodeContributionInfo = function NodeContributionInfo(nodeID) {\n  _classCallCheck(this, NodeContributionInfo);\n\n  this.proArgs = new NodeContributionInfo_ForPolarity(nodeID);\n  this.conArgs = new NodeContributionInfo_ForPolarity(nodeID);\n};\nexport var NodeContributionInfo_ForPolarity = function NodeContributionInfo_ForPolarity(nodeID) {\n  _classCallCheck(this, NodeContributionInfo_ForPolarity);\n\n  this.canAdd = true;\n  this.reversePolarities = false;\n  this.hostNodeID = nodeID;\n};\nexport function GetPolarityShortStr(polarity) {\n  return polarity == Polarity.Supporting ? \"pro\" : \"con\";\n}\nexport var GetNodeContributionInfo = StoreAccessor(function (s) {\n  return function (nodeID, userID) {\n    var result = new NodeContributionInfo(nodeID);\n    var tags = GetNodeTags(nodeID);\n    var directChildrenDisabled = CE(tags).Any(function (a) {\n      var _a, _b;\n\n      return ((_a = a.mirrorChildrenFromXToY) === null || _a === void 0 ? void 0 : _a.nodeY) == nodeID && ((_b = a.mirrorChildrenFromXToY) === null || _b === void 0 ? void 0 : _b.disableDirectChildren);\n    });\n\n    if (directChildrenDisabled) {\n      result.proArgs.canAdd = false;\n      result.conArgs.canAdd = false;\n    }\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = tags[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var tag = _step3.value;\n\n        if (tag.mirrorChildrenFromXToY && tag.mirrorChildrenFromXToY.nodeY == nodeID) {\n          var comp = tag.mirrorChildrenFromXToY;\n          var addForPolarities_short = [];\n          if (comp.mirrorSupporting) addForPolarities_short.push(comp.reversePolarities ? \"con\" : \"pro\");\n          if (comp.mirrorOpposing) addForPolarities_short.push(comp.reversePolarities ? \"pro\" : \"con\");\n\n          for (var _i = 0, _addForPolarities_sho = addForPolarities_short; _i < _addForPolarities_sho.length; _i++) {\n            var polarity_short = _addForPolarities_sho[_i];\n            result[\"\".concat(polarity_short, \"Args\")].canAdd = true;\n            result[\"\".concat(polarity_short, \"Args\")].hostNodeID = comp.nodeX;\n            result[\"\".concat(polarity_short, \"Args\")].reversePolarities = comp.reversePolarities;\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    if (!CanContributeToNode(userID, result.proArgs.hostNodeID)) result.proArgs.canAdd = false;\n    if (!CanContributeToNode(userID, result.conArgs.hostNodeID)) result.conArgs.canAdd = false;\n    return result;\n  };\n});\nexport function IsNodeTitleValid_GetError(node, title) {\n  if (title.trim().length == 0) return \"Title cannot be empty.\";\n  return null;\n}\nexport function GetAllNodeRevisionTitles(nodeRevision) {\n  if (nodeRevision == null || nodeRevision.titles == null) return [];\n  return TitleKey_values.map(function (key) {\n    return nodeRevision.titles[key];\n  }).filter(function (a) {\n    return a != null;\n  });\n}\n/** Gets the main display-text for a node. (doesn't include equation explanation, quote sources, etc.) */\n\nexport var GetNodeDisplayText = StoreAccessor(function (s) {\n  return function (node, path, form) {\n    form = form || GetNodeForm(node, path);\n    var titles = node.current.titles || {}; // if (path && path.split('/').length > 3) throw new Error('Test1'); // for testing node error-boundaries\n\n    if (node.type == MapNodeType.Argument && !node.multiPremiseArgument && !titles.base) {\n      // const baseClaim = GetNodeL2(node.children && node.children.VKeys().length ? node.children.VKeys()[0] : null);\n      // const baseClaim = GetArgumentPremises(node)[0];\n      var baseClaim = GetNodeChildrenL2(node._key).filter(function (a) {\n        return a && a.type == MapNodeType.Claim;\n      })[0];\n      if (baseClaim) return GetNodeDisplayText(baseClaim);\n    }\n\n    if (node.type == MapNodeType.Claim) {\n      if (node.current.equation) {\n        var result = node.current.equation.text; //if (node.current.equation.latex && !isBot) {\n\n        if (node.current.equation.latex && typeof window != \"undefined\" && window[\"katex\"] && window[\"$\"]) {\n          // result = result.replace(/\\\\[^{]+/g, \"\").replace(/[{}]/g, \"\");\n          var latex = PreProcessLatex(result);\n\n          try {\n            var html = window[\"katex\"].renderToString(latex);\n            var dom = window[\"$\"](html).children(\".katex-html\");\n            result = dom.text();\n          } catch (ex) {\n            if (ex.message.startsWith(\"KaTeX parse error: \")) {\n              return ex.message.replace(/^KaTeX/, \"LaTeX\");\n            }\n          }\n        }\n\n        return result;\n      }\n\n      if (node.current.quote) {\n        var firstSource = node.current.quote.sourceChains[0].sources[0]; // if (PROD && firstSource == null) return '(first source is null)'; // defensive\n\n        return \"The statement below was made\".concat( // (as shown)\n        firstSource.name ? \" in \\\"\".concat(firstSource.name, \"\\\"\") : \"\").concat(firstSource.author ? \" by \".concat(firstSource.author) : \"\").concat(firstSource.link ? \" at \\\"\".concat(VURL.Parse(firstSource.link, false).toString({\n          domain_protocol: false\n        }), \"\\\"\") : \"\" // maybe temp\n        , \".\");\n      }\n\n      if (node.current.image) {\n        var image = GetImage(node.current.image.id);\n        if (image == null) return \"...\"; // if (image.sourceChains == null) return `The ${GetNiceNameForImageType(image.type)} below is unmodified.`; // temp\n\n        var _firstSource = image.sourceChains[0].sources[0];\n        return \"The \".concat(GetNiceNameForImageType(image.type), \" below was published\").concat( // (as shown)`\n        _firstSource.name ? \" in \\\"\".concat(_firstSource.name, \"\\\"\") : \"\").concat(_firstSource.author ? \" by \".concat(_firstSource.author) : \"\").concat(_firstSource.link ? \" at \\\"\".concat(VURL.Parse(_firstSource.link, false).toString({\n          domain_protocol: false\n        }), \"\\\"\") : \"\" // maybe temp\n        , \".\");\n      }\n\n      if (form) {\n        if (form == ClaimForm.Negation) return titles.negation || missingTitleStrings[1];\n        if (form == ClaimForm.YesNoQuestion) return titles.yesNoQuestion || missingTitleStrings[2];\n      }\n    }\n\n    return titles.base || missingTitleStrings[0];\n  };\n});\nexport var missingTitleStrings = [\"(base title not set)\", \"(negation title not set)\", \"(question title not set)\"];\nexport function GetValidChildTypes(nodeType, path) {\n  var nodeTypes = GetValues(MapNodeType);\n  var validChildTypes = nodeTypes.filter(function (type) {\n    return ForLink_GetError(nodeType, type) == null;\n  });\n  return validChildTypes;\n}\nexport function GetValidNewChildTypes(parent, holderType, permissions) {\n  var nodeTypes = GetValues(MapNodeType);\n  var validChildTypes = nodeTypes.filter(function (type) {\n    return ForNewLink_GetError(parent._key, {\n      type: type\n    }, permissions, holderType) == null;\n  });\n  return validChildTypes;\n}\n/** Returns whether the node provided is an argument, and marked as single-premise. */\n\nexport var IsSinglePremiseArgument = StoreAccessor(function (s) {\n  return function (node) {\n    /* nodeChildren = nodeChildren || GetNodeChildren(node);\r\n    if (nodeChildren.Any(a=>a == null)) return null;\r\n    //return nodeChildren.Any(child=>IsPremiseOfSinglePremiseArgument(child, node));\r\n    return node.type == MapNodeType.Argument && nodeChildren.filter(a=>a.type == MapNodeType.Claim).length == 1; */\n    return node && node.type == MapNodeType.Argument && !node.multiPremiseArgument;\n  };\n});\n/** Returns whether the node provided is an argument, and marked as multi-premise. */\n\nexport var IsMultiPremiseArgument = StoreAccessor(function (s) {\n  return function (node) {\n    /* nodeChildren = nodeChildren || GetNodeChildren(node);\r\n    if (nodeChildren.Any(a=>a == null)) return null;\r\n    //return node.type == MapNodeType.Argument && !IsSinglePremiseArgument(node, nodeChildren);\r\n    return node.type == MapNodeType.Argument && nodeChildren.filter(a=>a.type == MapNodeType.Claim).length > 1; */\n    return node && node.type == MapNodeType.Argument && node.multiPremiseArgument;\n  };\n});\nexport var IsPremiseOfSinglePremiseArgument = StoreAccessor(function (s) {\n  return function (node, parent) {\n    if (parent == null) return null; // let parentChildren = GetNodeChildrenL2(parent);\n\n    /* if (parentChildren.Any(a=>a == null)) return false;\r\n    return node.type == MapNodeType.Claim && parentChildren.filter(a=>a.type == MapNodeType.Claim).length == 1 && node.link.form != ClaimForm.YesNoQuestion; */\n    //let node = GetNode(nodeID);\n\n    return node.type == MapNodeType.Claim && IsSinglePremiseArgument(parent);\n  };\n});\nexport function IsPremiseOfMultiPremiseArgument(node, parent) {\n  if (parent == null) return null; // let parentChildren = GetNodeChildrenL2(parent);\n  //let node = GetNode(nodeID);\n\n  return node.type == MapNodeType.Claim && IsMultiPremiseArgument(parent);\n}","import _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport { emptyArray, emptyArray_forLoading, IsNaN, CE, Assert } from \"js-vextensions\";\nimport { GetDoc, SlicePath, SplitStringBySlash_Cached, StoreAccessor } from \"mobx-firelink\";\nimport { GetNodeRevisionsByTitle } from \"./nodeRevisions\";\nimport { AsNodeL1, GetNodeL2, GetNodeL3, IsPremiseOfSinglePremiseArgument, IsSinglePremiseArgument } from \"./nodes/$node\";\nimport { globalRootNodeID, MapNode, Polarity } from \"./nodes/@MapNode\";\nimport { MapNodeType, MapNodeType_Info } from \"./nodes/@MapNodeType\";\nimport { GetFinalTagCompsForTag, GetNodeTagComps, GetNodeTags } from \"./nodeTags\";\nimport { TagComp_MirrorChildrenFromXToY, TagComp_RestrictMirroringOfX, TagComp_XIsExtendedByY } from \"./nodeTags/@MapNodeTag\";\nimport { CanGetBasicPermissions, HasAdminPermissions, IsUserCreatorOrMod } from \"./users/$user\";\nexport var HolderType;\n\n(function (HolderType) {\n  HolderType[HolderType[\"Truth\"] = 10] = \"Truth\";\n  HolderType[HolderType[\"Relevance\"] = 20] = \"Relevance\";\n})(HolderType || (HolderType = {}));\n\nexport function PathSegmentToNodeID(segment) {\n  if (segment.length == 22) return segment; // if raw UUID\n\n  if (segment.length == 23) return segment.slice(1); // if UUID, but with marker at front (marking as subnode, I believe)\n\n  Assert(false, \"Segment text is invalid.\");\n}\n/* export type NodeMap = ObservableMap<string, MapNode>;\r\nexport const GetNodeMap = StoreAccessor((s) => (): NodeMap => {\r\n    return GetDocs((a) => a.nodes);\r\n}); */\n\n/* export const GetNodes = StoreAccessor((s) => (): MapNode[] => {\r\n    /* const nodeMap = GetNodeMap();\r\n    return CachedTransform('GetNodes', [], nodeMap, () => (nodeMap ? nodeMap.VValues(true) : [])); *#/\r\n    return GetDocs({}, (a) => a.nodes);\r\n});\r\nexport const GetNodesL2 = StoreAccessor((s) => (): MapNodeL2[] => {\r\n    const nodes = GetNodes();\r\n    return nodes.map((a) => GetNodeL2(a));\r\n}); */\n\n/* export function GetNodes_Enhanced(): MapNode[] {\r\n    let nodeMap = GetNodeMap();\r\n    return CachedTransform(\"GetNodes_Enhanced\", [], nodeMap, ()=>nodeMap ? nodeMap.VValues(true) : []);\r\n} */\n\nexport var GetNodesByIDs = StoreAccessor(function (s) {\n  return function (ids) {\n    var emptyForLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var nodes = ids.map(function (id) {\n      return GetNode(id);\n    });\n    if (emptyForLoading && CE(nodes).Any(function (a) {\n      return a == null;\n    })) return emptyArray_forLoading;\n    return nodes;\n  };\n});\nexport var GetNodesByTitle = StoreAccessor(function (s) {\n  return function (title, titleKey) {\n    var nodeRevisions = GetNodeRevisionsByTitle(title, titleKey);\n    return nodeRevisions.map(function (a) {\n      return GetNode(a.node);\n    });\n  };\n});\nexport var GetNode = StoreAccessor(function (s) {\n  return function (id) {\n    // Assert(id != null && !IsNaN(id), \"Node-id cannot be null or NaN.\");\n    if (id == null || IsNaN(id)) return null;\n    return GetDoc({}, function (a) {\n      return a.nodes.get(id);\n    });\n  };\n});\n/* export async function GetNodeAsync(id: string) {\r\n    return await GetDataAsync(\"nodes\", id) as MapNode;\r\n} */\n\nexport function GetParentCount(node) {\n  return CE(node.parents || {}).VKeys().length;\n}\nexport function GetChildCount(node) {\n  return CE(node.children || {}).VKeys().length;\n}\nexport function IsRootNode(node) {\n  if (IsNodeSubnode(node)) return false;\n  return node.type == MapNodeType.Category && GetParentCount(node) == 0;\n}\nexport function IsNodeSubnode(node) {\n  return node.layerPlusAnchorParents != null;\n}\nexport function GetParentPath(childPath) {\n  var childPathNodes = SplitStringBySlash_Cached(childPath);\n  if (childPathNodes.length == 1) return null;\n  return childPathNodes.slice(0, -1).join(\"/\");\n}\nexport function GetParentNodeID(path) {\n  var pathNodes = SplitStringBySlash_Cached(path);\n  if (CE(pathNodes).Last()[0] == \"*\") return null;\n  var parentNodeStr = CE(pathNodes).XFromLast(1);\n  return parentNodeStr ? PathSegmentToNodeID(parentNodeStr) : null;\n}\nexport var GetParentNode = StoreAccessor(function (s) {\n  return function (childPath) {\n    return GetNode(GetParentNodeID(childPath));\n  };\n});\nexport var GetParentNodeL2 = StoreAccessor(function (s) {\n  return function (childPath) {\n    return GetNodeL2(GetParentNodeID(childPath));\n  };\n});\nexport var GetParentNodeL3 = StoreAccessor(function (s) {\n  return function (childPath) {\n    return GetNodeL3(GetParentPath(childPath));\n  };\n});\nexport var GetNodeID = StoreAccessor(function (s) {\n  return function (path) {\n    var ownNodeStr = CE(SplitStringBySlash_Cached(path)).LastOrX();\n    return ownNodeStr ? PathSegmentToNodeID(ownNodeStr) : null;\n  };\n});\nexport function CleanArray(array) {\n  var emptyArrayIfItemLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (emptyArrayIfItemLoading && CE(array).Any(function (a) {\n    return a === undefined;\n  })) return emptyArray_forLoading;\n  return array;\n}\nexport var GetNodeParents = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var emptyForLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var node = GetNode(nodeID); //return GetNodesByIDs(CE(node.parents || {}).VKeys());\n\n    return CleanArray(CE(node.parents || {}).VKeys().map(function (id) {\n      return GetNode(id);\n    }), emptyForLoading);\n  };\n});\nexport var GetNodeParentsL2 = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var emptyForLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    return CleanArray(GetNodeParents(nodeID).map(function (parent) {\n      return parent ? GetNodeL2(parent) : undefined;\n    }), emptyForLoading);\n  };\n});\nexport var GetNodeParentsL3 = StoreAccessor(function (s) {\n  return function (nodeID, path) {\n    var emptyForLoading = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    return CleanArray(GetNodeParents(nodeID).map(function (parent) {\n      return parent ? GetNodeL3(SlicePath(path, 1)) : undefined;\n    }), emptyForLoading);\n  };\n});\nexport var GetNodeChildren = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var includeMirrorChildren = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var tagsToIgnore = arguments.length > 2 ? arguments[2] : undefined;\n    var emptyForLoading = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var node = GetNode(nodeID);\n    if (node == null) return emptyArray; // special case, for demo map\n\n    if (node.children && node.children[0] instanceof MapNode) {\n      return node.children;\n    }\n\n    var result = CE(node.children || {}).VKeys().map(function (id) {\n      return GetNode(id);\n    });\n\n    if (includeMirrorChildren) {\n      var _result;\n\n      //let tags = GetNodeTags(nodeID);\n      var tagComps = GetNodeTagComps(nodeID, tagsToIgnore); // maybe todo: have disable-direct-children merely stop you from adding new direct children, not hide existing ones\n\n      if (CE(tagComps).Any(function (a) {\n        return a instanceof TagComp_MirrorChildrenFromXToY && a.nodeY == nodeID && a.disableDirectChildren;\n      })) {\n        result = [];\n      }\n\n      var mirrorChildren = GetNodeMirrorChildren(nodeID, tagsToIgnore); // filter out duplicate children\n\n      mirrorChildren = mirrorChildren.filter(function (mirrorChild) {\n        return !CE(result).Any(function (directChild) {\n          return directChild._key == mirrorChild._key;\n        });\n      });\n\n      (_result = result).push.apply(_result, _toConsumableArray(mirrorChildren));\n    }\n\n    return CleanArray(result, emptyForLoading);\n  };\n});\nexport var GetNodeMirrorChildren = StoreAccessor(function (s) {\n  return function (nodeID, tagsToIgnore) {\n    var emptyForLoading = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var tags = GetNodeTags(nodeID).filter(function (tag) {\n      var _a;\n\n      return tag && !((_a = tagsToIgnore) === null || _a === void 0 ? void 0 : _a.includes(tag._key));\n    }); //let tagComps = GetNodeTagComps(nodeID, true, tagsToIgnore);\n\n    var result = [];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      var _loop = function _loop() {\n        var tag = _step.value;\n        var tagComps = GetFinalTagCompsForTag(tag);\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          var _loop2 = function _loop2() {\n            var tagComp = _step2.value;\n\n            if (tagComp instanceof TagComp_MirrorChildrenFromXToY && tagComp.nodeY == nodeID) {\n              var _result2;\n\n              //let comp = tag.mirrorChildrenFromXToY;\n              var mirrorChildrenL3 = GetNodeChildrenL3(tagComp.nodeX, undefined, undefined, (tagsToIgnore !== null && tagsToIgnore !== void 0 ? tagsToIgnore : []).concat(tag._key));\n              mirrorChildrenL3 = mirrorChildrenL3.filter(function (child) {\n                if (child == null) return false;\n                var childTagComps = GetNodeTagComps(child._key, true, (tagsToIgnore !== null && tagsToIgnore !== void 0 ? tagsToIgnore : []).concat(tag._key));\n                if (childTagComps == emptyArray_forLoading) return false; // don't include child until we're sure it's allowed to be mirrored\n\n                var mirroringBlacklisted = CE(childTagComps).Any(function (comp) {\n                  var _a;\n\n                  if (!(comp instanceof TagComp_RestrictMirroringOfX)) return false;\n                  return comp.blacklistAllMirrorParents || ((_a = comp.blacklistedMirrorParents) === null || _a === void 0 ? void 0 : _a.includes(nodeID));\n                });\n                if (mirroringBlacklisted) return false;\n                return child.link.polarity == Polarity.Supporting && tagComp.mirrorSupporting || child.link.polarity == Polarity.Opposing && tagComp.mirrorOpposing;\n              });\n              /*if (comp.reversePolarities) {\r\n                  mirrorChildren = mirrorChildren.map(child=> {\r\n                      let newChild = child;\r\n                      if (child.link.polarity) {\r\n                          newChild = Clone(child).VSet({_key: child._key}) as MapNodeL3;\r\n                          newChild.link.polarity = ReversePolarity(newChild.link.polarity);\r\n                      }\r\n                      return newChild;\r\n                  });\r\n              }*/\n\n              var mirrorChildrenL1 = mirrorChildrenL3.map(function (childL3) {\n                return AsNodeL1(childL3);\n              });\n\n              (_result2 = result).push.apply(_result2, _toConsumableArray(mirrorChildrenL1));\n            }\n          };\n\n          for (var _iterator2 = tagComps[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            _loop2();\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      };\n\n      for (var _iterator = tags[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        _loop();\n      } // exclude any mirror-child which is an extension of (ie. wider/weaker than) another child (that is, if it's the Y of an \"X is extended by Y\" tag, between children) \n\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    result = result.filter(function (child) {\n      var childTagComps = GetNodeTagComps(child._key, true, tagsToIgnore);\n      var extensionOfAnotherMirrorChild = CE(childTagComps).Any(function (comp) {\n        if (!(comp instanceof TagComp_XIsExtendedByY)) return false;\n        var childIsNodeY = comp.nodeY == child._key;\n        if (!childIsNodeY) return false;\n        var nodeDirectChildren = GetNodeChildren(nodeID, false);\n        var otherChildIsNodeX = CE(nodeDirectChildren.concat(result)).Any(function (otherChild) {\n          return comp.nodeX == otherChild._key;\n        });\n        return otherChildIsNodeX;\n      });\n      if (extensionOfAnotherMirrorChild) return false;\n\n      if (IsSinglePremiseArgument(child)) {\n        var childPremise = GetPremiseOfSinglePremiseArgument(child._key);\n\n        if (childPremise) {\n          var childPremiseTagComps = GetNodeTagComps(childPremise._key, true, tagsToIgnore);\n          var premiseIsExtensionOfAnotherMirrorChildPremise = CE(childPremiseTagComps).Any(function (comp) {\n            if (!(comp instanceof TagComp_XIsExtendedByY)) return false;\n            var childPremiseIsNodeY = comp.nodeY == childPremise._key;\n            if (!childPremiseIsNodeY) return false;\n            var nodeDirectChildren = GetNodeChildren(nodeID, false);\n            var otherChildPremiseIsNodeX = CE(nodeDirectChildren.concat(result)).Any(function (otherChild) {\n              var _a;\n\n              return IsSinglePremiseArgument(otherChild) && comp.nodeX == ((_a = GetPremiseOfSinglePremiseArgument(otherChild._key)) === null || _a === void 0 ? void 0 : _a._key);\n            });\n            return otherChildPremiseIsNodeX;\n          });\n          if (premiseIsExtensionOfAnotherMirrorChildPremise) return false;\n        }\n      }\n\n      return true;\n    }); // filter out duplicate children\n\n    result = result.filter(function (node, index) {\n      var earlierNodes = result.slice(0, index);\n      return !CE(earlierNodes).Any(function (a) {\n        return a._key == node._key;\n      });\n    });\n    return CleanArray(result, emptyForLoading);\n  };\n});\nexport var GetNodeChildrenL2 = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var includeMirrorChildren = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var tagsToIgnore = arguments.length > 2 ? arguments[2] : undefined;\n    var emptyForLoading = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var nodeChildren = GetNodeChildren(nodeID, includeMirrorChildren, tagsToIgnore);\n    var nodeChildrenL2 = nodeChildren.map(function (child) {\n      return child ? GetNodeL2(child) : undefined;\n    });\n    return CleanArray(nodeChildrenL2, emptyForLoading);\n  };\n});\nexport var GetNodeChildrenL3 = StoreAccessor(function (s) {\n  return function (nodeID, path) {\n    var includeMirrorChildren = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var tagsToIgnore = arguments.length > 3 ? arguments[3] : undefined;\n    var emptyForLoading = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    path = path || nodeID;\n    var nodeChildrenL2 = GetNodeChildrenL2(nodeID, includeMirrorChildren, tagsToIgnore);\n    var nodeChildrenL3 = nodeChildrenL2.map(function (child) {\n      return child ? GetNodeL3(\"\".concat(path, \"/\").concat(child._key), tagsToIgnore) : undefined;\n    });\n    return CleanArray(nodeChildrenL3, emptyForLoading);\n  };\n});\nexport var GetPremiseOfSinglePremiseArgument = StoreAccessor(function (s) {\n  return function (argumentNodeID) {\n    var argument = GetNode(argumentNodeID);\n    var children = GetNodeChildren(argumentNodeID, false);\n    var childPremise = children.find(function (child) {\n      return child && IsPremiseOfSinglePremiseArgument(child, argument);\n    });\n    return childPremise;\n  };\n});\nexport function GetHolderType(childType, parentType) {\n  if (parentType == MapNodeType.Argument) {\n    if (childType == MapNodeType.Argument) return HolderType.Relevance;\n  } else if (parentType == MapNodeType.Claim) {\n    if (childType == MapNodeType.Argument) return HolderType.Truth;\n  }\n\n  return null;\n}\nexport var ForLink_GetError = StoreAccessor(function (s) {\n  return function (parentType, childType) {\n    var _a;\n\n    var parentTypeInfo = MapNodeType_Info.for[parentType].childTypes;\n    if (!((_a = parentTypeInfo) === null || _a === void 0 ? void 0 : _a.includes(childType))) return \"The child's type (\".concat(MapNodeType[childType], \") is not valid for the parent's type (\").concat(MapNodeType[parentType], \").\");\n  };\n});\nexport var ForNewLink_GetError = StoreAccessor(function (s) {\n  return function (parentID, newChild, permissions, newHolderType) {\n    if (!CanGetBasicPermissions(permissions)) return \"You're not signed in, or lack basic permissions.\";\n    var parent = GetNode(parentID);\n    if (parent == null) return \"Parent data not found.\"; // const parentPathIDs = SplitStringBySlash_Cached(parentPath).map(a => a.ToInt());\n    // if (map.name == \"Global\" && parentPathIDs.length == 1) return false; // if parent is l1(root), don't accept new children\n\n    if (parent._key == globalRootNodeID && !HasAdminPermissions(permissions)) return \"Only admins can add children to the global-root.\"; // if in global map, parent is l2, and user is not a mod (and not node creator), don't accept new children\n    // if (parentPathIDs[0] == globalRootNodeID && parentPathIDs.length == 2 && !HasModPermissions(permissions) && parent.creator != MeID()) return false;\n\n    if (parent._key == newChild._key) return \"Cannot link node as its own child.\";\n    var isAlreadyChild = CE(parent.children || {}).VKeys().includes(\"\".concat(newChild._key)); // if new-holder-type is not specified, consider \"any\" and so don't check\n\n    if (newHolderType !== undefined) {\n      var currentHolderType = GetHolderType(newChild.type, parent.type);\n      if (isAlreadyChild && currentHolderType == newHolderType) return false; // if already a child of this parent, reject (unless it's a claim, in which case allow, as can be)\n    }\n\n    return ForLink_GetError(parent.type, newChild.type);\n  };\n});\nexport var ForDelete_GetError = StoreAccessor(function (s) {\n  return function (userID, node, subcommandInfo) {\n    var _CE, _CE2;\n\n    var _a, _b, _c, _d, _e;\n\n    var baseText = \"Cannot delete node #\".concat(node._key, \", since \");\n    if (!IsUserCreatorOrMod(userID, node)) return \"\".concat(baseText, \"you are not the owner of this node. (or a mod)\");\n    if ((_CE = CE(CE(node.parents || {}).VKeys())).Except.apply(_CE, _toConsumableArray((_b = (_a = subcommandInfo) === null || _a === void 0 ? void 0 : _a.parentsToIgnore, _b !== null && _b !== void 0 ? _b : []))).length > 1) return \"\".concat(baseText, \"it has more than one parent. Try unlinking it instead.\");\n    if (IsRootNode(node) && !((_c = subcommandInfo) === null || _c === void 0 ? void 0 : _c.asPartOfMapDelete)) return \"\".concat(baseText, \"it's the root-node of a map.\");\n    var nodeChildren = GetNodeChildrenL2(node._key);\n    if (CE(nodeChildren).Any(function (a) {\n      return a == null;\n    })) return \"[still loading children...]\";\n\n    if ((_CE2 = CE(nodeChildren.map(function (a) {\n      return a._key;\n    }))).Except.apply(_CE2, _toConsumableArray((_e = (_d = subcommandInfo) === null || _d === void 0 ? void 0 : _d.childrenToIgnore, _e !== null && _e !== void 0 ? _e : []))).length) {\n      return \"Cannot delete this node (#\".concat(node._key, \") until all its children have been unlinked or deleted.\");\n    }\n\n    return null;\n  };\n});\nexport var ForCut_GetError = StoreAccessor(function (s) {\n  return function (userID, node) {\n    var baseText = \"Cannot unlink node #\".concat(node._key, \", since \");\n    if (!IsUserCreatorOrMod(userID, node)) return \"\".concat(baseText, \"you are not its owner. (or a mod)\"); //if (!asPartOfCut && (node.parents || {}).VKeys().length <= 1) return `${baseText}doing so would orphan it. Try deleting it instead.`;\n\n    if (IsRootNode(node)) return \"\".concat(baseText, \"it's the root-node of a map.\");\n    if (IsNodeSubnode(node)) return \"\".concat(baseText, \"it's a subnode. Try deleting it instead.\");\n    return null;\n  };\n});\nexport var ForCopy_GetError = StoreAccessor(function (s) {\n  return function (userID, node) {\n    if (!CanGetBasicPermissions(userID)) return \"You're not signed in, or lack basic permissions.\";\n    if (IsRootNode(node)) return \"Cannot copy the root-node of a map.\";\n    if (IsNodeSubnode(node)) return \"Cannot copy a subnode.\";\n    return null;\n  };\n});\n/* export function GetUnlinkErrorMessage(parent: MapNode, child: MapNode) {\r\n    //let childNodes = node.children.Select(a=>nodes[a]);\r\n    let parentNodes = nodes.filter(a=>a.children && a.children[node._id]);\r\n    if (parentNodes.length <= 1)\r\n} */","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { CE } from \"js-vextensions\";\nimport { AssertV, AssertValidate, Command, GenerateUUID } from \"mobx-firelink\";\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { GetNode } from \"../Store/firebase/nodes\";\n/** Returned terms are all lowercase. */\n\nexport function GetSearchTerms(str) {\n  return GetSearchTerms_Advanced(str, false).wholeTerms;\n}\n/** Returned terms are all lowercase. */\n\nexport function GetSearchTerms_Advanced(str) {\n  var separateTermsWithWildcard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var terms = str.toLowerCase().replace(/[^a-zA-Z0-9*]/g, ' ').replace(/ +/g, ' ').trim().split(' ').filter(function (a) {\n    return a != \"\";\n  }); // eslint-disable-line\n\n  var wholeTerms = CE(terms.filter(function (a) {\n    return separateTermsWithWildcard ? !a.includes(\"*\") : true;\n  }).map(function (a) {\n    return a.replace(/\\*/g, \"\");\n  })).Distinct().filter(function (a) {\n    return a != \"\";\n  });\n  var partialTerms = CE(terms.filter(function (a) {\n    return separateTermsWithWildcard ? a.includes(\"*\") : false;\n  }).map(function (a) {\n    return a.replace(/\\*/g, \"\");\n  })).Distinct().filter(function (a) {\n    return a != \"\";\n  });\n  return {\n    wholeTerms: wholeTerms,\n    partialTerms: partialTerms\n  };\n}\n\nvar AddNodeRevision =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddNodeRevision, _Command);\n\n  function AddNodeRevision() {\n    _classCallCheck(this, AddNodeRevision);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddNodeRevision).apply(this, arguments));\n  }\n\n  _createClass(AddNodeRevision, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var revision = this.payload.revision; // this.revisionID = (await GetDataAsync('general', 'data', '.lastNodeRevisionID')) + this.lastNodeRevisionID_addAmount + 1;\n\n      this.revisionID = (_a = this.revisionID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      revision.creator = this.userInfo.id;\n      revision.createdAt = Date.now();\n      var titles_joined = CE(revision.titles || {}).VValues().join(\" \");\n      revision.titles.allTerms = CE(GetSearchTerms(titles_joined)).ToMap(function (a) {\n        return a;\n      }, function () {\n        return true;\n      });\n\n      if (this.parentCommand == null) {\n        this.node_oldData = GetNode(revision.node);\n        AssertV(this.node_oldData, \"node_oldData is null.\");\n      }\n\n      this.returnData = this.revisionID;\n      AssertValidate(\"MapNodeRevision\", revision, \"Revision invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          revision = _this$payload.revision;\n      var updates = {}; // updates['general/data/.lastNodeRevisionID'] = this.revisionID;\n\n      updates[\"nodes/\".concat(revision.node, \"/.currentRevision\")] = this.revisionID;\n      updates[\"nodeRevisions/\".concat(this.revisionID)] = revision; // updates[`maps/${mapID}/nodeEditTimes/data/.${revision.node}`] = revision.createdAt;\n\n      updates[\"mapNodeEditTimes/\".concat(mapID, \"/.\").concat(revision.node)] = revision.createdAt;\n      return updates;\n    }\n  }]);\n\n  return AddNodeRevision;\n}(Command);\n\nAddNodeRevision = __decorate([MapEdit, UserEdit], AddNodeRevision);\nexport { AddNodeRevision };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { AssertV, AssertValidate, AssertValidate_Full, Command, GenerateUUID, GetSchemaJSON, MergeDBUpdates } from \"mobx-firelink\";\nimport { AddNodeRevision } from \"./AddNodeRevision\";\nimport { CE } from \"js-vextensions\";\n/** Do not use this from client-side code. This is only to be used internally, by higher-level commands -- usually AddChildNode. */\n\nexport var AddNode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddNode, _Command);\n\n  function AddNode() {\n    _classCallCheck(this, AddNode);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddNode).apply(this, arguments));\n  }\n\n  _createClass(AddNode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b;\n\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          node = _this$payload.node,\n          revision = _this$payload.revision;\n      AssertV(node.currentRevision == null || node.currentRevision == this.sub_addRevision.revisionID, \"Cannot specify node's revision-id. It will be generated automatically.\");\n      AssertV(revision.node == null || revision.node == this.nodeID, \"Cannot specify revision's node-id. It will be generated automatically.\");\n      this.nodeID = (_a = this.nodeID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      node.creator = this.userInfo.id;\n      node.createdAt = Date.now();\n      revision.node = this.nodeID;\n      this.sub_addRevision = (_b = this.sub_addRevision, _b !== null && _b !== void 0 ? _b : new AddNodeRevision({\n        mapID: mapID,\n        revision: revision\n      }).MarkAsSubcommand(this));\n      this.sub_addRevision.Validate();\n      node.currentRevision = this.sub_addRevision.revisionID; // if sub of AddChildNode for new argument, ignore the \"childrenOrder\" prop requirement (gets added by later link-impact-node subcommand)\n\n      if (this.parentCommand) {\n        var mapNodeSchema = GetSchemaJSON(\"MapNode\").Excluding(\"allOf\");\n        AssertValidate_Full(mapNodeSchema, \"MapNode\", node, \"Node invalid\");\n      } else {\n        AssertValidate(\"MapNode\", node, \"Node invalid\");\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var node = this.payload.node;\n      var updates = {}; // add node\n\n      updates[\"nodes/\".concat(this.nodeID)] = node; // add as parent of (pre-existing) children\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = CE(node.children || {}).VKeys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var childID = _step.value;\n          updates[\"nodes/\".concat(childID, \"/.parents/.\").concat(this.nodeID)] = {\n            _: true\n          };\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      updates = MergeDBUpdates(updates, this.sub_addRevision.GetDBUpdates());\n      return updates;\n    }\n  }]);\n\n  return AddNode;\n}(Command);","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { E } from \"js-vextensions\";\nimport { MergeDBUpdates, Command, AssertV } from \"mobx-firelink\";\nimport { AssertValidate } from \"mobx-firelink\";\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { AddNode } from \"./AddNode\";\nimport { Polarity } from \"../Store/firebase/nodes/@MapNode\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\nimport { GetNode } from \"../Store/firebase/nodes\";\n\nvar AddChildNode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddChildNode, _Command);\n\n  function AddChildNode() {\n    _classCallCheck(this, AddChildNode);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddChildNode).apply(this, arguments));\n  }\n\n  _createClass(AddChildNode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertValidate({\n        properties: {\n          mapID: {\n            type: \"string\"\n          },\n          parentID: {\n            type: [\"null\", \"string\"]\n          },\n          node: {\n            $ref: \"MapNode_Partial\"\n          },\n          revision: {\n            $ref: \"MapNodeRevision_Partial\"\n          },\n          link: {\n            $ref: \"ChildEntry\"\n          },\n          asMapRoot: {\n            type: \"boolean\"\n          }\n        },\n        required: [\"mapID\", \"parentID\", \"node\", \"revision\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          parentID = _this$payload.parentID,\n          node = _this$payload.node,\n          revision = _this$payload.revision,\n          link = _this$payload.link,\n          asMapRoot = _this$payload.asMapRoot;\n      AssertV(node.parents == null, \"node.parents must be empty. Instead, supply a parentID property in the payload.\");\n      var node_withParents = E(node, parentID ? {\n        parents: _defineProperty({}, parentID, {\n          _: true\n        })\n      } : {});\n      this.sub_addNode = (_a = this.sub_addNode, _a !== null && _a !== void 0 ? _a : new AddNode({\n        mapID: mapID,\n        node: node_withParents,\n        revision: revision\n      }).MarkAsSubcommand(this));\n      this.sub_addNode.Validate();\n      this.payload.link = link !== null && link !== void 0 ? link : E({\n        _: true\n      }, node.type == MapNodeType.Argument && {\n        polarity: Polarity.Supporting\n      });\n\n      if (node.type == MapNodeType.Argument) {\n        AssertV(this.payload.link.polarity != null, \"An argument node must have its polarity specified in its parent-link.\");\n      }\n\n      if (!asMapRoot && this.parentCommand == null) {\n        // this.parent_oldChildrenOrder = await GetDataAsync('nodes', parentID, '.childrenOrder') as number[];\n        this.parent_oldData = GetNode(parentID);\n      }\n\n      this.returnData = {\n        nodeID: this.sub_addNode.nodeID,\n        revisionID: this.sub_addNode.sub_addRevision.revisionID\n      };\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload2 = this.payload,\n          parentID = _this$payload2.parentID,\n          link = _this$payload2.link,\n          asMapRoot = _this$payload2.asMapRoot;\n      var updates = this.sub_addNode.GetDBUpdates();\n      var newUpdates = {}; // add as child of parent\n\n      if (!asMapRoot) {\n        newUpdates[\"nodes/\".concat(parentID, \"/.children/.\").concat(this.sub_addNode.nodeID)] = link; // if this node is being placed as a child of an argument, update the argument's children-order property\n\n        if (this.parent_oldData && this.parent_oldData.type == MapNodeType.Argument) {\n          newUpdates[\"nodes/\".concat(parentID, \"/.childrenOrder\")] = (this.parent_oldData.childrenOrder || []).concat([this.sub_addNode.nodeID]);\n        }\n      }\n\n      return MergeDBUpdates(updates, newUpdates);\n    }\n  }]);\n\n  return AddChildNode;\n}(Command);\n\nAddChildNode = __decorate([MapEdit, UserEdit], AddChildNode);\nexport { AddChildNode };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { MergeDBUpdates, Command } from \"mobx-firelink\";\nimport { AssertValidate } from \"mobx-firelink\";\nimport { AddChildNode } from \"./AddChildNode\";\nexport var AddArgumentAndClaim =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddArgumentAndClaim, _Command);\n\n  function AddArgumentAndClaim() {\n    _classCallCheck(this, AddArgumentAndClaim);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddArgumentAndClaim).apply(this, arguments));\n  }\n\n  _createClass(AddArgumentAndClaim, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b;\n\n      AssertValidate({\n        properties: {\n          mapID: {\n            type: \"string\"\n          },\n          argumentParentID: {\n            type: \"string\"\n          },\n          argumentNode: {\n            $ref: \"MapNode_Partial\"\n          },\n          argumentRevision: {\n            $ref: \"MapNodeRevision_Partial\"\n          },\n          argumentLink: {\n            $ref: \"ChildEntry\"\n          },\n          claimNode: {\n            $ref: \"MapNode_Partial\"\n          },\n          claimRevision: {\n            $ref: \"MapNodeRevision_Partial\"\n          },\n          claimLink: {\n            $ref: \"ChildEntry\"\n          }\n        },\n        required: [\"mapID\", \"argumentParentID\", \"argumentNode\", \"argumentRevision\", \"claimNode\", \"claimRevision\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          argumentParentID = _this$payload.argumentParentID,\n          argumentNode = _this$payload.argumentNode,\n          argumentRevision = _this$payload.argumentRevision,\n          argumentLink = _this$payload.argumentLink,\n          claimNode = _this$payload.claimNode,\n          claimRevision = _this$payload.claimRevision,\n          claimLink = _this$payload.claimLink;\n      this.sub_addArgument = (_a = this.sub_addArgument, _a !== null && _a !== void 0 ? _a : new AddChildNode({\n        mapID: mapID,\n        parentID: argumentParentID,\n        node: argumentNode,\n        revision: argumentRevision,\n        link: argumentLink\n      }).MarkAsSubcommand(this));\n      this.sub_addArgument.Validate();\n      this.sub_addClaim = (_b = this.sub_addClaim, _b !== null && _b !== void 0 ? _b : new AddChildNode({\n        mapID: mapID,\n        parentID: this.sub_addArgument.returnData.nodeID,\n        node: claimNode,\n        revision: claimRevision,\n        link: claimLink\n      }).MarkAsSubcommand(this));\n      /* this.sub_addClaim.lastNodeID_addAmount = 1;\r\n      this.sub_addClaim.lastNodeRevisionID_addAmount = 1; */\n\n      this.sub_addClaim.Validate();\n      this.sub_addClaim.parent_oldData = argumentNode; // we need to do this so add-claim sub knows it's child of argument, and thus updates the children-order prop of the argument\n\n      this.returnData = {\n        argumentNodeID: this.sub_addArgument.sub_addNode.nodeID,\n        argumentRevisionID: this.sub_addArgument.sub_addNode.sub_addRevision.revisionID,\n        claimNodeID: this.sub_addClaim.sub_addNode.nodeID,\n        claimRevisionID: this.sub_addClaim.sub_addNode.sub_addRevision.revisionID\n      };\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = {};\n      updates = MergeDBUpdates(updates, this.sub_addArgument.GetDBUpdates());\n      updates = MergeDBUpdates(updates, this.sub_addClaim.GetDBUpdates());\n      return updates;\n    }\n  }]);\n\n  return AddArgumentAndClaim;\n}(Command);","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { HasModPermissions } from \"../Store/firebase/users/$user\";\n\nvar AddImage =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddImage, _Command);\n\n  function AddImage() {\n    _classCallCheck(this, AddImage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddImage).apply(this, arguments));\n  }\n\n  _createClass(AddImage, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertV(HasModPermissions(this.userInfo.id), \"Only moderators can add images currently. (till review/approval system is implemented)\");\n      var image = this.payload.image;\n      this.imageID = (_a = this.imageID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      image.creator = this.userInfo.id;\n      image.createdAt = Date.now();\n      this.returnData = this.imageID;\n      AssertValidate(\"Image\", image, \"Image invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var image = this.payload.image;\n\n      var updates = _defineProperty({}, \"images/\".concat(this.imageID), image);\n\n      return updates;\n    }\n  }]);\n\n  return AddImage;\n}(Command);\n\nAddImage = __decorate([UserEdit], AddImage);\nexport { AddImage };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command } from \"mobx-firelink\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\n\nvar AddLayer =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddLayer, _Command);\n\n  function AddLayer() {\n    _classCallCheck(this, AddLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddLayer).apply(this, arguments));\n  }\n\n  _createClass(AddLayer, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var layer = this.payload.layer;\n      this.layerID = (_a = this.layerID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      layer.createdAt = Date.now();\n      AssertValidate(\"Layer\", layer, \"Layer invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var layer = this.payload.layer;\n\n      var updates = _defineProperty({}, \"layers/\".concat(this.layerID), layer);\n\n      return updates;\n    }\n  }]);\n\n  return AddLayer;\n}(Command);\n\nAddLayer = __decorate([UserEdit], AddLayer);\nexport { AddLayer };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MergeDBUpdates, Command, AssertV } from \"mobx-firelink\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { OmitIfFalsy } from \"js-vextensions\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AddChildNode } from \"./AddChildNode\";\nimport { MapNode } from \"../Store/firebase/nodes/@MapNode\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\nimport { MapType } from \"../Store/firebase/maps/@Map\";\nimport { MapNodeRevision } from \"../Store/firebase/nodes/@MapNodeRevision\";\n\nvar AddMap =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddMap, _Command);\n\n  function AddMap() {\n    _classCallCheck(this, AddMap);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddMap).apply(this, arguments));\n  }\n\n  _createClass(AddMap, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b;\n\n      var map = this.payload.map;\n      AssertV(map.featured === undefined, 'Cannot set \"featured\" to true while first adding a map. (hmmm)');\n      this.mapID = (_a = this.mapID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      map.createdAt = Date.now();\n      map.editedAt = map.createdAt;\n      var newRootNode = new MapNode({\n        type: MapNodeType.Category,\n        creator: map.creator,\n        rootNodeForMap: this.mapID,\n        ownerMapID: OmitIfFalsy(map.type == MapType.Private && this.mapID)\n      });\n      var newRootNodeRevision = new MapNodeRevision({\n        titles: {\n          base: \"Root\"\n        },\n        votingDisabled: true\n      });\n      this.sub_addNode = (_b = this.sub_addNode, _b !== null && _b !== void 0 ? _b : new AddChildNode({\n        mapID: this.mapID,\n        parentID: null,\n        node: newRootNode,\n        revision: newRootNodeRevision,\n        asMapRoot: true\n      }).MarkAsSubcommand(this));\n      this.sub_addNode.Validate();\n      map.rootNode = this.sub_addNode.sub_addNode.nodeID;\n      AssertValidate(\"Map\", map, \"Map invalid\");\n      this.returnData = this.mapID;\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var map = this.payload.map;\n      var updates = {};\n      updates[\"maps/\".concat(this.mapID)] = map;\n      updates = MergeDBUpdates(updates, this.sub_addNode.GetDBUpdates());\n      return updates;\n    }\n  }]);\n\n  return AddMap;\n}(Command);\n\nAddMap = __decorate([UserEdit], AddMap);\nexport { AddMap };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { HasModPermissions } from \"../Store/firebase/users/$user\";\nimport { GetNode } from \"../Store/firebase/nodes\";\n\nvar AddNodeTag =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddNodeTag, _Command);\n\n  function AddNodeTag() {\n    _classCallCheck(this, AddNodeTag);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddNodeTag).apply(this, arguments));\n  }\n\n  _createClass(AddNodeTag, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertV(HasModPermissions(this.userInfo.id), \"Only moderators can add tags currently.\");\n      var tag = this.payload.tag;\n      this.id = (_a = this.id, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      tag.creator = this.userInfo.id;\n      tag.createdAt = Date.now();\n      AssertValidate(\"MapNodeTag\", tag, \"MapNodeTag invalid\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = tag.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var nodeID = _step.value;\n          var node = GetNode(nodeID);\n          AssertV(node, \"Node with id \".concat(nodeID, \" does not exist.\"));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.returnData = this.id;\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var tag = this.payload.tag;\n\n      var updates = _defineProperty({}, \"nodeTags/\".concat(this.id), tag);\n\n      return updates;\n    }\n  }]);\n\n  return AddNodeTag;\n}(Command);\n\nAddNodeTag = __decorate([UserEdit], AddNodeTag);\nexport { AddNodeTag };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { Assert } from \"js-vextensions\";\nimport { Command } from \"mobx-firelink\";\nimport { GetNode } from \"../Store/firebase/nodes\";\n\nvar AddPhrasing =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddPhrasing, _Command);\n\n  function AddPhrasing() {\n    _classCallCheck(this, AddPhrasing);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddPhrasing).apply(this, arguments));\n  }\n\n  _createClass(AddPhrasing, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var phrasing = this.payload.phrasing;\n      this.id = (_a = this.id, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      phrasing.creator = this.userInfo.id;\n      phrasing.createdAt = Date.now();\n      AssertValidate(\"MapNodePhrasing\", phrasing, \"MapNodePhrasing invalid\");\n      var node = GetNode(phrasing.node);\n      Assert(node, \"Node with id \".concat(phrasing.node, \" does not exist.\"));\n      this.returnData = this.id;\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var phrasing = this.payload.phrasing;\n\n      var updates = _defineProperty({}, \"nodePhrasings/\".concat(this.id), phrasing);\n\n      return updates;\n    }\n  }]);\n\n  return AddPhrasing;\n}(Command);\n\nAddPhrasing = __decorate([UserEdit], AddPhrasing);\nexport { AddPhrasing };","import { GetDoc, StoreAccessor } from \"mobx-firelink\";\nexport var GetUserMapInfo = StoreAccessor(function (s) {\n  return function (userID, mapID) {\n    var _a;\n\n    if (userID == null) return null;\n    return (_a = GetDoc({}, function (a) {\n      return a.userMapInfo.get(userID);\n    })) === null || _a === void 0 ? void 0 : _a.maps.get(mapID);\n  };\n});\nexport var GetUserLayerStatesForMap = StoreAccessor(function (s) {\n  return function (userID, mapID) {\n    var _a, _b;\n\n    if (userID == null) return null;\n    return (_b = (_a = GetDoc({}, function (a) {\n      return a.userMapInfo.get(userID);\n    })) === null || _a === void 0 ? void 0 : _a.maps.get(mapID)) === null || _b === void 0 ? void 0 : _b.layerStates;\n  };\n});\nexport var GetUserLayerStateForMap = StoreAccessor(function (s) {\n  return function (userID, mapID, layerID) {\n    /* if (userID == null) return null;\r\n    return GetData(\"userMapInfo\", userID, `.${mapID}`, \"layerStates\", layerID) as boolean; */\n    // temp fix for that the direct approach above does not update the Connect() props, for some reason\n    var userLayerStates = GetUserLayerStatesForMap(userID, mapID);\n    if (userLayerStates == null) return null;\n    return userLayerStates[layerID];\n  };\n});","import _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport { emptyArray, emptyArray_forLoading, CE } from \"js-vextensions\";\nimport { GetDoc, GetDocs, StoreAccessor } from \"mobx-firelink\";\nimport { AsNodeL3, GetNodeL2 } from \"./nodes/$node\";\nimport { GetUserLayerStatesForMap } from \"./userMapInfo\";\nimport { GetMap } from \"./maps\";\nimport { GetNode } from \"./nodes\";\nexport var GetLayers = StoreAccessor(function (s) {\n  return function () {\n    return GetDocs({}, function (a) {\n      return a.layers;\n    });\n  };\n});\nexport var GetLayer = StoreAccessor(function (s) {\n  return function (id) {\n    return GetDoc({}, function (a) {\n      return a.layers.get(id);\n    });\n  };\n});\nexport function GetMapLayerIDs(mapID) {\n  var map = GetMap(mapID);\n  if (map == null) return null;\n  return map.layers ? CE(map.layers).VKeys() : emptyArray;\n}\nexport var GetMapLayers = StoreAccessor(function (s) {\n  return function (mapID) {\n    return GetMapLayerIDs(mapID).map(function (id) {\n      return GetLayer(id);\n    });\n  };\n});\nexport var GetSubnodeIDsInLayer = StoreAccessor(function (s) {\n  return function (anchorNodeID, layerID) {\n    return CE(GetDoc({}, function (a) {\n      return a.layers.get(layerID).nodeSubnodes.get(anchorNodeID);\n    }) || {}).VKeys();\n  };\n});\nexport var GetSubnodesInLayer = StoreAccessor(function (s) {\n  return function (anchorNodeID, layerID) {\n    var subnodeIDs = GetSubnodeIDsInLayer(anchorNodeID, layerID);\n    return subnodeIDs.map(function (id) {\n      return GetNode(id);\n    });\n  };\n});\n/* export function GetSubnodesInLayerEnhanced(anchorNodeID: string, layerID: string) {\r\n    let subnodes = GetSubnodesInLayer(anchorNodeID, layerID);\r\n    let subnodesEnhanced = subnodes.map(child=> {\r\n        if (child == null) return null;\r\n        return {...child, finalType: child.type, link: null};\r\n    });\r\n    return CachedTransform(\"GetSubnodesInLayerEnhanced\", [anchorNodeID, layerID], subnodesEnhanced, ()=>subnodesEnhanced);\r\n} */\n\nexport var GetSubnodesInEnabledLayersEnhanced = StoreAccessor(function (s) {\n  return function (userID, mapID, anchorNodeID) {\n    var layersEnabled = GetMapLayers(mapID); // if some layers aren't loaded yet, return nothing\n\n    if (CE(layersEnabled).Any(function (a) {\n      return a == null;\n    })) return emptyArray_forLoading; // const userLayerStates = GetUserLayerStatesForMap(userID, map._key) || {};\n\n    var userLayerStates = GetUserLayerStatesForMap(userID, mapID);\n\n    if (userLayerStates != null) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var _step$value = _step.value,\n              layerID = _step$value.key,\n              state = _step$value.value;\n          var existingEntry = layersEnabled.find(function (a) {\n            return a._key == layerID;\n          });\n\n          if (state == true) {\n            if (existingEntry == null) {\n              layersEnabled.push(GetLayer(layerID));\n            }\n          } else if (existingEntry != null) {\n            CE(layersEnabled).Remove(existingEntry);\n          }\n        };\n\n        for (var _iterator = CE(userLayerStates).Pairs()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          _loop();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n\n    var subnodeIDs = [];\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = layersEnabled[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var layer = _step2.value;\n        subnodeIDs.push.apply(subnodeIDs, _toConsumableArray(GetSubnodeIDsInLayer(anchorNodeID, layer._key)));\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    var subnodesL3 = subnodeIDs.map(function (id) {\n      var child = GetNodeL2(id);\n      if (child == null) return null;\n      return AsNodeL3(child);\n    });\n    return subnodesL3;\n  };\n});\nexport var ForDeleteLayer_GetError = StoreAccessor(function (s) {\n  return function (userID, layer) {\n    if (CE(layer.nodeSubnodes || {}).VKeys().length) return \"Cannot delete layer until all the subnodes within it are deleted.\";\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AssertV, Command, MergeDBUpdates } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AddNode } from \"./AddNode\";\nimport { GetLayer } from \"../Store/firebase/layers\";\n\nvar AddSubnode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddSubnode, _Command);\n\n  function AddSubnode() {\n    _classCallCheck(this, AddSubnode);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddSubnode).apply(this, arguments));\n  }\n\n  _createClass(AddSubnode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          layerID = _this$payload.layerID,\n          anchorNodeID = _this$payload.anchorNodeID,\n          subnode = _this$payload.subnode,\n          subnodeRevision = _this$payload.subnodeRevision;\n      this.sub_addNode = (_a = this.sub_addNode, _a !== null && _a !== void 0 ? _a : new AddNode({\n        mapID: mapID,\n        node: subnode,\n        revision: subnodeRevision\n      }).MarkAsSubcommand(this));\n      this.sub_addNode.Validate();\n      this.layer_oldData = GetLayer(layerID);\n      AssertV(this.layer_oldData, \"layer_oldData is null.\");\n      this.returnData = this.sub_addNode.nodeID;\n      this.sub_addNode.Validate();\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload2 = this.payload,\n          layerID = _this$payload2.layerID,\n          anchorNodeID = _this$payload2.anchorNodeID,\n          subnode = _this$payload2.subnode;\n      var updates = this.sub_addNode.GetDBUpdates();\n      var newUpdates = {}; // add into layer\n\n      newUpdates[\"layers/\".concat(layerID, \"/.nodeSubnodes/.\").concat(anchorNodeID, \"/.\").concat(this.sub_addNode.nodeID)] = true;\n      var layerPlusAnchorStr = \"\".concat(layerID, \"+\").concat(anchorNodeID);\n      newUpdates[\"nodes/\".concat(this.sub_addNode.nodeID, \"/.layerPlusAnchorParents/.\").concat(layerPlusAnchorStr)] = true;\n      /* newUpdates[`nodes/${this.sub_addNode.nodeID}/.layerOwner`] = layerID;\r\n      newUpdates[`nodes/${this.sub_addNode.nodeID}/.layerAnchorNode`] = anchorNodeID; */\n\n      return MergeDBUpdates(updates, newUpdates);\n    }\n  }]);\n\n  return AddSubnode;\n}(Command);\n\nAddSubnode = __decorate([UserEdit], AddSubnode);\nexport { AddSubnode };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { Command } from \"mobx-firelink\";\n\nvar AddTerm =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddTerm, _Command);\n\n  function AddTerm() {\n    _classCallCheck(this, AddTerm);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddTerm).apply(this, arguments));\n  }\n\n  _createClass(AddTerm, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var term = this.payload.term;\n      this.termID = (_a = this.termID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      term.creator = this.userInfo.id;\n      term.createdAt = Date.now();\n      this.returnData = this.termID;\n      AssertValidate(\"Term\", term, \"Term invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _updates;\n\n      var term = this.payload.term;\n      var updates = (_updates = {}, _defineProperty(_updates, \"terms/\".concat(this.termID), term), _defineProperty(_updates, \"termNames/\".concat(term.name.toLowerCase(), \"/.\").concat(this.termID), true), _updates);\n      return updates;\n    }\n  }]);\n\n  return AddTerm;\n}(Command);\n\nAddTerm = __decorate([UserEdit], AddTerm);\nexport { AddTerm };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command } from \"mobx-firelink\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\n\nvar AddTimeline =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddTimeline, _Command);\n\n  function AddTimeline() {\n    _classCallCheck(this, AddTimeline);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddTimeline).apply(this, arguments));\n  }\n\n  _createClass(AddTimeline, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          timeline = _this$payload.timeline;\n      this.timelineID = (_a = this.timelineID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      timeline.mapID = mapID;\n      timeline.createdAt = Date.now();\n      this.returnData = this.timelineID;\n      AssertValidate(\"Timeline\", timeline, \"Timeline invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _updates;\n\n      var _this$payload2 = this.payload,\n          mapID = _this$payload2.mapID,\n          timeline = _this$payload2.timeline;\n      var updates = (_updates = {}, _defineProperty(_updates, \"timelines/\".concat(this.timelineID), timeline), _defineProperty(_updates, \"maps/\".concat(mapID, \"/.timelines/.\").concat(this.timelineID), true), _updates);\n      return updates;\n    }\n  }]);\n\n  return AddTimeline;\n}(Command);\n\nAddTimeline = __decorate([UserEdit], AddTimeline);\nexport { AddTimeline };","import { emptyArray_forLoading, CE } from \"js-vextensions\";\nimport { GetDoc, StoreAccessor } from \"mobx-firelink\";\n/* export function GetTimelines(): Timeline[] {\r\n    let timelinesMap = GetData({collection: true}, \"timelines\");\r\n    return CachedTransform(\"GetTimelines\", [], timelinesMap, ()=>timelinesMap ? timelinesMap.VValues(true) : []);\r\n} */\n\nexport var GetTimeline = StoreAccessor(function (s) {\n  return function (id) {\n    if (id == null) return null;\n    return GetDoc({}, function (a) {\n      return a.timelines.get(id);\n    });\n  };\n});\nexport function GetMapTimelineIDs(map) {\n  return CE(map.timelines || {}).VKeys();\n}\nexport var GetMapTimelines = StoreAccessor(function (s) {\n  return function (map) {\n    var timelines = GetMapTimelineIDs(map).map(function (id) {\n      return GetTimeline(id);\n    });\n    if (CE(timelines).Any(function (a) {\n      return a == null;\n    })) return emptyArray_forLoading;\n    return timelines;\n  };\n});","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetTimeline } from \"../Store/firebase/timelines\";\nimport { CE } from \"js-vextensions\";\n\nvar AddTimelineStep =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(AddTimelineStep, _Command);\n\n  function AddTimelineStep() {\n    _classCallCheck(this, AddTimelineStep);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AddTimelineStep).apply(this, arguments));\n  }\n\n  _createClass(AddTimelineStep, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b;\n\n      var _this$payload = this.payload,\n          timelineID = _this$payload.timelineID,\n          step = _this$payload.step,\n          stepIndex = _this$payload.stepIndex; // const lastStepID = await GetDataAsync('general', 'data', '.lastTimelineStepID') as number;\n\n      this.stepID = (_a = this.stepID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      step.timelineID = timelineID; // this.timeline_oldSteps = await GetDocField_Async(a=>a.timelines.get(timelineID), a=>a.steps) || [];\n\n      var timeline = GetTimeline(timelineID);\n      AssertV(timeline, \"timeline not yet loaded.\");\n      this.timeline_oldSteps = ((_b = timeline) === null || _b === void 0 ? void 0 : _b.steps) || [];\n      this.timeline_newSteps = this.timeline_oldSteps.slice();\n\n      if (stepIndex) {\n        CE(this.timeline_newSteps).Insert(stepIndex, this.stepID);\n      } else {\n        this.timeline_newSteps.push(this.stepID);\n      }\n\n      AssertValidate(\"TimelineStep\", step, \"TimelineStep invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _updates;\n\n      var _this$payload2 = this.payload,\n          timelineID = _this$payload2.timelineID,\n          step = _this$payload2.step;\n      var updates = (_updates = {}, _defineProperty(_updates, \"timelineSteps/\".concat(this.stepID), step), _defineProperty(_updates, \"timelines/\".concat(timelineID, \"/.steps\"), this.timeline_newSteps), _updates);\n      return updates;\n    }\n  }]);\n\n  return AddTimelineStep;\n}(Command);\n\nAddTimelineStep = __decorate([UserEdit], AddTimelineStep);\nexport { AddTimelineStep };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { Source } from \"./@SourceChain\";\nexport var QuoteAttachment = function QuoteAttachment() {\n  _classCallCheck(this, QuoteAttachment);\n\n  this.content = \"\";\n  this.sourceChains = [{\n    sources: [new Source()]\n  }];\n};\nAddSchema(\"QuoteAttachment\", {\n  properties: {\n    content: {\n      type: \"string\"\n    },\n    sourceChains: {\n      items: {\n        $ref: \"SourceChain\"\n      }\n    }\n  },\n  required: [\"content\", \"sourceChains\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nexport var ImageAttachment = function ImageAttachment() {\n  _classCallCheck(this, ImageAttachment);\n};\nAddSchema(\"ImageAttachment\", {\n  properties: {\n    id: {\n      type: \"string\"\n    }\n  },\n  required: [\"id\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nexport var EquationAttachment = function EquationAttachment() {\n  _classCallCheck(this, EquationAttachment);\n\n  this.text = \"\";\n  this.isStep = true;\n  this.explanation = null;\n};\nAddSchema(\"EquationAttachment\", {\n  properties: {\n    latex: {\n      type: \"boolean\"\n    },\n    text: {\n      type: \"string\"\n    },\n    isStep: {\n      type: [\"null\", \"boolean\"]\n    },\n    explanation: {\n      type: [\"null\", \"string\"]\n    }\n  },\n  required: [\"text\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { Source } from \"./@SourceChain\";\nexport var ReferencesAttachment = function ReferencesAttachment() {\n  _classCallCheck(this, ReferencesAttachment);\n\n  this.sourceChains = [{\n    sources: [new Source()]\n  }];\n};\nAddSchema(\"ReferencesAttachment\", {\n  properties: {\n    sourceChains: {\n      items: {\n        $ref: \"SourceChain\"\n      }\n    }\n  },\n  required: [\"sourceChains\"]\n});","import { QuoteAttachment } from \"./@QuoteAttachment\";\nimport { ImageAttachment } from \"./@ImageAttachment\";\nimport { EquationAttachment } from \"./@EquationAttachment\";\nimport { ReferencesAttachment } from \"./@ReferencesAttachment\";\nimport { CE } from \"js-vextensions\";\nexport var AttachmentType;\n\n(function (AttachmentType) {\n  AttachmentType[AttachmentType[\"None\"] = 10] = \"None\"; // ImpactPremise = 20,\n\n  AttachmentType[AttachmentType[\"Equation\"] = 20] = \"Equation\";\n  AttachmentType[AttachmentType[\"References\"] = 30] = \"References\";\n  AttachmentType[AttachmentType[\"Quote\"] = 40] = \"Quote\";\n  AttachmentType[AttachmentType[\"Image\"] = 50] = \"Image\";\n})(AttachmentType || (AttachmentType = {}));\n\nexport function GetAttachmentType(node) {\n  return GetAttachmentType_Revision(node.current);\n}\nexport function GetAttachmentType_Revision(revision) {\n  return revision.equation ? AttachmentType.Equation : revision.references ? AttachmentType.References : revision.quote ? AttachmentType.Quote : revision.image ? AttachmentType.Image : AttachmentType.None;\n}\nexport function ResetNodeRevisionAttachment(revision, attachmentType) {\n  CE(revision).Extend({\n    equation: null,\n    references: null,\n    quote: null,\n    image: null\n  });\n\n  if (attachmentType == AttachmentType.None) {} else if (attachmentType == AttachmentType.Equation) {\n    revision.equation = new EquationAttachment();\n  } else if (attachmentType == AttachmentType.References) {\n    revision.references = new ReferencesAttachment();\n  } else if (attachmentType == AttachmentType.Quote) {\n    revision.quote = new QuoteAttachment();\n  } else {\n    revision.image = new ImageAttachment();\n  }\n}","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AssertV, AV, Command } from \"mobx-firelink\";\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate, GenerateUUID } from \"mobx-firelink\";\nimport { AttachmentType, GetAttachmentType } from \"../Store/firebase/nodeRevisions/@AttachmentType\";\nimport { GetNodeL2, AsNodeL1 } from \"../Store/firebase/nodes/$node\";\nimport { EquationAttachment } from \"../Store/firebase/nodeRevisions/@EquationAttachment\";\nexport var conversionTypes = [// from normal to...\n\"Normal>Equation\", // each type back to normal\n\"Equation>Normal\"];\nexport function CanConvertFromClaimTypeXToY(from, to) {\n  return conversionTypes.includes(\"\".concat(AttachmentType[from], \">\").concat(AttachmentType[to]));\n}\nAddSchema(\"ChangeClaimType_payload\", {\n  properties: {\n    mapID: {\n      type: \"string\"\n    },\n    nodeID: {\n      type: \"string\"\n    },\n    newType: {\n      oneOf: GetValues_ForSchema(AttachmentType)\n    }\n  },\n  required: [\"nodeID\", \"newType\"]\n});\n\nvar ChangeClaimType =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(ChangeClaimType, _Command);\n\n  function ChangeClaimType() {\n    _classCallCheck(this, ChangeClaimType);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChangeClaimType).apply(this, arguments));\n  }\n\n  _createClass(ChangeClaimType, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertValidate(\"ChangeClaimType_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          nodeID = _this$payload.nodeID,\n          newType = _this$payload.newType; // let oldData = await GetDataAsync({addHelpers: false}, \"nodes\", nodeID) as MapNode;\n\n      var oldData = AV.NonNull = GetNodeL2(nodeID);\n      this.oldType = GetAttachmentType(oldData);\n      this.newData = Object.assign({}, AsNodeL1(oldData)); // this.newRevisionID = (await GetDataAsync('general', 'data', '.lastNodeRevisionID')) + 1;\n\n      this.newRevisionID = (_a = this.newRevisionID, _a !== null && _a !== void 0 ? _a : GenerateUUID());\n      this.newRevision = Object.assign({}, oldData.current);\n      this.newData.currentRevision = this.newRevisionID;\n\n      if (this.oldType == AttachmentType.None) {\n        if (newType == AttachmentType.Equation) {\n          this.newRevision.equation = CE(new EquationAttachment()).VSet({\n            text: this.newRevision.titles.base\n          });\n          delete this.newRevision.titles;\n        }\n      } else if (this.oldType == AttachmentType.Equation) {\n        if (newType == AttachmentType.None) {\n          this.newRevision.titles = {\n            base: this.newRevision.equation.text\n          };\n          delete this.newRevision.equation;\n        }\n      }\n\n      AssertV(CanConvertFromClaimTypeXToY(this.oldType, newType), \"Cannot convert from claim-type \".concat(AttachmentType[this.oldType], \" to \").concat(AttachmentType[newType], \".\"));\n      AssertValidate(\"MapNode\", this.newData, \"New node-data invalid\");\n      AssertValidate(\"MapNodeRevision\", this.newRevisionID, \"New revision-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n      var updates = {};\n      updates[\"nodes/\".concat(nodeID)] = this.newData; // updates['general/data/.lastNodeRevisionID'] = this.newRevisionID;\n\n      updates[\"nodeRevisions/\".concat(this.newRevisionID)] = this.newRevision;\n      return updates;\n    }\n  }]);\n\n  return ChangeClaimType;\n}(Command);\n\nChangeClaimType = __decorate([MapEdit, UserEdit], ChangeClaimType);\nexport { ChangeClaimType };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar ChangeNodeOwnerMap_1;\nimport { Command, AssertV, MergeDBUpdates, AV } from \"mobx-firelink\";\nimport { AddSchema, AssertValidate } from \"mobx-firelink\";\nimport { E, DEL, IsSpecialEmptyArray, CE } from \"js-vextensions\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetNode, GetNodesByIDs, GetNodeChildren } from \"../Store/firebase/nodes\";\nimport { IsUserCreatorOrMod } from \"../Store/firebase/users/$user\";\nimport { GetMap } from \"../Store/firebase/maps\";\nimport { MapType } from \"../Store/firebase/maps/@Map\";\nimport { GetNodeRevision } from \"../Store/firebase/nodeRevisions\";\nimport { PermissionInfoType } from \"../Store/firebase/nodes/@MapNodeRevision\";\nAddSchema(\"ChangeNodeOwnerMap_payload\", {\n  properties: {\n    nodeID: {\n      type: \"string\"\n    },\n    newOwnerMapID: {\n      type: [\"null\", \"string\"]\n    },\n    argumentNodeID: {\n      type: \"string\"\n    }\n  },\n  required: [\"nodeID\", \"newOwnerMapID\"]\n}); // todo: integrate rest of validation code, preferably using system callable from both here and the ui (this is needed for many other commands as well)\n// @MapEdit\n\nvar ChangeNodeOwnerMap = ChangeNodeOwnerMap_1 =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(ChangeNodeOwnerMap, _Command);\n\n  function ChangeNodeOwnerMap() {\n    _classCallCheck(this, ChangeNodeOwnerMap);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChangeNodeOwnerMap).apply(this, arguments));\n  }\n\n  _createClass(ChangeNodeOwnerMap, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b, _c;\n\n      AssertValidate(\"ChangeNodeOwnerMap_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          nodeID = _this$payload.nodeID,\n          newOwnerMapID = _this$payload.newOwnerMapID,\n          argumentNodeID = _this$payload.argumentNodeID;\n      var oldData = AV.NonNull = GetNode(nodeID);\n      AssertV(IsUserCreatorOrMod(this.userInfo.id, oldData), \"User is not the node's creator, or a moderator.\"); // if making private\n\n      if (oldData.ownerMapID == null) {\n        var newOwnerMap = GetMap(newOwnerMapID);\n        AssertV(newOwnerMapID, \"newOwnerMap still loading.\");\n        AssertV(newOwnerMap.type == MapType.Private, \"Node must be in private map to be made private.\");\n        var permittedPublicParentIDs = argumentNodeID ? [argumentNodeID] : [];\n        var parents = GetNodesByIDs(CE((_a = oldData.parents, _a !== null && _a !== void 0 ? _a : {})).VKeys());\n        var parentsArePrivateInSameMap = !IsSpecialEmptyArray(parents) && newOwnerMapID && parents.every(function (a) {\n          return a.ownerMapID == newOwnerMapID || permittedPublicParentIDs.includes(a._key);\n        });\n        AssertV(parentsArePrivateInSameMap, \"To make node private, all its parents must be private nodes within the same map. (to ensure we don't leave links in other maps, which would make the owner-map-id invalid)\");\n      } else {\n        // if making public\n        AssertV(oldData.rootNodeForMap == null, \"Cannot make a map's root-node public.\"); // the owner map must allow public nodes (at some point, may remove this restriction, by having action cause node to be auto-replaced with in-map private-copy)\n        // AssertV(oldData.parents?.VKeys().length > 0, \"Cannot make an\")\n\n        var revision = GetNodeRevision(oldData.currentRevision);\n        AssertV(revision, \"revision not yet loaded.\");\n        AssertV(((_b = revision.permission_contribute) === null || _b === void 0 ? void 0 : _b.type) == PermissionInfoType.Anyone, 'To make node public, the \"Contribute\" permission must be set to \"Anyone\".');\n        var permittedPrivateChildrenIDs = this.parentCommand instanceof ChangeNodeOwnerMap_1 ? [this.parentCommand.payload.nodeID] : [];\n        var children = GetNodeChildren(oldData._key);\n        AssertV(!IsSpecialEmptyArray(children), \"children still loading.\");\n        AssertV(children.every(function (a) {\n          return a.ownerMapID == null || permittedPrivateChildrenIDs.includes(a._key);\n        }), \"To make node public, it must not have any private children.\");\n      }\n\n      this.newData = E(oldData, {\n        ownerMapID: newOwnerMapID !== null && newOwnerMapID !== void 0 ? newOwnerMapID : DEL\n      });\n      AssertValidate(\"MapNode\", this.newData, \"New node-data invalid\");\n\n      if (argumentNodeID) {\n        this.sub_changeOwnerMapForArgument = (_c = this.sub_changeOwnerMapForArgument, _c !== null && _c !== void 0 ? _c : new ChangeNodeOwnerMap_1({\n          nodeID: argumentNodeID,\n          newOwnerMapID: newOwnerMapID\n        }).MarkAsSubcommand(this));\n        this.sub_changeOwnerMapForArgument.Validate();\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n\n      var result = _defineProperty({}, \"nodes/\".concat(nodeID), this.newData);\n\n      if (this.sub_changeOwnerMapForArgument) {\n        result = MergeDBUpdates(result, this.sub_changeOwnerMapForArgument.GetDBUpdates());\n      }\n\n      return result;\n    }\n  }]);\n\n  return ChangeNodeOwnerMap;\n}(Command);\n\nChangeNodeOwnerMap = ChangeNodeOwnerMap_1 = __decorate([UserEdit], ChangeNodeOwnerMap);\nexport { ChangeNodeOwnerMap };","import _slicedToArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar DeleteNode_1;\nimport { AddSchema, AssertV, AssertValidate, Command, MergeDBUpdates } from \"mobx-firelink\";\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { GetNodeL2 } from \"../Store/firebase/nodes/$node\";\nimport { GetNodeRevisions } from \"../Store/firebase/nodeRevisions\";\nimport { GetNode, ForDelete_GetError } from \"../Store/firebase/nodes\";\nimport { GetMaps } from \"../Store/firebase/maps\";\nimport { CE } from \"js-vextensions\";\nAddSchema(\"DeleteNode_payload\", {\n  properties: {\n    mapID: {\n      type: \"string\"\n    },\n    nodeID: {\n      type: \"string\"\n    },\n    withContainerArgument: {\n      type: \"string\"\n    }\n  },\n  required: [\"nodeID\"]\n});\n\nvar DeleteNode = DeleteNode_1 =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteNode, _Command);\n\n  function DeleteNode() {\n    var _this;\n\n    _classCallCheck(this, DeleteNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DeleteNode).apply(this, arguments)); // as subcommand\n\n    _this.asPartOfMapDelete = false;\n    _this.parentsToIgnore = [];\n    _this.childrenToIgnore = [];\n    return _this;\n  }\n\n  _createClass(DeleteNode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b;\n\n      AssertValidate(\"DeleteNode_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          nodeID = _this$payload.nodeID,\n          withContainerArgument = _this$payload.withContainerArgument;\n      var asPartOfMapDelete = this.asPartOfMapDelete,\n          parentsToIgnore = this.parentsToIgnore,\n          childrenToIgnore = this.childrenToIgnore;\n      this.oldData = GetNodeL2(nodeID);\n      AssertV(this.oldData, \"oldData is null.\"); // this.oldRevisions = await GetAsync(() => GetNodeRevisions(nodeID));\n      // this.oldRevisions = await Promise.all(...oldRevisionIDs.map(id => GetDataAsync('nodeRevisions', id)));\n      // this.oldRevisions = await Promise.all(...oldRevisionIDs.map(id => GetAsync(() => GetNodeRevision(id))));\n\n      /* const oldRevisionIDs = await GetNodeRevisionIDsForNode_OneTime(nodeID);\r\n      this.oldRevisions = await GetAsync(() => oldRevisionIDs.map(id => GetNodeRevision(id))); */\n\n      this.oldRevisions = GetNodeRevisions(nodeID);\n      AssertV(this.oldRevisions.every(function (a) {\n        return a != null;\n      }) && this.oldRevisions.length, \"oldRevisions has null entries, or length of zero.\");\n      var parentIDs = CE(this.oldData.parents || {}).VKeys();\n      this.oldParentChildrenOrders = parentIDs.map(function (parentID) {\n        var _a;\n\n        return (_a = GetNode(parentID)) === null || _a === void 0 ? void 0 : _a.childrenOrder;\n      }); // AssertV(this.oldParentChildrenOrders.All((a) => a != null), 'oldParentChildrenOrders has null entries.');\n      // this.viewerIDs_main = await GetAsync(() => GetNodeViewers(nodeID));\n\n      var maps = GetMaps();\n      this.mapIDs = (_a = maps) === null || _a === void 0 ? void 0 : _a.map(function (a) {\n        var _a;\n\n        return (_a = a) === null || _a === void 0 ? void 0 : _a._key;\n      });\n      AssertV(this.mapIDs && this.mapIDs.every(function (a) {\n        return a != null;\n      }), \"mapIDs is null, or has null entries.\"); // probably todo: integrate this into the command Validate functions themselves\n\n      /* Assert((this.oldData.parents || {}).VKeys().length <= 1, \"Cannot delete this child, as it has more than one parent. Try unlinking it instead.\");\r\n      let normalChildCount = (this.oldData.children || {}).VKeys().length;\r\n      Assert(normalChildCount == 0, \"Cannot delete this node until all its (non-impact-premise) children have been unlinked or deleted.\"); */\n\n      var earlyError = ForDelete_GetError(this.userInfo.id, this.oldData, this.parentCommand && {\n        asPartOfMapDelete: asPartOfMapDelete,\n        parentsToIgnore: parentsToIgnore,\n        childrenToIgnore: childrenToIgnore\n      });\n      AssertV(earlyError == null, earlyError);\n\n      if (withContainerArgument) {\n        this.sub_deleteContainerArgument = (_b = this.sub_deleteContainerArgument, _b !== null && _b !== void 0 ? _b : new DeleteNode_1({\n          mapID: mapID,\n          nodeID: withContainerArgument\n        }).MarkAsSubcommand(this));\n        this.sub_deleteContainerArgument.childrenToIgnore = [nodeID]; // this.sub_deleteContainerArgument.Validate_Early();\n\n        this.sub_deleteContainerArgument.Validate();\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n      var updates = {}; // delete node's own data\n\n      updates[\"nodes/\".concat(nodeID)] = null; // updates[`nodeExtras/${nodeID}`] = null;\n\n      updates[\"nodeRatings/\".concat(nodeID)] = null;\n      updates[\"nodeViewers/\".concat(nodeID)] = null;\n      /* for (const viewerID of this.viewerIDs_main) {\r\n          updates[`userViewedNodes/${viewerID}/.${nodeID}}`] = null;\r\n      } */\n      // delete links with parents\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = CE(this.oldData.parents || {}).Pairs()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _step.value,\n              index = _step$value.index,\n              parentID = _step$value.key;\n          updates[\"nodes/\".concat(parentID, \"/.children/.\").concat(nodeID)] = null; // let parent_childrenOrder = this.oldParentID__childrenOrder[parentID];\n\n          var parent_childrenOrder = this.oldParentChildrenOrders[index];\n\n          if (parent_childrenOrder) {\n            updates[\"nodes/\".concat(parentID, \"/.childrenOrder\")] = CE(CE(parent_childrenOrder).Except(nodeID)).IfEmptyThen(null);\n          }\n        } // delete placement in layer\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (this.oldData.layerPlusAnchorParents) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = CE(this.oldData.layerPlusAnchorParents).VKeys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var layerPlusAnchorStr = _step2.value;\n\n            var _layerPlusAnchorStr$s = layerPlusAnchorStr.split(\"+\"),\n                _layerPlusAnchorStr$s2 = _slicedToArray(_layerPlusAnchorStr$s, 2),\n                layerID = _layerPlusAnchorStr$s2[0],\n                anchorNodeID = _layerPlusAnchorStr$s2[1];\n\n            updates[\"layers/\".concat(layerID, \"/.nodeSubnodes/.\").concat(anchorNodeID, \"/.\").concat(nodeID)] = null;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      } // delete revisions\n\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.oldRevisions[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var revision = _step3.value;\n          updates[\"nodeRevisions/\".concat(revision._key)] = null;\n        } // delete edit-time entry within each map (if it exists)\n\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.mapIDs[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var mapID = _step4.value;\n          updates[\"mapNodeEditTimes/\".concat(mapID, \"/.\").concat(nodeID)] = null;\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      if (this.sub_deleteContainerArgument) {\n        updates = MergeDBUpdates(updates, this.sub_deleteContainerArgument.GetDBUpdates());\n      } // todo: we also need to delete ourselves from our children's \"parents\" prop! (for when you can delete nodes with children)\n\n\n      return updates;\n    }\n  }]);\n\n  return DeleteNode;\n}(Command);\n\nDeleteNode = DeleteNode_1 = __decorate([MapEdit, UserEdit], DeleteNode);\nexport { DeleteNode };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { GetNode, IsRootNode, IsNodeSubnode } from \"../Store/firebase/nodes\";\nimport { GetNodeL2 } from \"../Store/firebase/nodes/$node\";\nimport { IsUserCreatorOrMod } from \"../Store/firebase/users/$user\";\nimport { CE } from \"js-vextensions\"; // todo: add full-fledged checking to ensure that nodes are never orphaned by move commands (probably use parents recursion to find at least one map root)\n\nvar UnlinkNode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UnlinkNode, _Command);\n\n  function UnlinkNode() {\n    var _this;\n\n    _classCallCheck(this, UnlinkNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UnlinkNode).apply(this, arguments));\n    _this.allowOrphaning = false; // could also be named \"asPartOfCut\", to be consistent with ForUnlink_GetError parameter\n\n    return _this;\n  }\n\n  _createClass(UnlinkNode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var _this$payload = this.payload,\n          parentID = _this$payload.parentID,\n          childID = _this$payload.childID;\n      this.parent_oldChildrenOrder = (_a = GetNode(parentID)) === null || _a === void 0 ? void 0 : _a.childrenOrder;\n      /* let {parentID, childID} = this.payload;\r\n      let childNode = await GetNodeAsync(childID);\r\n      let parentNodes = await GetNodeParentsAsync(childNode);\r\n      Assert(parentNodes.length > 1, \"Cannot unlink this child, as doing so would orphan it. Try deleting it instead.\"); */\n\n      var oldData = GetNodeL2(childID);\n      AssertV(oldData, \"oldData was null.\");\n      var baseText = \"Cannot unlink node #\".concat(oldData._key, \", since \");\n      AssertV(IsUserCreatorOrMod(this.userInfo.id, oldData), \"\".concat(baseText, \"you are not its owner. (or a mod)\"));\n      AssertV(this.allowOrphaning || CE(oldData.parents || {}).VKeys().length > 1, \"\".concat(baseText, \"doing so would orphan it. Try deleting it instead.\"));\n      AssertV(!IsRootNode(oldData), \"\".concat(baseText, \"it's the root-node of a map.\"));\n      AssertV(!IsNodeSubnode(oldData), \"\".concat(baseText, \"it's a subnode. Try deleting it instead.\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload2 = this.payload,\n          parentID = _this$payload2.parentID,\n          childID = _this$payload2.childID;\n      var updates = {};\n      updates[\"nodes/\".concat(childID, \"/.parents/.\").concat(parentID)] = null;\n      updates[\"nodes/\".concat(parentID, \"/.children/.\").concat(childID)] = null;\n\n      if (this.parent_oldChildrenOrder) {\n        updates[\"nodes/\".concat(parentID, \"/.childrenOrder\")] = CE(CE(this.parent_oldChildrenOrder).Except(childID)).IfEmptyThen(null);\n      }\n\n      return updates;\n    }\n  }]);\n\n  return UnlinkNode;\n}(Command);\n\nUnlinkNode = __decorate([MapEdit, UserEdit], UnlinkNode);\nexport { UnlinkNode };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { E, OmitIfFalsy, CE, ObjectCE } from \"js-vextensions\";\nimport { AssertV, Command, MergeDBUpdates, AV } from \"mobx-firelink\";\nimport { AddChildNode } from \"./AddChildNode\";\nimport { DeleteNode } from \"./DeleteNode\";\nimport { LinkNode } from \"./LinkNode\";\nimport { UnlinkNode } from \"./UnlinkNode\";\nimport { ClaimForm, Polarity, MapNode } from \"../Store/firebase/nodes/@MapNode\";\nimport { GetNodeL3, GetNodeL2, IsPremiseOfMultiPremiseArgument, IsSinglePremiseArgument } from \"../Store/firebase/nodes/$node\";\nimport { GetParentNodeL3, GetHolderType, GetParentNodeID, GetNode } from \"../Store/firebase/nodes\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\nimport { GetMap } from \"../Store/firebase/maps\";\nimport { CanContributeToNode } from \"../Store/firebase/users/$user\";\nimport { MeID } from \"../Store/firebase/users\";\nimport { MapNodeRevision } from \"../Store/firebase/nodes/@MapNodeRevision\";\nimport { SearchUpFromNodeForNodeMatchingX } from \"../Utils/Store/PathFinder\";\nexport function CreateLinkCommand(mapID, draggedNodePath, dropOnNodePath, polarity, asCopy) {\n  var draggedNode = GetNodeL3(draggedNodePath);\n  var dropOnNode = GetNodeL3(dropOnNodePath); // const draggedNode_parent = GetParentNodeL3(draggedNodePath);\n\n  var dropOnNode_parent = GetParentNodeL3(dropOnNodePath);\n  var holderType = GetHolderType(dropOnNode.type, dropOnNode_parent ? dropOnNode_parent.type : null);\n  var formForClaimChildren = dropOnNode.type == MapNodeType.Category ? ClaimForm.YesNoQuestion : ClaimForm.Base;\n  return new LinkNode_HighLevel({\n    mapID: mapID,\n    oldParentID: GetParentNodeID(draggedNodePath),\n    newParentID: dropOnNode._key,\n    nodeID: draggedNode._key,\n    newForm: draggedNode.type == MapNodeType.Claim ? formForClaimChildren : null,\n    newPolarity: polarity,\n    allowCreateWrapperArg: holderType != null || !dropOnNode.multiPremiseArgument,\n    unlinkFromOldParent: !asCopy,\n    deleteEmptyArgumentWrapper: true\n  });\n}\nexport var LinkNode_HighLevel =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(LinkNode_HighLevel, _Command);\n\n  function LinkNode_HighLevel() {\n    _classCallCheck(this, LinkNode_HighLevel);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinkNode_HighLevel).apply(this, arguments));\n  }\n\n  _createClass(LinkNode_HighLevel, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a, _b, _c, _d;\n\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          oldParentID = _this$payload.oldParentID,\n          newParentID = _this$payload.newParentID,\n          nodeID = _this$payload.nodeID,\n          newForm = _this$payload.newForm,\n          allowCreateWrapperArg = _this$payload.allowCreateWrapperArg,\n          unlinkFromOldParent = _this$payload.unlinkFromOldParent,\n          deleteEmptyArgumentWrapper = _this$payload.deleteEmptyArgumentWrapper,\n          newPolarity = _this$payload.newPolarity;\n      AssertV(oldParentID !== nodeID, \"Old parent-id and child-id cannot be the same!\");\n      AssertV(newParentID !== nodeID, \"New parent-id and child-id cannot be the same!\"); //AssertV(oldParentID !== newParentID, \"Old-parent-id and new-parent-id cannot be the same!\");\n\n      this.returnData = {};\n      this.map_data = AV.NonNull = GetMap(mapID);\n      this.node_data = AV.NonNull = GetNodeL2(nodeID);\n      var oldParent_data = GetNodeL2(oldParentID); //AssertV(oldParent_data, \"oldParent_data is null.\"); // commented: allow linking orphaned nodes\n\n      this.newParent_data = AV.NonNull = GetNodeL2(newParentID);\n      var pastingPremiseAsRelevanceArg = IsPremiseOfMultiPremiseArgument(this.node_data, oldParent_data) && allowCreateWrapperArg;\n      AssertV(oldParentID !== newParentID || pastingPremiseAsRelevanceArg, \"Old-parent-id and new-parent-id cannot be the same! (unless changing between truth-arg and relevance-arg)\");\n      AssertV(CanContributeToNode(MeID(), newParentID), \"Cannot paste under a node with contributions disabled.\"); // if (command.payload.unlinkFromOldParent && node.parents.VKeys().length == 1 && newParentPath.startsWith(draggedNodePath)) {\n\n      /* if (unlinkFromOldParent && newParentPath.startsWith(draggedNodePath)) {\r\n          return \"Cannot move a node to a path underneath itself. (the move could orphan it and its descendants, if the new-parent's only anchoring was through the dragged-node)\";\r\n      } */\n\n      if (unlinkFromOldParent) {\n        var closestMapRootNode = this.newParent_data.rootNodeForMap ? newParentID : SearchUpFromNodeForNodeMatchingX(newParentID, function (id) {\n          var _a;\n\n          return ((_a = GetNode(id)) === null || _a === void 0 ? void 0 : _a.rootNodeForMap) != null;\n        }, [nodeID]);\n        AssertV(closestMapRootNode != null, \"Cannot move a node to a path that would orphan it.\");\n      }\n\n      var newParentID_forClaim = newParentID;\n      var canCreateWrapperArg = this.node_data.type === MapNodeType.Claim && ObjectCE(this.newParent_data.type).IsOneOf(MapNodeType.Claim, MapNodeType.Argument);\n\n      if (canCreateWrapperArg) {\n        var createWrapperArg = canCreateWrapperArg && allowCreateWrapperArg;\n\n        if (createWrapperArg) {\n          // Assert(newPolarity, 'Since this command has to create a wrapper-argument, you must supply the newPolarity property.');\n          newPolarity = newPolarity || Polarity.Supporting; // if new-polarity isn't supplied, just default to Supporting (this can happen if a claim is copied from search-results)\n\n          var argumentWrapper = new MapNode({\n            type: MapNodeType.Argument,\n            ownerMapID: OmitIfFalsy(this.newParent_data.ownerMapID)\n          });\n          var argumentWrapperRevision = new MapNodeRevision(this.map_data.nodeDefaults);\n          this.sub_addArgumentWrapper = (_a = this.sub_addArgumentWrapper, _a !== null && _a !== void 0 ? _a : new AddChildNode({\n            mapID: mapID,\n            parentID: newParentID,\n            node: argumentWrapper,\n            revision: argumentWrapperRevision,\n            // link: E({ _: true }, newPolarity && { polarity: newPolarity }) as any,\n            link: E({\n              _: true,\n              polarity: newPolarity\n            })\n          }).MarkAsSubcommand(this));\n          this.sub_addArgumentWrapper.Validate();\n          this.returnData.argumentWrapperID = this.sub_addArgumentWrapper.sub_addNode.nodeID;\n          newParentID_forClaim = this.sub_addArgumentWrapper.sub_addNode.nodeID;\n        } else {\n          var mustCreateWrapperArg = canCreateWrapperArg && !this.newParent_data.multiPremiseArgument;\n          AssertV(mustCreateWrapperArg === false, \"Linking node #\".concat(nodeID, \" under #\").concat(newParentID, \" requires creating a wrapper-arg, but this was disallowed by passed prop.\"));\n        }\n      }\n\n      this.sub_linkToNewParent = (_b = this.sub_linkToNewParent, _b !== null && _b !== void 0 ? _b : new LinkNode({\n        mapID: mapID,\n        parentID: newParentID_forClaim,\n        childID: nodeID,\n        childForm: newForm,\n        childPolarity: newPolarity\n      }).MarkAsSubcommand(this));\n      this.sub_linkToNewParent.Validate();\n\n      if (unlinkFromOldParent) {\n        this.sub_unlinkFromOldParent = (_c = this.sub_unlinkFromOldParent, _c !== null && _c !== void 0 ? _c : new UnlinkNode({\n          mapID: mapID,\n          parentID: oldParentID,\n          childID: nodeID\n        }).MarkAsSubcommand(this));\n        this.sub_unlinkFromOldParent.allowOrphaning = true; // allow \"orphaning\" of nodeID, since we're going to reparent it simultaneously -- using the sub_linkToNewParent subcommand\n\n        this.sub_unlinkFromOldParent.Validate(); // if the old parent was a single-premise argument, and the moved node was its only child, also delete the old parent\n\n        if (deleteEmptyArgumentWrapper && IsSinglePremiseArgument(oldParent_data) && CE(oldParent_data.children).VKeys().length === 1) {\n          this.sub_deleteOldParent = (_d = this.sub_deleteOldParent, _d !== null && _d !== void 0 ? _d : new DeleteNode({\n            mapID: mapID,\n            nodeID: oldParentID\n          }).MarkAsSubcommand(this));\n          this.sub_deleteOldParent.childrenToIgnore = [nodeID]; // let DeleteNode sub that it doesn't need to wait for nodeID to be deleted (since we're moving it out from old-parent simultaneously with old-parent's deletion)\n\n          this.sub_deleteOldParent.Validate();\n        }\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = {};\n      if (this.sub_unlinkFromOldParent) updates = MergeDBUpdates(updates, this.sub_unlinkFromOldParent.GetDBUpdates());\n      if (this.sub_deleteOldParent) updates = MergeDBUpdates(updates, this.sub_deleteOldParent.GetDBUpdates());\n      if (this.sub_addArgumentWrapper) updates = MergeDBUpdates(updates, this.sub_addArgumentWrapper.GetDBUpdates());\n      updates = MergeDBUpdates(updates, this.sub_linkToNewParent.GetDBUpdates());\n      return updates;\n    }\n  }]);\n\n  return LinkNode_HighLevel;\n}(Command);\nLinkNode_HighLevel.defaultPayload = {\n  allowCreateWrapperArg: true\n};","import { GetNode } from \"../../Store/firebase/nodes\";\nimport { CE } from \"js-vextensions\";\nexport function SearchUpFromNodeForNodeMatchingX(startNodeID, xMatchFunc, nodeIDsToIgnore) {\n  var _a; // return CachedTransform_WithStore('GetShortestPathFromRootToNode', [rootNodeID, node._key], {}, () => {\n\n\n  var startNode = GetNode(startNodeID); // call this so cache system knows to recalculate when node-data changes\n\n  if (startNode == null) return null; // let currentLayerHeads: Head[] = (startNode.parents || {}).VKeys().map((id) => ({ id, path: [id, startNodeID] }));\n\n  var currentLayerHeads = [{\n    id: startNode._key,\n    path: [startNode._key]\n  }];\n\n  while (currentLayerHeads.length) {\n    // first, check if any current-layer-head nodes are the root-node (if so, return right away, as we found a shortest path)\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = currentLayerHeads[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var layerHead = _step.value;\n\n        if (xMatchFunc(layerHead.id)) {\n          return layerHead.path.join(\"/\");\n        }\n      } // else, find new-layer-heads for next search loop\n\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    var newLayerHeads = [];\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = currentLayerHeads[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var _layerHead = _step2.value;\n        var node = GetNode(_layerHead.id);\n        if (node == null) return null;\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = CE(node.parents || {}).VKeys()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var parentID = _step3.value;\n            if (_layerHead.path.includes(parentID)) continue; // parent-id is already part of path; ignore, so we don't cause infinite-loop\n\n            if ((_a = nodeIDsToIgnore) === null || _a === void 0 ? void 0 : _a.includes(parentID)) continue;\n            newLayerHeads.push({\n              id: parentID,\n              path: [parentID].concat(_layerHead.path)\n            });\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    currentLayerHeads = newLayerHeads;\n  }\n\n  return null; // });\n}\n/* export function CreateMapViewForPath(path: string): MapView {\r\n    const pathNodes = GetPathNodes(path);\r\n    const result = new MapView();\r\n    result.rootNodeViews[pathNodes[0]] = CreateNodeViewForPath(pathNodes.Skip(1));\r\n    return result;\r\n}\r\nexport function CreateNodeViewForPath(pathFromSelfToDescendent: string[]): MapNodeView {\r\n    const result = new MapNodeView();\r\n    result.expanded = true;\r\n\r\n    if (pathFromSelfToDescendent.length) {\r\n        // Assert(IsNumber(pathFromSelfToDescendent[0]), \"pathFromSelfToDescendent must contain only numbers.\");\r\n        const nextNodeStr = pathFromSelfToDescendent[0];\r\n        const childNodeView = CreateNodeViewForPath(pathFromSelfToDescendent.Skip(1));\r\n        result.children[nextNodeStr] = childNodeView;\r\n    } else {\r\n        result.selected = true;\r\n        result.focused = true;\r\n        result.viewOffset = new Vector2i(200, 0);\r\n    }\r\n\r\n    return result;\r\n} */","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit } from \"../CommandMacros\";\nimport { E } from \"js-vextensions\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { LinkNode_HighLevel } from \"./LinkNode_HighLevel\";\nimport { GetNode } from \"../Store/firebase/nodes\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\n\nvar LinkNode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(LinkNode, _Command);\n\n  function LinkNode() {\n    _classCallCheck(this, LinkNode);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinkNode).apply(this, arguments));\n  }\n\n  _createClass(LinkNode, [{\n    key: \"Validate\",\n\n    /* async Prepare(parent_oldChildrenOrder_override?: number[]) {\r\n        let {parentID, childID, childForm} = this.payload;\r\n        this.parent_oldChildrenOrder = parent_oldChildrenOrder_override || await GetDataAsync(`nodes/${parentID}/.childrenOrder`) as number[];\r\n    } */\n    value: function Validate() {\n      var _a, _b, _c, _d, _e;\n\n      var _this$payload = this.payload,\n          parentID = _this$payload.parentID,\n          childID = _this$payload.childID;\n      AssertV(parentID != childID, \"Parent-id and child-id cannot be the same!\");\n      this.child_oldData = GetNode(childID);\n      AssertV(this.child_oldData || this.parentCommand != null, \"Child does not exist!\");\n      this.parent_oldData = (_b = this.parentCommand instanceof LinkNode_HighLevel && this == this.parentCommand.sub_linkToNewParent ? (_a = this.parentCommand.sub_addArgumentWrapper) === null || _a === void 0 ? void 0 : _a.payload.node : null, _b !== null && _b !== void 0 ? _b : GetNode(parentID));\n      AssertV(this.parent_oldData || this.parentCommand != null, \"Parent does not exist!\");\n\n      if (this.parent_oldData) {\n        AssertV(!((_c = this.parent_oldData.childrenOrder) === null || _c === void 0 ? void 0 : _c.includes(childID)), \"Node #\".concat(childID, \" is already a child of node #\").concat(parentID, \".\"));\n      }\n\n      if (((_d = this.child_oldData) === null || _d === void 0 ? void 0 : _d.ownerMapID) != null) {\n        AssertV(((_e = this.parent_oldData) === null || _e === void 0 ? void 0 : _e.ownerMapID) == this.child_oldData.ownerMapID, \"Cannot paste private node #\".concat(childID, \" into a map not matching its owner map (\").concat(this.child_oldData.ownerMapID, \").\"));\n        /* const newMap = GetMap(this.parent_oldData.ownerMapID);\r\n        AssertV(newMap, 'newMap not yet loaded.');\r\n        if (newMap.requireMapEditorsCanEdit) */\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload2 = this.payload,\n          parentID = _this$payload2.parentID,\n          childID = _this$payload2.childID,\n          childForm = _this$payload2.childForm,\n          childPolarity = _this$payload2.childPolarity;\n      var updates = {}; // add parent as parent-of-child\n\n      updates[\"nodes/\".concat(childID, \"/.parents/.\").concat(parentID)] = {\n        _: true\n      }; // add child as child-of-parent\n\n      updates[\"nodes/\".concat(parentID, \"/.children/.\").concat(childID)] = E({\n        _: true\n      }, childForm && {\n        form: childForm\n      }, childPolarity && {\n        polarity: childPolarity\n      });\n\n      if (this.parent_oldData && this.parent_oldData.type == MapNodeType.Argument) {\n        updates[\"nodes/\".concat(parentID, \"/.childrenOrder\")] = (this.parent_oldData.childrenOrder || []).concat([childID]);\n      }\n\n      return updates;\n    }\n  }]);\n\n  return LinkNode;\n}(Command);\n\nLinkNode = __decorate([MapEdit, UserEdit], LinkNode);\nexport { LinkNode };","import _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { DEL, E, Clone, CE } from \"js-vextensions\";\nimport { MergeDBUpdates, SplitStringBySlash_Cached, Command, AssertV, AV } from \"mobx-firelink\";\nimport { AddChildNode } from \"./AddChildNode\";\nimport { LinkNode } from \"./LinkNode\";\nimport { GetNodeL2, GetNodeForm, GetLinkAtPath } from \"../Store/firebase/nodes/$node\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\nexport var CloneNode =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(CloneNode, _Command);\n\n  function CloneNode() {\n    _classCallCheck(this, CloneNode);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CloneNode).apply(this, arguments));\n  }\n\n  _createClass(CloneNode, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          baseNodePath = _this$payload.baseNodePath,\n          newParentID = _this$payload.newParentID; // prepare add-node\n      // ==========\n\n      var baseNodeID = CE(SplitStringBySlash_Cached(baseNodePath)).Last();\n      var baseNode = AV.NonNull = GetNodeL2(baseNodeID);\n      var isArgument = baseNode.type == MapNodeType.Argument;\n      var nodeForm = AV.NonNull = GetNodeForm(baseNode, baseNodePath);\n      var nodePolarity = AV.NonNull = GetLinkAtPath(baseNodePath).polarity;\n      var newChildNode = Clone(baseNode).VSet({\n        children: DEL,\n        childrenOrder: DEL,\n        currentRevision: DEL,\n        current: DEL,\n        parents: DEL\n      });\n      var newChildRevision = Clone(baseNode.current).VSet({\n        node: DEL\n      });\n      this.sub_addNode = (_a = this.sub_addNode, _a !== null && _a !== void 0 ? _a : new AddChildNode({\n        mapID: mapID,\n        parentID: newParentID,\n        node: newChildNode,\n        revision: newChildRevision,\n        link: E({\n          _: true\n        }, nodeForm && {\n          form: nodeForm\n        }, nodePolarity && {\n          polarity: nodePolarity\n        })\n      }).MarkAsSubcommand(this));\n      this.sub_addNode.Validate(); // prepare link-children\n      // ==========\n\n      var childrenToLink = CE(baseNode.children || {}).VKeys();\n\n      if (isArgument) {\n        // if argument, use childrenOrder instead, since it's sorted\n        childrenToLink = (baseNode.childrenOrder || []).slice();\n        CE(childrenToLink).Remove(baseNode.childrenOrder[0]); // but don't link old-impact-premise\n      }\n\n      this.sub_linkChildren = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = childrenToLink[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var childID = _step.value;\n          var child = GetNodeL2(childID);\n          AssertV(child, \"child (for id \".concat(childID, \") is null.\"));\n          var childForm = GetNodeForm(child, \"\".concat(baseNodePath, \"/\").concat(childID));\n          AssertV(child, \"childForm (for id \".concat(childID, \") is null.\"));\n          var linkChildSub = new LinkNode({\n            mapID: mapID,\n            parentID: this.sub_addNode.sub_addNode.nodeID,\n            childID: childID,\n            childForm: childForm\n          }).MarkAsSubcommand(this); // linkChildSub.Prepare([]);\n\n          /* let dbUpdates = this.GetDBUpdates();\r\n          let node_childrenOrder = dbUpdates[`nodes/${this.sub_addNode.nodeID}/childrenOrder`];\r\n          linkChildSub.Prepare(node_childrenOrder); */\n\n          this.sub_linkChildren.push(linkChildSub);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.returnData = this.sub_addNode.returnData;\n      this.sub_addNode.Validate();\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.sub_linkChildren[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var sub = _step2.value;\n          sub.Validate();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = this.sub_addNode.GetDBUpdates();\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.sub_linkChildren[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var sub = _step3.value;\n          // updates.Extend(sub.GetDBUpdates());\n          updates = MergeDBUpdates(updates, sub.GetDBUpdates());\n        } // override the setting of new-node/childrenOrder (otherwise each link-node sub-command tries to set it to: [old-list] + [its-own-child])\n        // updates[`nodes/${this.sub_addNode.nodeID}/childrenOrder`] = this.sub_linkChildren.map(a=>a.payload.childID);\n\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      if (this.sub_addNode.payload.node.type == MapNodeType.Argument) {\n        var childrenOrder = [];\n        childrenOrder.push.apply(childrenOrder, _toConsumableArray(this.sub_linkChildren.map(function (a) {\n          return a.payload.childID;\n        })));\n        updates[\"nodes/\".concat(this.sub_addNode.sub_addNode.nodeID)].childrenOrder = childrenOrder;\n      }\n\n      return updates;\n    }\n  }]);\n\n  return CloneNode;\n}(Command);","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command } from \"mobx-firelink\";\nimport { GetImage } from \"../Store/firebase/images\";\n\nvar DeleteImage =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteImage, _Command);\n\n  function DeleteImage() {\n    _classCallCheck(this, DeleteImage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteImage).apply(this, arguments));\n  }\n\n  _createClass(DeleteImage, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var id = this.payload.id;\n      this.oldData = GetImage(id);\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n\n      var updates = _defineProperty({}, \"images/\".concat(id), null);\n\n      return updates;\n    }\n  }]);\n\n  return DeleteImage;\n}(Command);\n\nDeleteImage = __decorate([UserEdit], DeleteImage);\nexport { DeleteImage };","import _slicedToArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AssertV, AV, Command, GetDocs } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetLayer, ForDeleteLayer_GetError } from \"../Store/firebase/layers\";\n\nvar DeleteLayer =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteLayer, _Command);\n\n  function DeleteLayer() {\n    _classCallCheck(this, DeleteLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteLayer).apply(this, arguments));\n  }\n\n  _createClass(DeleteLayer, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var layerID = this.payload.layerID; // this.oldData = await GetDoc_Async({}, (a) => a.layers.get(layerID));\n\n      this.oldData = AV.NonNull = GetLayer(layerID);\n      this.userMapInfoSets = AV.NonNull = GetDocs({\n        resultForLoading: undefined\n      }, function (a) {\n        return a.userMapInfo;\n      });\n      var earlyError = ForDeleteLayer_GetError(this.userInfo.id, this.oldData);\n      AssertV(earlyError == null, earlyError);\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var layerID = this.payload.layerID;\n      var updates = {};\n      updates[\"layers/\".concat(layerID)] = null;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.oldData.mapsWhereEnabled.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var mapID = _step.value;\n          updates[\"maps/\".concat(mapID, \"/.layers/.\").concat(layerID)] = null;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.userMapInfoSets[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var userMapInfoSet = _step2.value;\n          var userID = userMapInfoSet._key;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = userMapInfoSet.maps.entries()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var _step3$value = _slicedToArray(_step3.value, 2),\n                  mapID2 = _step3$value[0],\n                  userMapInfo = _step3$value[1];\n\n              if (userMapInfo.layerStates[layerID] != null) {\n                updates[\"userMapInfo/\".concat(userID, \"/.\").concat(mapID2, \"/.layerStates/.\").concat(layerID)] = null;\n              }\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return updates;\n    }\n  }]);\n\n  return DeleteLayer;\n}(Command);\n\nDeleteLayer = __decorate([UserEdit], DeleteLayer);\nexport { DeleteLayer };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { MergeDBUpdates, GetDocs, AssertV, Command } from \"mobx-firelink\";\nimport { DeleteNode } from \"./DeleteNode\";\nimport { GetMap } from \"../Store/firebase/maps\";\nimport { CE } from \"js-vextensions\";\n\nvar DeleteMap =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteMap, _Command);\n\n  function DeleteMap() {\n    _classCallCheck(this, DeleteMap);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteMap).apply(this, arguments));\n  }\n\n  _createClass(DeleteMap, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var mapID = this.payload.mapID;\n      this.oldData = GetMap(mapID);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.userMapInfoSets = GetDocs({}, function (a) {\n        return a.userMapInfo;\n      }) || [];\n      this.sub_deleteNode = (_a = this.sub_deleteNode, _a !== null && _a !== void 0 ? _a : new DeleteNode({\n        mapID: mapID,\n        nodeID: this.oldData.rootNode\n      }).MarkAsSubcommand(this));\n      this.sub_deleteNode.asPartOfMapDelete = true;\n      this.sub_deleteNode.Validate(); // todo: use parents recursion on l2 nodes to make sure they're all connected to at least one other map root\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var mapID = this.payload.mapID;\n      var updates = this.sub_deleteNode.GetDBUpdates();\n      var newUpdates = {};\n      newUpdates[\"maps/\".concat(mapID)] = null;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.userMapInfoSets[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var userMapInfoSet = _step.value;\n          var userID = userMapInfoSet._key;\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = CE(userMapInfoSet.maps).Pairs()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var _step2$value = _step2.value,\n                  mapID2 = _step2$value.key,\n                  userMapInfo = _step2$value.value;\n\n              if (mapID2 == mapID) {\n                newUpdates[\"userMapInfo/\".concat(userID, \"/.\").concat(mapID)] = null;\n              }\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        } // delete entry in mapNodeEditTimes\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      newUpdates[\"mapNodeEditTimes/\".concat(mapID)] = null;\n      updates = MergeDBUpdates(updates, newUpdates);\n      return updates;\n    }\n  }]);\n\n  return DeleteMap;\n}(Command);\n\nDeleteMap = __decorate([UserEdit], DeleteMap);\nexport { DeleteMap };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AV, Command } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetNodeTag } from \"../Store/firebase/nodeTags\";\n\nvar DeleteNodeTag =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteNodeTag, _Command);\n\n  function DeleteNodeTag() {\n    _classCallCheck(this, DeleteNodeTag);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteNodeTag).apply(this, arguments));\n  }\n\n  _createClass(DeleteNodeTag, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var id = this.payload.id;\n      this.oldData = AV.NonNull = GetNodeTag(id);\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n\n      var updates = _defineProperty({}, \"nodeTags/\".concat(id), null);\n\n      return updates;\n    }\n  }]);\n\n  return DeleteNodeTag;\n}(Command);\n\nDeleteNodeTag = __decorate([UserEdit], DeleteNodeTag);\nexport { DeleteNodeTag };","import { WhereOp, GetDoc, GetDocs, StoreAccessor } from \"mobx-firelink\";\nexport var GetNodePhrasings = StoreAccessor(function (s) {\n  return function (nodeID) {\n    /* const entryMap = GetData({ collection: true }, 'nodePhrasings');\r\n    return entryMap ? entryMap.VValues(true).filter((a) => a && a.node == nodeID) : []; */\n    // store.fire.db.nodePhrasings.Get();\n    return GetDocs({\n      queryOps: [new WhereOp(\"node\", \"==\", nodeID)]\n    }, function (a) {\n      return a.nodePhrasings;\n    });\n  };\n});\n/* export function GetPhrasings(nodeID: string): MapNodePhrasing[] {\r\n    const entryMap = GetData({ collection: true }, 'nodePhrasings', nodeID, 'phrasings');\r\n    return CachedTransform('GetPhrasings', [], entryMap, () => (entryMap ? entryMap.VValues(true) : []));\r\n} */\n\nexport var GetNodePhrasing = StoreAccessor(function (s) {\n  return function (phrasingID) {\n    return GetDoc({}, function (a) {\n      return a.nodePhrasings.get(phrasingID);\n    });\n  };\n});","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AssertV, Command } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetNodePhrasing } from \"../Store/firebase/nodePhrasings\";\n\nvar DeletePhrasing =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeletePhrasing, _Command);\n\n  function DeletePhrasing() {\n    _classCallCheck(this, DeletePhrasing);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeletePhrasing).apply(this, arguments));\n  }\n\n  _createClass(DeletePhrasing, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var id = this.payload.id;\n      this.oldData = GetNodePhrasing(id);\n      AssertV(this.oldData, \"oldData is null\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n\n      var updates = _defineProperty({}, \"nodePhrasings/\".concat(id), null);\n\n      return updates;\n    }\n  }]);\n\n  return DeletePhrasing;\n}(Command);\n\nDeletePhrasing = __decorate([UserEdit], DeletePhrasing);\nexport { DeletePhrasing };","import { IsNaN, emptyArray, emptyArray_forLoading, Assert, CE } from \"js-vextensions\";\nimport { GetDoc, GetDocs, StoreAccessor, WhereOp } from \"mobx-firelink\";\nimport { GetNodeRevision } from \"./nodeRevisions\";\nexport var GetTerm = StoreAccessor(function (s) {\n  return function (id) {\n    if (id == null || IsNaN(id)) return null;\n    return GetDoc({}, function (a) {\n      return a.terms.get(id);\n    });\n  };\n});\n/* export async function GetTermAsync(id: string) {\r\n    return await GetDoc_Async((a) => a.terms.get(id));\r\n} */\n\nexport var GetTerms = StoreAccessor(function (s) {\n  return function () {\n    return GetDocs({}, function (a) {\n      return a.terms;\n    });\n  };\n});\nexport var GetTermsByName = StoreAccessor(function (s) {\n  return function (name) {\n    return GetDocs({\n      queryOps: [new WhereOp(\"name\", \"==\", name)]\n    }, function (a) {\n      return a.terms;\n    });\n  };\n});\nexport var GetTermsByForm = StoreAccessor(function (s) {\n  return function (form) {\n    Assert(form.toLowerCase() == form, \"Form cannot have uppercase characters.\");\n    return GetDocs({\n      queryOps: [new WhereOp(\"forms\", \"array-contains\", form)]\n    }, function (a) {\n      return a.terms;\n    });\n  };\n});\nexport var GetTermsAttached = StoreAccessor(function (s) {\n  return function (nodeRevisionID) {\n    var emptyForLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var _a, _b;\n\n    var revision = GetNodeRevision(nodeRevisionID);\n    if (revision == null) return emptyArray; //const terms = revision.termAttachments?.map(a=>GetTerm(a.id)) ?? emptyArray;\n\n    var terms = (_b = (_a = revision.termAttachments) === null || _a === void 0 ? void 0 : _a.map(function (attachment) {\n      return GetDoc({}, function (a) {\n        return a.terms.get(attachment.id);\n      });\n    }), _b !== null && _b !== void 0 ? _b : emptyArray);\n    if (emptyForLoading && CE(terms).Any(function (a) {\n      return a === undefined;\n    })) return emptyArray_forLoading;\n    return terms;\n  };\n}); // \"P\" stands for \"pure\" (though really means something like \"pure + synchronous\")\n\nexport function GetFullNameP(term) {\n  return term.name + (term.disambiguation ? \" (\".concat(term.disambiguation, \")\") : \"\");\n}\n/*export const GetTermVariantNumber = StoreAccessor(s=>(term: Term): number=>{\r\n    const termsWithSameName_map = GetDoc({}, a=>a.termNames.get(term.name));\r\n    if (termsWithSameName_map == null) return 1;\r\n    const termsWithSameNameAndLowerIDs = termsWithSameName_map.VKeys().map(a=>a).filter(a=>a < term._key);\r\n    return 1 + termsWithSameNameAndLowerIDs.length;\r\n});*/","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetTerm } from \"../Store/firebase/terms\";\n\nvar DeleteTerm =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteTerm, _Command);\n\n  function DeleteTerm() {\n    _classCallCheck(this, DeleteTerm);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteTerm).apply(this, arguments));\n  }\n\n  _createClass(DeleteTerm, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var termID = this.payload.termID;\n      this.oldData = GetTerm(termID);\n      AssertV(this.oldData, \"oldData is null.\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _updates;\n\n      var termID = this.payload.termID;\n      var updates = (_updates = {}, _defineProperty(_updates, \"terms/\".concat(termID), null), _defineProperty(_updates, \"termNames/\".concat(this.oldData.name.toLowerCase(), \"/.\").concat(termID), null), _updates);\n      return updates;\n    }\n  }]);\n\n  return DeleteTerm;\n}(Command);\n\nDeleteTerm = __decorate([UserEdit], DeleteTerm);\nexport { DeleteTerm };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AV } from \"mobx-firelink\";\nimport { GetTimeline } from \"../Store/firebase/timelines\";\n\nvar DeleteTimeline =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteTimeline, _Command);\n\n  function DeleteTimeline() {\n    _classCallCheck(this, DeleteTimeline);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteTimeline).apply(this, arguments));\n  }\n\n  _createClass(DeleteTimeline, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var timelineID = this.payload.timelineID;\n      this.oldData = AV.NonNull = GetTimeline(timelineID);\n\n      if (this.oldData.steps) {\n        throw new Error(\"Cannot delete a timeline until all its steps have been deleted.\");\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var timelineID = this.payload.timelineID;\n      var updates = {};\n      updates[\"timelines/\".concat(timelineID)] = null;\n      updates[\"maps/\".concat(this.oldData.mapID, \"/.timelines/.\").concat(timelineID)] = null;\n      return updates;\n    }\n  }]);\n\n  return DeleteTimeline;\n}(Command);\n\nDeleteTimeline = __decorate([UserEdit], DeleteTimeline);\nexport { DeleteTimeline };","import _slicedToArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { ToNumber, emptyArray_forLoading, CE } from \"js-vextensions\";\nimport { GetDoc, StoreAccessor } from \"mobx-firelink\";\nimport { GetNode, GetNodeChildren } from \"./nodes\";\nexport var GetTimelineStep = StoreAccessor(function (s) {\n  return function (id) {\n    if (id == null) return null;\n    return GetDoc({}, function (a) {\n      return a.timelineSteps.get(id);\n    });\n  };\n});\nexport var GetTimelineSteps = StoreAccessor(function (s) {\n  return function (timeline) {\n    var emptyForLoading = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var steps = (timeline.steps || []).map(function (id) {\n      return GetTimelineStep(id);\n    });\n    if (!emptyForLoading && CE(steps).Any(function (a) {\n      return a == null;\n    })) return emptyArray_forLoading;\n    return steps;\n  };\n});\nexport var GetNodeRevealTimesInSteps = StoreAccessor(function (s) {\n  return function (steps) {\n    var baseOnLastReveal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var nodeRevealTimes = {};\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = steps.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            index = _step$value[0],\n            step = _step$value[1];\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          var _loop = function _loop() {\n            var reveal = _step2.value;\n\n            if (reveal.show) {\n              var stepTime_safe = step.videoTime != null ? step.videoTime : CE(steps.slice(0, index).map(function (a) {\n                return a.videoTime;\n              })).LastOrX(function (a) {\n                return a != null;\n              });\n\n              if (baseOnLastReveal) {\n                nodeRevealTimes[reveal.path] = Math.max(stepTime_safe, ToNumber(nodeRevealTimes[reveal.path], 0));\n              } else {\n                nodeRevealTimes[reveal.path] = Math.min(stepTime_safe, ToNumber(nodeRevealTimes[reveal.path], Number.MAX_SAFE_INTEGER));\n              }\n\n              var revealDepth = ToNumber(reveal.show_revealDepth, 0);\n\n              if (revealDepth >= 1) {\n                var node = GetNode(CE(reveal.path.split(\"/\")).Last());\n                if (node == null) return \"continue\"; // todo: fix that a child being null, apparently breaks the GetAsync() call in ActionProcessor.ts (for scrolling to just-revealed nodes)\n\n                var currentChildren = GetNodeChildren(node._key).map(function (child) {\n                  return {\n                    node: child,\n                    path: child && \"\".concat(reveal.path, \"/\").concat(child._key)\n                  };\n                });\n\n                if (CE(currentChildren).Any(function (a) {\n                  return a.node == null;\n                })) {\n                  // if (steps.length == 1 && steps[0]._key == 'clDjK76mSsGXicwd7emriw') debugger;\n                  return {\n                    v: emptyArray_forLoading\n                  };\n                }\n\n                for (var childrenDepth = 1; childrenDepth <= revealDepth; childrenDepth++) {\n                  var nextChildren = [];\n                  var _iteratorNormalCompletion3 = true;\n                  var _didIteratorError3 = false;\n                  var _iteratorError3 = undefined;\n\n                  try {\n                    var _loop2 = function _loop2() {\n                      var child = _step3.value;\n\n                      if (baseOnLastReveal) {\n                        nodeRevealTimes[child.path] = Math.max(stepTime_safe, ToNumber(nodeRevealTimes[child.path], 0));\n                      } else {\n                        nodeRevealTimes[child.path] = Math.min(stepTime_safe, ToNumber(nodeRevealTimes[child.path], Number.MAX_SAFE_INTEGER));\n                      } // if there's another loop/depth after this one\n\n\n                      if (childrenDepth < revealDepth) {\n                        var childChildren = GetNodeChildren(child.node._key).map(function (child2) {\n                          return {\n                            node: child2,\n                            path: child2 && \"\".concat(child.path, \"/\").concat(child2._key)\n                          };\n                        });\n\n                        if (CE(childChildren).Any(function (a) {\n                          return a == null;\n                        })) {\n                          // if (steps.length == 1 && steps[0]._key == 'clDjK76mSsGXicwd7emriw') debugger;\n                          return {\n                            v: {\n                              v: emptyArray_forLoading\n                            }\n                          };\n                        }\n\n                        CE(nextChildren).AddRange(childChildren);\n                      }\n                    };\n\n                    for (var _iterator3 = currentChildren[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                      var _ret2 = _loop2();\n\n                      if (typeof _ret2 === \"object\") return _ret2.v;\n                    }\n                  } catch (err) {\n                    _didIteratorError3 = true;\n                    _iteratorError3 = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                        _iterator3.return();\n                      }\n                    } finally {\n                      if (_didIteratorError3) {\n                        throw _iteratorError3;\n                      }\n                    }\n                  }\n\n                  currentChildren = nextChildren;\n                }\n              }\n            } else if (reveal.hide) {\n              var _iteratorNormalCompletion4 = true;\n              var _didIteratorError4 = false;\n              var _iteratorError4 = undefined;\n\n              try {\n                for (var _iterator4 = CE(nodeRevealTimes).VKeys()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                  var path = _step4.value;\n\n                  if (path.startsWith(reveal.path)) {\n                    delete nodeRevealTimes[path];\n                  }\n                }\n              } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n                    _iterator4.return();\n                  }\n                } finally {\n                  if (_didIteratorError4) {\n                    throw _iteratorError4;\n                  }\n                }\n              }\n            }\n          };\n\n          for (var _iterator2 = (step.nodeReveals || [])[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _ret = _loop();\n\n            switch (_ret) {\n              case \"continue\":\n                continue;\n\n              default:\n                if (typeof _ret === \"object\") return _ret.v;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return nodeRevealTimes;\n  };\n});\nexport var GetNodesRevealedInSteps = StoreAccessor(function (s) {\n  return function (steps) {\n    return CE(GetNodeRevealTimesInSteps(steps)).VKeys();\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AV } from \"mobx-firelink\";\nimport { GetTimelineStep } from \"../Store/firebase/timelineSteps\";\nimport { GetTimeline } from \"../Store/firebase/timelines\";\nimport { CE } from \"js-vextensions\";\n\nvar DeleteTimelineStep =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteTimelineStep, _Command);\n\n  function DeleteTimelineStep() {\n    _classCallCheck(this, DeleteTimelineStep);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteTimelineStep).apply(this, arguments));\n  }\n\n  _createClass(DeleteTimelineStep, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var stepID = this.payload.stepID;\n      this.oldData = AV.NonNull = GetTimelineStep(stepID);\n      var timeline = AV.NonNull = GetTimeline(this.oldData.timelineID);\n      this.timeline_oldSteps = timeline.steps;\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var stepID = this.payload.stepID;\n      var updates = {};\n      updates[\"timelines/\".concat(this.oldData.timelineID, \"/.steps\")] = CE(this.timeline_oldSteps).Except(stepID);\n      updates[\"timelineSteps/\".concat(stepID)] = null;\n      return updates;\n    }\n  }]);\n\n  return DeleteTimelineStep;\n}(Command);\n\nDeleteTimelineStep = __decorate([UserEdit], DeleteTimelineStep);\nexport { DeleteTimelineStep };","import { GetTreeNodesInObjTree, Clone } from \"js-vextensions\"; // for export from old site (see commented code in MI_ExportSubtree.tsx)\n\n/*export class ImportSubtree_Old extends Command<{\r\n    mapID?: string, parentNodeID: string, subtreeJSON: string,\r\n    nodesToLink?: {[key: string]: string},\r\n    importRatings: boolean, importRatings_userIDs?: string[],\r\n}> {\r\n    rootSubtreeData: SubtreeExportData_Old;\r\n\r\n    subs = [] as Command<any, any>[];\r\n    subs_last: Command<any, any>[];\r\n    Validate() {\r\n        AssertV(HasAdminPermissions(this.userInfo.id), \"Only admins can run the import-subtree command.\");\r\n        AssertValidate({\r\n            properties: {\r\n                mapID: {type: \"string\"},\r\n                parentNodeID: {type: \"string\"},\r\n                subtreeJSON: {type: \"string\"},\r\n                nodesToLink: {patternProperties: {\"[0-9]+\": {type: \"string\"}}},\r\n                importRatings: {type: \"boolean\"},\r\n                importRatings_userIDs: {items: {type: \"string\"}},\r\n            },\r\n            required: [\"subtreeJSON\"],\r\n        }, this.payload, \"Payload invalid\");\r\n\r\n        const {subtreeJSON, parentNodeID, nodesToLink} = this.payload;\r\n        this.rootSubtreeData = FromJSON(subtreeJSON);\r\n\r\n        // clear each run, since validate gets called more than once\r\n        this.subs_last = this.subs;\r\n        this.subs = [];\r\n        this.oldID_newID = Clone(nodesToLink) ?? {};\r\n        this.nodeRatingsToAdd = [];\r\n\r\n        this.ProcessSubtree(this.rootSubtreeData, parentNodeID);\r\n    }\r\n\r\n    oldID_newID = {} as {[key: number]: string};\r\n    ProcessSubtree(subtreeData: SubtreeExportData_Old, parentID: string) {\r\n        const {mapID, importRatings, importRatings_userIDs} = this.payload;\r\n\r\n        const node = AsNodeL1(WithoutHelpers(subtreeData).Excluding(\"ratings\", \"childrenData\", \"finalPolarity\", \"currentRevision\", \"parents\", \"children\", \"childrenOrder\"));\r\n        const revision = WithoutHelpers(subtreeData.current).Excluding(\"node\", \"approved\", \"relative\", \"voteLevel\") as MapNodeRevision;\r\n        if (revision.image) revision.image.id = `${revision.image.id}`;\r\n        if (revision[\"contentNode\"]) {\r\n            revision.VSet({quote: revision[\"contentNode\"], contentNode: DEL});\r\n            if (revision.quote.sourceChains.length) {\r\n                revision.quote.sourceChains = (revision.quote.sourceChains as any as Source[][]).map(sourceChainSources=>{\r\n                    return {sources: sourceChainSources};\r\n                });\r\n            }\r\n        }\r\n\r\n        const oldID = subtreeData[\"_id\"];\r\n        if (this.oldID_newID[oldID]) {\r\n            const newID = this.oldID_newID[oldID];\r\n            //const linkNodeCommand = new LinkNode_HighLevel({mapID, parentID, node, revision}).MarkAsSubcommand(this);\r\n            const linkNodeCommand = (this.subs_last[this.subs.length] as LinkNode) ?? new LinkNode({mapID, parentID, childID: newID, childForm: subtreeData.link.form, childPolarity: subtreeData.link.polarity}).MarkAsSubcommand(this);\r\n            linkNodeCommand.Validate();\r\n            this.subs.push(linkNodeCommand);\r\n        } else {\r\n            const addNodeCommand = (this.subs_last[this.subs.length] as AddChildNode) ?? new AddChildNode({mapID, parentID, node, revision, link: WithoutHelpers(subtreeData.link)}).MarkAsSubcommand(this);\r\n            addNodeCommand.Validate();\r\n            this.oldID_newID[oldID] = addNodeCommand.sub_addNode.nodeID;\r\n            this.subs.push(addNodeCommand);\r\n\r\n            for (const pair of CE(subtreeData.childrenData).Pairs()) {\r\n                this.ProcessSubtree(pair.value, addNodeCommand.sub_addNode.nodeID);\r\n            }\r\n\r\n            if (subtreeData.childrenOrder) {\r\n                //node.childrenOrder = subtreeData.childrenOrder.map(oldID=>{\r\n                addNodeCommand.sub_addNode.payload.node.childrenOrder = subtreeData.childrenOrder.SelectMany(oldChildID=>{\r\n                    //AssertV(this.oldID_newID[oldID], `Cannot find newID for oldID: ${oldID}`);\r\n                    // data from old site has childrenOrder's with deleted node-ids -- so just leave out the missing ones\r\n                    if (this.oldID_newID[oldChildID] == null) return [];\r\n                    return [this.oldID_newID[oldChildID]];\r\n                });\r\n            }\r\n        }\r\n\r\n        if (importRatings && subtreeData.ratings) {\r\n            for (let {key: ratingType, value: ratingsByUser} of subtreeData.ratings.Pairs()) {\r\n                if (Validate(\"RatingType\", ratingType) != null) continue;\r\n                for (let {key: userID, value: rating} of ratingsByUser.Pairs()) {\r\n                    if (Validate(\"UserID\", userID) != null) continue;\r\n                    if (importRatings_userIDs != null && !importRatings_userIDs.Contains(userID)) continue;\r\n                    let newNodeID = this.oldID_newID[oldID];\r\n                    //let addRatingCommand = new SetNodeRating({nodeID: newNodeID, ratingType: ratingType as RatingType, value: rating.value, userID}).MarkAsSubcommand(this);\r\n                    this.nodeRatingsToAdd.push({ratingType: ratingType as RatingType, userID, nodeID: newNodeID, updated: rating.updated, value: rating.value});\r\n                }\r\n            }\r\n        }\r\n    }\r\n    nodeRatingsToAdd = [] as (Rating & {nodeID: string, ratingType: RatingType, userID: string})[];\r\n\r\n    GetDBUpdates() {\r\n        let updates = {};\r\n        for (const sub of this.subs) {\r\n            updates = MergeDBUpdates(updates, sub.GetDBUpdates());\r\n        }\r\n        for (let ratingEnhanced of this.nodeRatingsToAdd) {\r\n            updates[`nodeRatings/${ratingEnhanced.nodeID}/${ratingEnhanced.ratingType}/${ratingEnhanced.userID}`] = ratingEnhanced.Excluding(\"nodeID\", \"ratingType\", \"userID\");\r\n        }\r\n        return updates;\r\n    }\r\n}*/\n\nvar helperProps = [\"_key\", \"_id\"];\n/** Note: this mutates the original object. */\n\nexport function RemoveHelpers(data) {\n  var treeNodes = GetTreeNodesInObjTree(data, true);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = treeNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var treeNode = _step.value;\n\n      if (helperProps.includes(treeNode.prop)) {\n        delete treeNode.obj[treeNode.prop];\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return data;\n}\nexport function WithoutHelpers(data) {\n  return RemoveHelpers(Clone(data));\n}","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { AssertV, Command, MergeDBUpdates, GenerateUUID } from \"mobx-firelink\";\nimport { AssertValidate, Validate } from \"mobx-firelink\";\nimport { FromJSON, Clone, CE, DEL } from \"js-vextensions\";\nimport { AddChildNode } from \"./AddChildNode\";\nimport { LinkNode } from \"./LinkNode\";\nimport { HasAdminPermissions } from \"../Store/firebase/users/$user\";\nimport { AsNodeL1 } from \"../Store/firebase/nodes/$node\";\nimport { WithoutHelpers } from \"./ImportSubtree_Old\"; // for export from old site (see commented code in MI_ExportSubtree.tsx)\n\nexport var ImportSubtree =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(ImportSubtree, _Command);\n\n  function ImportSubtree() {\n    var _this;\n\n    _classCallCheck(this, ImportSubtree);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ImportSubtree).apply(this, arguments));\n    _this.subs = [];\n    _this.oldID_newID = {};\n    _this.nodeRatingsToAdd = [];\n    return _this;\n  }\n\n  _createClass(ImportSubtree, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertV(HasAdminPermissions(this.userInfo.id), \"Only admins can run the import-subtree command.\");\n      AssertValidate({\n        properties: {\n          mapID: {\n            type: \"string\"\n          },\n          parentNodeID: {\n            type: \"string\"\n          },\n          subtreeJSON: {\n            type: \"string\"\n          },\n          nodesToLink: {\n            patternProperties: {\n              \"[0-9]+\": {\n                type: \"string\"\n              }\n            }\n          },\n          importRatings: {\n            type: \"boolean\"\n          },\n          importRatings_userIDs: {\n            items: {\n              type: \"string\"\n            }\n          }\n        },\n        required: [\"subtreeJSON\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          subtreeJSON = _this$payload.subtreeJSON,\n          parentNodeID = _this$payload.parentNodeID,\n          nodesToLink = _this$payload.nodesToLink;\n      this.rootSubtreeData = FromJSON(subtreeJSON); // clear each run, since validate gets called more than once\n\n      this.subs_last = this.subs;\n      this.subs = [];\n      this.oldID_newID = (_a = Clone(nodesToLink), _a !== null && _a !== void 0 ? _a : {});\n      this.nodeRatingsToAdd = [];\n      this.ProcessSubtree(this.rootSubtreeData, parentNodeID);\n    }\n  }, {\n    key: \"ProcessSubtree\",\n    value: function ProcessSubtree(subtreeData, parentID) {\n      var _this2 = this;\n\n      var _a, _b;\n\n      var _this$payload2 = this.payload,\n          mapID = _this$payload2.mapID,\n          importRatings = _this$payload2.importRatings,\n          importRatings_userIDs = _this$payload2.importRatings_userIDs;\n      var node = AsNodeL1(WithoutHelpers(subtreeData).Excluding(\"ratings\", \"childrenData\", \"finalPolarity\", \"currentRevision\", \"parents\", \"children\", \"childrenOrder\"));\n      var revision = WithoutHelpers(subtreeData.current).Excluding(\"node\", \"approved\", \"relative\", \"voteLevel\");\n      if (revision.image) revision.image.id = \"\".concat(revision.image.id);\n\n      if (revision[\"contentNode\"]) {\n        CE(revision).VSet({\n          quote: revision[\"contentNode\"],\n          contentNode: DEL\n        });\n\n        if (revision.quote.sourceChains.length) {\n          revision.quote.sourceChains = revision.quote.sourceChains.map(function (sourceChainSources) {\n            return {\n              sources: sourceChainSources\n            };\n          });\n        }\n      }\n\n      var oldID = subtreeData[\"_id\"];\n\n      if (this.oldID_newID[oldID]) {\n        var newID = this.oldID_newID[oldID]; //const linkNodeCommand = new LinkNode_HighLevel({mapID, parentID, node, revision}).MarkAsSubcommand(this);\n\n        var linkNodeCommand = (_a = this.subs_last[this.subs.length], _a !== null && _a !== void 0 ? _a : new LinkNode({\n          mapID: mapID,\n          parentID: parentID,\n          childID: newID,\n          childForm: subtreeData.link.form,\n          childPolarity: subtreeData.link.polarity\n        }).MarkAsSubcommand(this));\n        linkNodeCommand.Validate();\n        this.subs.push(linkNodeCommand);\n      } else {\n        var addNodeCommand = (_b = this.subs_last[this.subs.length], _b !== null && _b !== void 0 ? _b : new AddChildNode({\n          mapID: mapID,\n          parentID: parentID,\n          node: node,\n          revision: revision,\n          link: WithoutHelpers(subtreeData.link)\n        }).MarkAsSubcommand(this));\n        addNodeCommand.Validate();\n        this.oldID_newID[oldID] = addNodeCommand.sub_addNode.nodeID;\n        this.subs.push(addNodeCommand);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = CE(subtreeData.childrenData).Pairs()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var pair = _step.value;\n            this.ProcessSubtree(pair.value, addNodeCommand.sub_addNode.nodeID);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (subtreeData.childrenOrder) {\n          //node.childrenOrder = subtreeData.childrenOrder.map(oldID=>{\n          addNodeCommand.sub_addNode.payload.node.childrenOrder = subtreeData.childrenOrder.SelectMany(function (oldChildID) {\n            //AssertV(this.oldID_newID[oldID], `Cannot find newID for oldID: ${oldID}`);\n            // data from old site has childrenOrder's with deleted node-ids -- so just leave out the missing ones\n            if (_this2.oldID_newID[oldChildID] == null) return [];\n            return [_this2.oldID_newID[oldChildID]];\n          });\n        }\n      }\n\n      if (importRatings && subtreeData.ratings) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = subtreeData.ratings.Pairs()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _step2$value = _step2.value,\n                ratingType = _step2$value.key,\n                ratingsByUser = _step2$value.value;\n            if (Validate(\"RatingType\", ratingType) != null) continue;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              for (var _iterator3 = ratingsByUser.Pairs()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var _step3$value = _step3.value,\n                    userID = _step3$value.key,\n                    rating = _step3$value.value;\n                if (Validate(\"UserID\", userID) != null) continue;\n                if (importRatings_userIDs != null && !importRatings_userIDs.includes(userID)) continue;\n                var newNodeID = this.oldID_newID[oldID]; //let addRatingCommand = new SetNodeRating({nodeID: newNodeID, ratingType: ratingType as RatingType, value: rating.value, userID}).MarkAsSubcommand(this);\n\n                this.nodeRatingsToAdd.push({\n                  node: newNodeID,\n                  type: ratingType,\n                  user: userID,\n                  updated: rating.updated,\n                  value: rating.value\n                });\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                  _iterator3.return();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = {};\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.subs[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var sub = _step4.value;\n          updates = MergeDBUpdates(updates, sub.GetDBUpdates());\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.nodeRatingsToAdd[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var rating = _step5.value;\n          updates[\"nodeRatings/\".concat(GenerateUUID())] = rating;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return updates;\n    }\n  }]);\n\n  return ImportSubtree;\n}(Command);","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetNodeL3, ReversePolarity } from \"../Store/firebase/nodes/$node\";\nimport { GetParentNodeID } from \"../Store/firebase/nodes\";\nimport { MapNodeType } from \"../Store/firebase/nodes/@MapNodeType\";\nAddSchema(\"ReverseArgumentPolarity_payload\", {\n  properties: {\n    mapID: {\n      type: \"string\"\n    },\n    nodeID: {\n      type: \"string\"\n    },\n    path: {\n      type: \"string\"\n    }\n  },\n  required: [\"nodeID\"]\n});\n\nvar ReverseArgumentPolarity =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(ReverseArgumentPolarity, _Command);\n\n  function ReverseArgumentPolarity() {\n    _classCallCheck(this, ReverseArgumentPolarity);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ReverseArgumentPolarity).apply(this, arguments));\n  }\n\n  _createClass(ReverseArgumentPolarity, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"ReverseArgumentPolarity_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          nodeID = _this$payload.nodeID,\n          path = _this$payload.path;\n      this.oldNodeData = GetNodeL3(path); // AssertV(this.oldNodeData, \"oldNodeData is null\"); // realized I don't need to add these; the null-ref exceptions are sufficient\n\n      this.parentID = GetParentNodeID(path);\n      this.newLinkData = Object.assign({}, this.oldNodeData.link);\n      this.newLinkData.polarity = ReversePolarity(this.newLinkData.polarity);\n      AssertV(this.oldNodeData.type == MapNodeType.Argument, \"Can only reverse polarity of an argument node.\");\n      AssertValidate(\"ChildEntry\", this.newLinkData, \"New link-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n      var updates = {};\n      updates[\"nodes/\".concat(this.parentID, \"/.children/.\").concat(nodeID)] = this.newLinkData;\n      return updates;\n    }\n  }]);\n\n  return ReverseArgumentPolarity;\n}(Command);\n\nReverseArgumentPolarity = __decorate([MapEdit, UserEdit], ReverseArgumentPolarity);\nexport { ReverseArgumentPolarity };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetMap } from \"../Store/firebase/maps\";\nAddSchema(\"SetLayerAttachedToMap_payload\", {\n  properties: {\n    mapID: {\n      type: \"string\"\n    },\n    layerID: {\n      type: \"string\"\n    },\n    attached: {\n      type: \"boolean\"\n    }\n  },\n  required: [\"mapID\", \"layerID\", \"attached\"]\n});\n\nvar SetLayerAttachedToMap =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetLayerAttachedToMap, _Command);\n\n  function SetLayerAttachedToMap() {\n    _classCallCheck(this, SetLayerAttachedToMap);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetLayerAttachedToMap).apply(this, arguments));\n  }\n\n  _createClass(SetLayerAttachedToMap, [{\n    key: \"Validate_Early\",\n    value: function Validate_Early() {\n      AssertValidate(\"SetLayerAttachedToMap_payload\", this.payload, \"Payload invalid\");\n    }\n  }, {\n    key: \"Validate\",\n    value: function Validate() {\n      var mapID = this.payload.mapID;\n      this.oldData = GetMap(mapID);\n      AssertV(this.oldData, \"Map does not exist!\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          layerID = _this$payload.layerID,\n          attached = _this$payload.attached;\n      var updates = {};\n      updates[\"maps/\".concat(mapID, \"/.layers/.\").concat(layerID)] = attached || null;\n      updates[\"layers/\".concat(layerID, \"/.mapsWhereEnabled/.\").concat(mapID)] = attached || null;\n      return updates;\n    }\n  }]);\n\n  return SetLayerAttachedToMap;\n}(Command);\n\nSetLayerAttachedToMap = __decorate([MapEdit, UserEdit], SetLayerAttachedToMap);\nexport { SetLayerAttachedToMap };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { AssertValidate } from \"mobx-firelink\";\nimport { HasModPermissions } from \"../Store/firebase/users/$user\";\nexport var SetMapFeatured =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetMapFeatured, _Command);\n\n  function SetMapFeatured() {\n    _classCallCheck(this, SetMapFeatured);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetMapFeatured).apply(this, arguments));\n  }\n\n  _createClass(SetMapFeatured, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertV(HasModPermissions(this.userInfo.id), \"Only mods can set whether a map is featured.\");\n      AssertValidate({\n        properties: {\n          id: {\n            type: \"string\"\n          },\n          featured: {\n            type: \"boolean\"\n          }\n        },\n        required: [\"id\", \"featured\"]\n      }, this.payload, \"Payload invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          featured = _this$payload.featured;\n      return _defineProperty({}, \"maps/\".concat(id, \"/.featured\"), featured);\n    }\n  }]);\n\n  return SetMapFeatured;\n}(Command);","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nAddSchema(\"SetMapLayerStateForUser_payload\", {\n  properties: {\n    userID: {\n      type: \"string\"\n    },\n    mapID: {\n      type: \"string\"\n    },\n    layerID: {\n      type: \"string\"\n    },\n    state: {\n      type: [\"null\", \"boolean\"]\n    }\n  },\n  required: [\"userID\", \"mapID\", \"layerID\", \"state\"]\n});\n\nvar SetMapLayerStateForUser =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetMapLayerStateForUser, _Command);\n\n  function SetMapLayerStateForUser() {\n    _classCallCheck(this, SetMapLayerStateForUser);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetMapLayerStateForUser).apply(this, arguments));\n  }\n\n  _createClass(SetMapLayerStateForUser, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"SetMapLayerStateForUser_payload\", this.payload, \"Payload invalid\");\n      var userID = this.payload.userID;\n      AssertV(userID == this.userInfo.id, \"Cannot change this setting for another user!\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload = this.payload,\n          userID = _this$payload.userID,\n          mapID = _this$payload.mapID,\n          layerID = _this$payload.layerID,\n          state = _this$payload.state;\n      var updates = {};\n      updates[\"userMapInfo/\".concat(userID, \"/.\").concat(mapID, \"/.layerStates/.\").concat(layerID)] = state; // updates[`layers/${layerID}/usersWhereStateSet/${userID}`] = state;\n\n      return updates;\n    }\n  }]);\n\n  return SetMapLayerStateForUser;\n}(Command);\n\nSetMapLayerStateForUser = __decorate([MapEdit, UserEdit], SetMapLayerStateForUser);\nexport { SetMapLayerStateForUser };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { AssertValidate } from \"mobx-firelink\";\nimport { Command, AssertV, MergeDBUpdates } from \"mobx-firelink\";\nimport { Clone, CE } from \"js-vextensions\";\nimport { AddNodeRevision } from \"./AddNodeRevision\";\nimport { GetNodeL2, AsNodeL1, GetNodeL3, GetNodeDisplayText, GetNodeForm } from \"../Store/firebase/nodes/$node\";\n\nvar SetNodeIsMultiPremiseArgument =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetNodeIsMultiPremiseArgument, _Command);\n\n  function SetNodeIsMultiPremiseArgument() {\n    _classCallCheck(this, SetNodeIsMultiPremiseArgument);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetNodeIsMultiPremiseArgument).apply(this, arguments));\n  }\n\n  _createClass(SetNodeIsMultiPremiseArgument, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate({\n        properties: {\n          mapID: {\n            type: \"string\"\n          },\n          nodeID: {\n            type: \"string\"\n          },\n          multiPremiseArgument: {\n            type: \"boolean\"\n          }\n        },\n        required: [\"nodeID\", \"multiPremiseArgument\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          nodeID = _this$payload.nodeID,\n          multiPremiseArgument = _this$payload.multiPremiseArgument;\n      this.oldNodeData = GetNodeL2(nodeID);\n      AssertV(this.oldNodeData, \"oldNodeData is null.\");\n      this.newNodeData = Object.assign(Object.assign({}, AsNodeL1(this.oldNodeData)), {\n        multiPremiseArgument: multiPremiseArgument\n      });\n\n      if (multiPremiseArgument) {\n        this.newNodeData.childrenOrder = CE(this.oldNodeData.children).VKeys();\n\n        if (this.oldNodeData.current.titles.base.length == 0) {\n          var newRevision = Clone(this.oldNodeData.current);\n          var oldChildNode_partialPath = \"\".concat(nodeID, \"/\").concat(CE(this.oldNodeData.children).VKeys()[0]);\n          var oldChildNode = GetNodeL3(oldChildNode_partialPath);\n          AssertV(oldChildNode, \"oldChildNode is null.\");\n          newRevision.titles.base = GetNodeDisplayText(oldChildNode, oldChildNode_partialPath, GetNodeForm(oldChildNode));\n          this.sub_addRevision = new AddNodeRevision({\n            mapID: mapID,\n            revision: newRevision\n          });\n          this.sub_addRevision.Validate();\n        }\n      } else {\n        this.newNodeData.childrenOrder = null;\n      }\n\n      AssertValidate(\"MapNode\", this.newNodeData, \"New node-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n      var updates = {};\n      updates[\"nodes/\".concat(nodeID)] = this.newNodeData;\n\n      if (this.sub_addRevision) {\n        updates = MergeDBUpdates(updates, this.sub_addRevision.GetDBUpdates());\n      }\n\n      return updates;\n    }\n  }]);\n\n  return SetNodeIsMultiPremiseArgument;\n}(Command);\n\nSetNodeIsMultiPremiseArgument = __decorate([MapEdit, UserEdit], SetNodeIsMultiPremiseArgument);\nexport { SetNodeIsMultiPremiseArgument };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nexport var Rating = function Rating(initialData) {\n  _classCallCheck(this, Rating);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"Rating\", {\n  properties: {\n    node: {\n      type: \"string\"\n    },\n    type: {\n      $ref: \"RatingType\"\n    },\n    user: {\n      type: \"string\"\n    },\n    updated: {\n      type: \"number\"\n    },\n    value: {\n      type: \"number\"\n    }\n  },\n  required: [\"node\", \"type\", \"user\", \"value\"]\n});","import { emptyArray_forLoading, Assert, IsNaN, CE } from \"js-vextensions\";\nimport { StoreAccessor } from \"mobx-firelink\";\nimport { MapNodeType } from \"../nodes/@MapNodeType\";\nimport { GetNodeL2 } from \"../nodes/$node\";\nimport { GetNodeChildrenL3, GetParentNodeL3 } from \"../nodes\";\nimport { Polarity } from \"../nodes/@MapNode\";\nimport { ArgumentType } from \"../nodes/@MapNodeRevision\";\nexport var RS_CalculateTruthScore = StoreAccessor(function (s) {\n  return function (claimID) {\n    var calculationPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var claim = GetNodeL2(claimID);\n    Assert(claim && claim.type == MapNodeType.Claim, \"RS truth-score can only be calculated for a claim.\"); // if we've hit a cycle back to a claim we've already started calculating for (the root claim), consider the truth-score at this lower-location to be 100%\n\n    if (calculationPath.length && calculationPath.indexOf(calculationPath.Last()) < calculationPath.length - 1) return 1;\n    var childArguments = GetChildArguments(claim._key);\n    if (childArguments == null || childArguments.length == 0) return 1;\n    var runningAverage;\n    var weightTotalSoFar = 0;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = childArguments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var argument = _step.value;\n        var premises = GetNodeChildrenL3(argument._key).filter(function (a) {\n          return a && a.type == MapNodeType.Claim;\n        });\n        if (premises.length == 0) continue;\n        var truthScoreComposite = RS_CalculateTruthScoreComposite(argument._key, calculationPath.concat(argument._key));\n        var weight = RS_CalculateWeight(argument._key, premises.map(function (a) {\n          return a._key;\n        }), calculationPath.concat(argument._key));\n        if (weight == 0) continue; // if 0 weight, this argument won't change the result at all, so skip it\n\n        if (argument.displayPolarity == Polarity.Opposing) {\n          truthScoreComposite = 1 - truthScoreComposite;\n        }\n\n        if (runningAverage == null) {\n          weightTotalSoFar = weight;\n          runningAverage = truthScoreComposite;\n        } else {\n          weightTotalSoFar += weight; // increase weight first\n\n          var deviationFromAverage = truthScoreComposite - runningAverage;\n          var weightRelativeToTotal = weight / weightTotalSoFar;\n          runningAverage += deviationFromAverage * weightRelativeToTotal;\n        }\n\n        Assert(!IsNaN(runningAverage), \"Got an NaN in truth-score calculation function.\");\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return runningAverage || 0;\n  };\n});\nexport var RS_CalculateTruthScoreComposite = StoreAccessor(function (s) {\n  return function (argumentID) {\n    var calculationPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var argument = GetNodeL2(argumentID);\n    Assert(argument && argument.type == MapNodeType.Argument, \"RS truth-score-composite can only be calculated for an argument.\");\n    var premises = GetNodeChildrenL3(argument._key).filter(function (a) {\n      return a && a.type == MapNodeType.Claim;\n    });\n    if (premises.length == 0) return 0;\n    var truthScores = premises.map(function (premise) {\n      return RS_CalculateTruthScore(premise._key, calculationPath.concat(premise._key));\n    });\n    var truthScoreComposite = CombinePremiseTruthScores(truthScores, argument.current.argumentType);\n    return truthScoreComposite;\n  };\n});\nexport var RS_CalculateBaseWeight = StoreAccessor(function (s) {\n  return function (claimID) {\n    var calculationPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var truthScore = RS_CalculateTruthScore(claimID, calculationPath); // if truth-score drops below 50, it has 0 weight\n\n    if (truthScore <= 0.5) return 0;\n    var weight = (truthScore - 0.5) / 0.5;\n    return weight;\n  };\n});\nexport var RS_CalculateWeightMultiplier = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var calculationPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var node = GetNodeL2(nodeID);\n    Assert(node && node.type == MapNodeType.Argument, \"RS weight-multiplier can only be calculated for an argument<>claim combo -- which is specified by providing its argument node.\");\n    var childArguments = GetChildArguments(node._key);\n    if (childArguments == null || childArguments.length == 0) return 1;\n    var runningMultiplier = 1;\n    var runningDivisor = 1;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = childArguments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var argument = _step2.value;\n        var premises = GetNodeChildrenL3(argument._key).filter(function (a) {\n          return a && a.type == MapNodeType.Claim;\n        });\n        if (premises.length == 0) continue;\n        var truthScores = premises.map(function (premise) {\n          return RS_CalculateTruthScore(premise._key, calculationPath.concat(premise._key));\n        });\n        var truthScoresCombined = CombinePremiseTruthScores(truthScores, argument.current.argumentType);\n        var weight = RS_CalculateWeight(argument._key, premises.map(function (a) {\n          return a._key;\n        }), calculationPath.concat(argument._key));\n\n        if (argument.displayPolarity == Polarity.Supporting) {\n          runningMultiplier += truthScoresCombined * weight;\n        } else {\n          runningDivisor += truthScoresCombined * weight;\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return runningMultiplier / runningDivisor;\n  };\n});\nexport var RS_CalculateWeight = StoreAccessor(function (s) {\n  return function (argumentID, premiseIDs) {\n    var calculationPath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var argument = GetNodeL2(argumentID);\n    var premises = premiseIDs.map(function (id) {\n      return GetNodeL2(id);\n    });\n    if (premises.length == 0) return 0;\n    var baseWeightsProduct = premises.map(function (premise) {\n      return RS_CalculateBaseWeight(premise._key, calculationPath.concat(premise._key));\n    }).reduce(function (prev, cur) {\n      return prev * cur;\n    });\n    var weightMultiplier = RS_CalculateWeightMultiplier(argument._key, calculationPath);\n    return baseWeightsProduct * weightMultiplier;\n  };\n});\nexport var RS_GetAllValues = StoreAccessor(function (s) {\n  return function (nodeID, path) {\n    var useRSPrefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var calculationPath = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    var node = GetNodeL2(nodeID);\n    var parent = GetParentNodeL3(path);\n    var argument = node.type == MapNodeType.Argument ? node : parent && parent.type == MapNodeType.Argument ? parent : null;\n    var premises = node.type == MapNodeType.Argument ? GetNodeChildrenL3(argument._key, path).filter(function (a) {\n      return a && a.type == MapNodeType.Claim;\n    }) : [node];\n\n    if (node.type == MapNodeType.Claim) {\n      var claimTruthScore = RS_CalculateTruthScore(node._key, calculationPath);\n      var claimBaseWeight = RS_CalculateBaseWeight(node._key, calculationPath);\n    }\n\n    if (argument) {\n      // (node could instead be a claim under category)\n      var argTruthScoreComposite = RS_CalculateTruthScoreComposite(argument._key, calculationPath);\n      var argWeightMultiplier = RS_CalculateWeightMultiplier(argument._key, calculationPath);\n      var argWeight = RS_CalculateWeight(argument._key, premises.map(function (a) {\n        return a._key;\n      }), calculationPath);\n    }\n\n    if (useRSPrefix) {\n      return {\n        argument: argument,\n        premises: premises,\n        rs_argTruthScoreComposite: argTruthScoreComposite,\n        rs_argWeightMultiplier: argWeightMultiplier,\n        rs_argWeight: argWeight,\n        rs_claimTruthScore: claimTruthScore,\n        rs_claimBaseWeight: claimBaseWeight\n      };\n    }\n\n    return {\n      argument: argument,\n      premises: premises,\n      argTruthScoreComposite: argTruthScoreComposite,\n      argWeightMultiplier: argWeightMultiplier,\n      argWeight: argWeight,\n      claimTruthScore: claimTruthScore,\n      claimBaseWeight: claimBaseWeight\n    };\n  };\n});\n\nfunction CombinePremiseTruthScores(truthScores, argumentType) {\n  if (argumentType == ArgumentType.All) {\n    return truthScores.reduce(function (prev, cur) {\n      return prev * cur;\n    });\n  }\n\n  if (argumentType == ArgumentType.AnyTwo) {\n    if (truthScores.length < 2) return 0;\n    var highestTruthScore = CE(truthScores).Max();\n    var otherTruthScores = CE(truthScores).Except({\n      excludeEachOnlyOnce: true\n    }, highestTruthScore);\n    var secondHighestTruthScore = CE(otherTruthScores).Max();\n    return highestTruthScore * secondHighestTruthScore;\n  }\n\n  return CE(truthScores).Max(); // ArgumentType.Any\n}\n\nvar GetChildArguments = StoreAccessor(function (s) {\n  return function (nodeID) {\n    var children = GetNodeChildrenL3(nodeID);\n    if (children == emptyArray_forLoading || CE(children).Any(function (a) {\n      return a == null;\n    })) return null; // null means still loading\n\n    var childArguments = children.filter(function (a) {\n      return a.type == MapNodeType.Argument;\n    });\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = childArguments[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var child = _step3.value;\n        var childChildren = GetNodeChildrenL3(nodeID);\n        if (childChildren == emptyArray_forLoading || CE(childChildren).Any(function (a) {\n          return a == null;\n        })) return null; // null means still loading\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    return childArguments;\n  };\n});","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport { Lerp, ToJSON, Assert, IsNumber, CE, emptyArray_forLoading } from \"js-vextensions\";\nimport { StoreAccessor, GetDocs, WhereOp } from \"mobx-firelink\";\nimport { RS_GetAllValues } from \"./nodeRatings/ReasonScore\";\nimport { GetNodeChildrenL2, HolderType } from \"./nodes\";\nimport { GetMainRatingType, GetNodeL2 } from \"./nodes/$node\";\nimport { ClaimForm } from \"./nodes/@MapNode\";\nimport { MapNodeType } from \"./nodes/@MapNodeType\";\nimport { MeID } from \"./users\";\nimport { GetArgumentImpactPseudoRatings } from \"../../Utils/Store/RatingProcessor\";\nexport var GetRatings = StoreAccessor(function (s) {\n  return function (nodeID, ratingType, userID) {\n    if (ratingType == \"impact\") {\n      var node = GetNodeL2(nodeID);\n      if (node === undefined) return emptyArray_forLoading;\n      var nodeChildren = GetNodeChildrenL2(nodeID);\n      if (CE(nodeChildren).Any(function (a) {\n        return a == null;\n      })) return emptyArray_forLoading; //if (nodeChildren.Any(a=>a == null)) return observable.map(emptyObj);\n\n      var premises = nodeChildren.filter(function (a) {\n        return a == null || a.type == MapNodeType.Claim;\n      });\n      return GetArgumentImpactPseudoRatings(node, premises);\n    }\n    /*const ratings = GetRatings(nodeID, ratingType);\r\n    if (ratingSet == null) return [];\r\n    return FilterRatings(CE(ratingSet).VValues(), filter);\r\n    //return FilterRatings(Array.from(ratingSet.values()), filter);*/\n\n\n    return GetDocs({\n      queryOps: [new WhereOp(\"node\", \"==\", nodeID), new WhereOp(\"type\", \"==\", ratingType), userID && new WhereOp(\"user\", \"==\", userID)].filter(function (a) {\n        return a;\n      })\n    }, function (a) {\n      return a.nodeRatings;\n    });\n  };\n});\nexport var GetRating = StoreAccessor(function (s) {\n  return function (nodeID, ratingType, userID) {\n    return GetRatings(nodeID, ratingType, userID)[0];\n  };\n});\nexport var GetRatingValue = StoreAccessor(function (s) {\n  return function (nodeID, ratingType, userID) {\n    var resultIfNoData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var rating = GetRating(nodeID, ratingType, userID);\n    return rating ? rating.value : resultIfNoData;\n  };\n});\nexport var GetRatingAverage = StoreAccessor(function (s) {\n  return function (nodeID, ratingType, userID) {\n    // return CachedTransform_WithStore('GetRatingAverage', [nodeID, ratingType, resultIfNoData].concat((filter || {}).VValues()), {}, () => {\n    // if voting disabled, always show full bar\n\n    /* let node = GetNodeL2(nodeID);\r\n    if (node && node.current.votingDisabled) return 100;\r\n      let ratings = GetRatings(nodeID, ratingType, filter);\r\n    if (ratings.length == 0) return resultIfNoData as any; */\n    var node = GetNodeL2(nodeID);\n    if (node && node.current.votingDisabled) return 100;\n    var ratings = GetRatings(nodeID, ratingType, userID);\n    if (ratings.length == 0) return null;\n    var result = CE(CE(ratings.map(function (a) {\n      return a.value;\n    })).Average()).RoundTo(1);\n    Assert(result >= 0 && result <= 100, \"Rating-average (\".concat(result, \") not in range. Invalid ratings: \").concat(ToJSON(ratings.map(function (a) {\n      return a.value;\n    }).filter(function (a) {\n      return !IsNumber(a);\n    }))));\n    return result;\n  };\n});\nexport var GetRatingAverage_AtPath = StoreAccessor(function (s) {\n  return function (node, ratingType, userID) {\n    var resultIfNoData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var result = GetRatingAverage(node._key, ratingType, userID);\n    if (result == null) return resultIfNoData;\n\n    if (ShouldRatingTypeBeReversed(node, ratingType)) {\n      result = 100 - result;\n    }\n\n    return result;\n  };\n});\nexport var WeightingType;\n\n(function (WeightingType) {\n  WeightingType[WeightingType[\"Votes\"] = 10] = \"Votes\";\n  WeightingType[WeightingType[\"ReasonScore\"] = 20] = \"ReasonScore\";\n})(WeightingType || (WeightingType = {}));\n\nvar rsCompatibleNodeTypes = [MapNodeType.Argument, MapNodeType.Claim]; // export const GetFillPercent_AtPath = StoreAccessor('GetFillPercent_AtPath', (node: MapNodeL3, path: string, boxType?: HolderType, ratingType?: RatingType, filter?: RatingFilter, resultIfNoData = null) => {\n\nexport var GetFillPercent_AtPath = StoreAccessor(function (s) {\n  return function (node, path, boxType, ratingType) {\n    var _HolderType$Truth$Hol;\n\n    var weighting = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : WeightingType.Votes;\n    var userID = arguments.length > 5 ? arguments[5] : undefined;\n    var resultIfNoData = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n\n    var _a;\n\n    ratingType = ratingType || (_HolderType$Truth$Hol = {}, _defineProperty(_HolderType$Truth$Hol, HolderType.Truth, \"truth\"), _defineProperty(_HolderType$Truth$Hol, HolderType.Relevance, \"relevance\"), _HolderType$Truth$Hol)[boxType] || GetMainRatingType(node);\n\n    if (weighting == WeightingType.Votes || !((_a = rsCompatibleNodeTypes) === null || _a === void 0 ? void 0 : _a.includes(node.type))) {\n      var _result = GetRatingAverage_AtPath(node, ratingType, userID, resultIfNoData);\n\n      Assert(_result >= 0 && _result <= 100, \"Fill-percent (\".concat(_result, \") not in range.\"));\n      return _result;\n    }\n\n    var _RS_GetAllValues = RS_GetAllValues(node._key, path),\n        argTruthScoreComposite = _RS_GetAllValues.argTruthScoreComposite,\n        argWeightMultiplier = _RS_GetAllValues.argWeightMultiplier,\n        claimTruthScore = _RS_GetAllValues.claimTruthScore; // if (State(a=>a.main.weighting) == WeightingType.ReasonScore) {\n\n\n    var result;\n\n    if (node.type == MapNodeType.Claim) {\n      result = claimTruthScore * 100;\n    } else if (node.type == MapNodeType.Argument) {\n      if (boxType == HolderType.Relevance) {\n        // return Lerp(0, 100, GetPercentFromXToY(0, 2, argWeightMultiplier));\n        result = Lerp(0, 100, argWeightMultiplier);\n      } else {\n        result = argTruthScoreComposite * 100;\n      }\n    }\n\n    Assert(result >= 0 && result <= 100, \"Fill-percent (\".concat(result, \") not in range.\"));\n    return result;\n  };\n});\nexport var GetMarkerPercent_AtPath = StoreAccessor(function (s) {\n  return function (node, path, boxType, ratingType) {\n    var _HolderType$Truth$Hol2;\n\n    var weighting = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : WeightingType.Votes;\n    ratingType = ratingType || (_HolderType$Truth$Hol2 = {}, _defineProperty(_HolderType$Truth$Hol2, HolderType.Truth, \"truth\"), _defineProperty(_HolderType$Truth$Hol2, HolderType.Relevance, \"relevance\"), _HolderType$Truth$Hol2)[boxType] || GetMainRatingType(node);\n\n    if (weighting == WeightingType.Votes || !rsCompatibleNodeTypes.includes(node.type)) {\n      return GetRatingAverage_AtPath(node, ratingType, MeID());\n    }\n  };\n});\n/* export function GetPaths_MainRatingSet(node: MapNode) {\r\n    let mainRatingType = MapNode.GetMainRatingTypes(node)[0];\r\n    return [`nodeRatings/${node._id}/${mainRatingType}`];\r\n}\r\nexport function GetPaths_MainRatingAverage(node: MapNode) {\r\n    let result = GetPaths_MainRatingSet(node);\r\n    if (node.type == MapNodeType.Argument || node.type == MapNodeType.Argument)\r\n        result.AddRange(GetPaths_CalculateArgumentStrength(node, GetNodeChildren(node)));\r\n    return result;\r\n} */\n\n/** Returns an int from 0 to 100. */\n\n/* export function GetMainRatingAverage(node: MapNode, resultIfNoData = null): number {\r\n    // if static category, always show full bar\r\n    if (node._id < 100)\r\n        return 100;\r\n    return GetRatingAverage(node._id, MapNode.GetMainRatingTypes(node)[0], resultIfNoData);\r\n} */\n\n/** Returns an int from 0 to 100. */\n\n/* export function GetMainRatingFillPercent(node: MapNode) {\r\n    let mainRatingAverage = GetMainRatingAverage(node);\r\n    if (node.current.impactPremise && (node.current.impactPremise.thenType == ImpactPremise_ThenType.StrengthenParent || node.current.impactPremise.thenType == ImpactPremise_ThenType.WeakenParent))\r\n        return mainRatingAverage != null ? mainRatingAverage.Distance(50) * 2 : 0;\r\n    return mainRatingAverage || 0;\r\n} */\n\n/* export function GetFillPercentForRatingAverage(node: MapNode, ratingAverage: number, reverseRating?: boolean) {\r\n    ratingAverage = TransformRatingForContext(ratingAverage, reverseRating);\r\n    /*if (node.current.impactPremise && (node.current.impactPremise.thenType == ImpactPremise_ThenType.StrengthenParent || node.current.impactPremise.thenType == ImpactPremise_ThenType.WeakenParent))\r\n        return ratingAverage != null ? ratingAverage.Distance(50) * 2 : 0;*#/\r\n    return ratingAverage || 0;\r\n}\r\nexport function TransformRatingForContext(ratingValue: number, reverseRating: boolean) {\r\n    if (ratingValue == null) return null;\r\n    if (reverseRating) return 100 - ratingValue;\r\n    return ratingValue;\r\n} */\n\n/*export class RatingFilter {\r\n    constructor(initialData: Partial<RatingFilter>) {\r\n        CE(this).VSet(initialData);\r\n    }\r\n\r\n    includeUser = null as string;\r\n}\r\nexport function FilterRatings(ratings: Rating[], filter: RatingFilter) {\r\n    return ratings.filter(a=>filter == null || filter.includeUser == a._key);\r\n}*/\n\nexport function TransformRatingForContext(ratingValue, reverseRating) {\n  if (ratingValue == null) return null;\n  if (reverseRating) return 100 - ratingValue;\n  return ratingValue;\n}\n/* export function GetFillPercentForRatingType(node: MapNodeL3, path: string, ratingType: RatingType, filter?: RatingFilter) {\r\n    if (ratingType == \"impact\") {\r\n        let nodeChildren = GetNodeChildrenL3(node, path);\r\n        //let nodeChildren = GetNodeChildrenL2(node).map(child=>AsNodeL3(child, Polarity.Supporting, GetLinkUnderParent(child._id, node)));\r\n        if (nodeChildren.Any(a=>a == null)) return 0;\r\n        let premises = nodeChildren.filter(a=>a.type == MapNodeType.Claim);\r\n        let averageTruth = premises.map(premise=>GetRatingAverage_AtPath(premise, \"truth\", filter, null)).Average();\r\n        //Log(`Node: ${node._id} @averageTruth: ${averageTruth}`);\r\n\r\n        let averageRelevance = GetRatingAverage(node._id, \"relevance\", filter);\r\n\r\n        return ((averageTruth / 100) * (averageRelevance / 100)) * 100;\r\n    }\r\n\r\n    return GetRatingAverage_AtPath(node, ratingType, filter) || 0;\r\n} */\n\n/* export function ShouldRatingTypeBeReversed(ratingType: RatingType, nodeReversed: boolean, contextReversed: boolean) {\r\n    //return nodeReversed || (contextReversed && ratingType == \"adjustment\");\r\n    return nodeReversed;\r\n} */\n\nexport function ShouldRatingTypeBeReversed(node, ratingType) {\n  // return node.type == MapNodeType.Argument && node.finalPolarity != node.link.polarity;\n  // if ([\"impact\", \"relevance\"].Contains(ratingType)) return false;\n  return node.link.form == ClaimForm.Negation;\n}","import { IsNumber, Assert, CE, emptyArray_forLoading, emptyArray } from \"js-vextensions\";\nimport { StoreAccessor } from \"mobx-firelink\";\nimport { GetRatingAverage, GetRatingValue, GetRatings } from \"../../Store/firebase/nodeRatings\";\nimport { GetMainRatingType, GetNodeForm, GetRatingTypesForNode } from \"../../Store/firebase/nodes/$node\";\nimport { ClaimForm } from \"../../Store/firebase/nodes/@MapNode\";\nimport { ArgumentType } from \"../../Store/firebase/nodes/@MapNodeRevision\";\nexport var GetArgumentImpactPseudoRating = StoreAccessor(function (s) {\n  return function (argument, premises, userID) {\n    if (CE(premises).Any(function (a) {\n      return a == null;\n    })) return null; // must still be loading\n\n    if (premises.length == 0) return null;\n    var premiseProbabilities = premises.map(function (premise) {\n      var ratingType = GetRatingTypesForNode(premise)[0].type;\n      var ratingValue = GetRatingValue(premise._key, ratingType, userID, null); // if user didn't rate this premise, just use the average rating\n\n      if (ratingValue == null) {\n        ratingValue = GetRatingAverage(premise._key, ratingType, null) || 0;\n      }\n\n      var form = GetNodeForm(premise, argument);\n      var probability = form == ClaimForm.Negation ? 1 - ratingValue / 100 : ratingValue / 100;\n      return probability;\n    });\n    var combinedTruthOfPremises;\n\n    if (argument.current.argumentType == ArgumentType.All) {\n      combinedTruthOfPremises = premiseProbabilities.reduce(function (total, current) {\n        return total * current;\n      }, 1);\n    } else if (argument.current.argumentType == ArgumentType.AnyTwo) {\n      var strongest = CE(premiseProbabilities).Max(null, true);\n      var secondStrongest = premiseProbabilities.length > 1 ? CE(CE(premiseProbabilities).Except({\n        excludeEachOnlyOnce: true\n      }, strongest)).Max(null, true) : 0;\n      combinedTruthOfPremises = strongest * secondStrongest;\n    } else {\n      combinedTruthOfPremises = CE(premiseProbabilities).Max(null, true);\n    }\n\n    var relevance = GetRatingValue(argument._key, \"relevance\", userID, null); // if user didn't rate the relevance, just use the average rating\n\n    if (relevance == null) {\n      relevance = GetRatingAverage(argument._key, \"relevance\", null) || 0;\n    } // let strengthForType = adjustment.Distance(50) / 50;\n\n\n    var result = combinedTruthOfPremises * (relevance / 100);\n    Assert(IsNumber(result), \"Impact pseudo-rating is null. @combinedTruthOfPremises:\".concat(combinedTruthOfPremises, \" @relevance:\").concat(relevance));\n    return {\n      //_key: userID,\n      node: argument._key,\n      type: \"impact\",\n      user: userID,\n      updated: null,\n      value: CE(result * 100).RoundTo(1)\n    };\n  };\n}); // export function GetArgumentStrengthEntries(nodeChildren: MapNode[], users: string[]) {\n\n/* export function GetArgumentStrengthPseudoRatings(nodeChildren: MapNode[]): Rating[] {\r\n    if (nodeChildren.Any(a=>a == null)) return []; // must still be loading\r\n    let impactPremise = nodeChildren.First(a=>a.impactPremise != null);\r\n    let premises = nodeChildren.Except(impactPremise);\r\n    if (premises.length == 0) return [];\r\n\r\n    let usersWhoRated = nodeChildren.SelectMany(child=>GetRatings(child._id, MapNode.GetMainRatingTypes(child)[0]).map(a=>a._key)).Distinct();\r\n    let result = usersWhoRated.map(userID=>GetArgumentStrengthPseudoRating(nodeChildren, userID));\r\n    return result;\r\n} */\n// export function GetArgumentImpactPseudoRatingSet(argument: MapNodeL2, premises: MapNodeL2[]): {[key: string]: Rating} {\n\nexport var GetArgumentImpactPseudoRatings = StoreAccessor(function (s) {\n  return function (argument, premises) {\n    if (CE(premises).Any(function (a) {\n      return a == null;\n    })) return emptyArray_forLoading; // must still be loading\n\n    if (premises.length == 0) return emptyArray;\n    var childForms_map = CE(premises).ToMap(function (child, index) {\n      return \"childForm_\".concat(index);\n    }, function (child) {\n      return GetNodeForm(child, argument);\n    }); // let dataUsedInCalculation = {...childRatingSets, ...childForms_map};\n\n    var dataUsedInCalculation = Object.assign({}, childForms_map);\n    dataUsedInCalculation.argumentType = argument.current.argumentType;\n    var usersWhoRatedArgOrPremise = {};\n    /* const argRatingSet = GetRatingSet(argument._key, GetMainRatingType(argument)) || emptyObj;\r\n    for (const userID of argRatingSet.VKeys()) {\r\n        usersWhoRatedArgOrPremise[userID] = true;\r\n    } */\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = GetRatings(argument._key, \"relevance\").map(function (a) {\n        return a.user;\n      })[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var userID = _step.value;\n        usersWhoRatedArgOrPremise[userID] = true;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = premises[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var premise = _step2.value;\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n          for (var _iterator5 = GetRatings(premise._key, \"truth\").map(function (a) {\n            return a.user;\n          })[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            var _userID = _step5.value;\n            usersWhoRatedArgOrPremise[_userID] = true;\n          }\n        } catch (err) {\n          _didIteratorError5 = true;\n          _iteratorError5 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n              _iterator5.return();\n            }\n          } finally {\n            if (_didIteratorError5) {\n              throw _iteratorError5;\n            }\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = premises[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var child = _step3.value;\n        var childRatings = GetRatings(child._key, GetMainRatingType(child)); //for (const userID of childRatingSet.VKeys()) {\n\n        var _iteratorNormalCompletion6 = true;\n        var _didIteratorError6 = false;\n        var _iteratorError6 = undefined;\n\n        try {\n          for (var _iterator6 = childRatings.map(function (a) {\n            return a.user;\n          })[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n            var _userID2 = _step6.value;\n            usersWhoRatedArgOrPremise[_userID2] = true;\n          }\n        } catch (err) {\n          _didIteratorError6 = true;\n          _iteratorError6 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n              _iterator6.return();\n            }\n          } finally {\n            if (_didIteratorError6) {\n              throw _iteratorError6;\n            }\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    var result = [];\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n      for (var _iterator4 = CE(usersWhoRatedArgOrPremise).VKeys()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n        var _userID3 = _step4.value;\n        result.push(GetArgumentImpactPseudoRating(argument, premises, _userID3));\n      }\n    } catch (err) {\n      _didIteratorError4 = true;\n      _iteratorError4 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n          _iterator4.return();\n        }\n      } finally {\n        if (_didIteratorError4) {\n          throw _iteratorError4;\n        }\n      }\n    }\n\n    return result;\n    /* });\r\n    return result; */\n  };\n});\n/* export function CalculateArgumentStrength(nodeChildren: MapNode[]) {\r\n    if (nodeChildren.Any(a=>a == null)) return 0; // must still be loading\r\n    let impactPremise = nodeChildren.First(a=>a.impactPremise != null);\r\n    let premises = nodeChildren.Except(impactPremise);\r\n    if (premises.length == 0) return 0;\r\n\r\n    let premiseProbabilities = premises.map(child=>GetRatingAverage(child._id, \"probability\", 0) / 100);\r\n    let all = impactPremise.impactPremise.ifType == ImpactPremise_IfType.All;\r\n    let combinedProbabilityOfPremises = all\r\n        ? premiseProbabilities.reduce((total, current)=>total * current, 1)\r\n        : premiseProbabilities.Max(null, true);\r\n\r\n    if (impactPremise.impactPremise.thenType == ImpactPremise_ThenType.StrengthenParent || impactPremise.impactPremise.thenType == ImpactPremise_ThenType.WeakenParent) {\r\n        let averageAdjustment = GetRatingAverage(impactPremise._id, \"adjustment\", 50);\r\n        let strengthForType = averageAdjustment.Distance(50) / 50;\r\n        var result = combinedProbabilityOfPremises * strengthForType;\r\n    } else {\r\n        var result = combinedProbabilityOfPremises * (GetRatingAverage(impactPremise._id, \"probability\", 0) / 100);\r\n    }\r\n    return (result * 100).RoundTo(1);\r\n} */","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { AssertValidate, Command, GenerateUUID, Assert, AssertV } from \"mobx-firelink\";\nimport { emptyArray_forLoading } from \"js-vextensions\";\nimport { Rating } from \"../Store/firebase/nodeRatings/@Rating\";\nimport { GetRatings } from \"../Store/firebase/nodeRatings\";\nexport var SetNodeRating =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetNodeRating, _Command);\n\n  function SetNodeRating() {\n    _classCallCheck(this, SetNodeRating);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetNodeRating).apply(this, arguments));\n  }\n\n  _createClass(SetNodeRating, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate({\n        properties: {\n          nodeID: {\n            type: \"string\"\n          },\n          ratingType: {\n            $ref: \"RatingType\"\n          },\n          value: {\n            type: [\"number\", \"null\"]\n          }\n        },\n        required: [\"nodeID\", \"ratingType\", \"value\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          nodeID = _this$payload.nodeID,\n          ratingType = _this$payload.ratingType,\n          value = _this$payload.value;\n      var oldRatings = GetRatings(nodeID, ratingType, this.userInfo.id);\n      AssertV(oldRatings != emptyArray_forLoading, \"Old-ratings still loading.\");\n      Assert(oldRatings.length <= 1, \"There should not be more than one rating for this given \\\"slot\\\"!\");\n      this.oldRating = oldRatings[0];\n\n      if (value != null) {\n        this.newID = GenerateUUID();\n        this.newRating = new Rating({\n          node: nodeID,\n          type: ratingType,\n          user: this.userInfo.id,\n          updated: Date.now(),\n          value: value\n        });\n      }\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = {};\n\n      if (this.oldRating) {\n        updates[\"nodeRatings/\".concat(this.oldRating._key)] = null;\n      }\n\n      if (this.newRating) {\n        updates[\"nodeRatings/\".concat(this.newID)] = this.newRating;\n      }\n\n      return updates;\n    }\n  }]);\n\n  return SetNodeRating;\n}(Command);","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { AssertValidate, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetUser } from \"../Store/firebase/users\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"User\"; //export class SetUserData extends Command<{id: string, updates: Partial<MainType>, allowPrevious?: boolean}, {}> {\n\nexport var SetUserData =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetUserData, _Command);\n\n  function SetUserData() {\n    _classCallCheck(this, SetUserData);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetUserData).apply(this, arguments));\n  }\n\n  _createClass(SetUserData, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      AssertValidate({\n        properties: {\n          id: {\n            type: \"string\"\n          },\n          updates: Schema({\n            properties: CE(GetSchemaJSON(MTName)[\"properties\"]).Including(\"displayName\", \"photoURL\", \"joinDate\", \"permissionGroups\")\n          })\n        },\n        required: [\"id\", \"updates\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates;\n      this.oldData = GetUser(id);\n      /*if (!allowPrevious) {\r\n          AssertV(this.oldData == null, \"oldData must be null, since allowPrevious is false.\");\r\n      }*/\n      // if joinDate is already set, don't allow it to be set again (defensive programming, for if UserSignUpHelper just fails to load existing data fsr)\n\n      if (((_a = this.oldData) === null || _a === void 0 ? void 0 : _a.joinDate) != null) {\n        AssertV(!(\"joinDate\" in updates), \"joinDate cannot be set after its initial set!\");\n      }\n\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"users/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return SetUserData;\n}(Command);","import { GetDoc, StoreAccessor } from \"mobx-firelink\";\nexport var GetUser_Private = StoreAccessor(function (s) {\n  return function (userID) {\n    return GetDoc({}, function (a) {\n      return a.users_private.get(userID);\n    });\n  };\n});","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { CE } from \"js-vextensions\";\nimport { AssertV, Command } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, AddSchema, Schema, GetSchemaJSON } from \"mobx-firelink\";\nimport { GetImage } from \"../Store/firebase/images\";\nvar MTName = \"Image\";\nAddSchema(\"Update\".concat(MTName, \"Details_payload\"), [MTName], function () {\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: CE(GetSchemaJSON(MTName).properties).Including(\"name\", \"type\", \"url\", \"description\", \"previewWidth\", \"sourceChains\")\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\n\nvar UpdateImageData =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateImageData, _Command);\n\n  function UpdateImageData() {\n    _classCallCheck(this, UpdateImageData);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateImageData).apply(this, arguments));\n  }\n\n  _createClass(UpdateImageData, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"Update\".concat(MTName, \"Details_payload\"), this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates;\n      this.oldData = GetImage(id);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(\"Image\", this.newData, \"New-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n\n      var updates = _defineProperty({}, \"images/\".concat(id), this.newData);\n\n      return updates;\n    }\n  }]);\n\n  return UpdateImageData;\n}(Command);\n\nUpdateImageData = __decorate([UserEdit], UpdateImageData);\nexport { UpdateImageData };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Command } from \"mobx-firelink\";\nimport { AssertValidate, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { GetUser_Private } from \"../Store/firebase/users_private\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"User_Private\";\nexport var SetUserData_Private =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(SetUserData_Private, _Command);\n\n  function SetUserData_Private() {\n    _classCallCheck(this, SetUserData_Private);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SetUserData_Private).apply(this, arguments));\n  }\n\n  _createClass(SetUserData_Private, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate({\n        properties: {\n          id: {\n            type: \"string\"\n          },\n          updates: Schema({\n            properties: CE(GetSchemaJSON(MTName)[\"properties\"]).Including(\"email\", \"providerData\", \"backgroundID\", \"backgroundCustom_enabled\", \"backgroundCustom_color\", \"backgroundCustom_url\", \"backgroundCustom_position\")\n          })\n        },\n        required: [\"id\", \"updates\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates;\n      this.oldData = GetUser_Private(id);\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"users_private/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return SetUserData_Private;\n}(Command);","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Command, AssertV, Schema } from \"mobx-firelink\";\nimport { AddSchema, AssertValidate, GetSchemaJSON } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetNode } from \"../Store/firebase/nodes\";\nimport { GetLinkUnderParent } from \"../Store/firebase/nodes/$node\";\nimport { CE } from \"js-vextensions\";\nAddSchema(\"UpdateLink_payload\", [\"ChildEntry\"], function () {\n  return {\n    properties: {\n      linkParentID: {\n        type: \"string\"\n      },\n      linkChildID: {\n        type: \"string\"\n      },\n      linkUpdates: Schema({\n        properties: CE(GetSchemaJSON(\"ChildEntry\").properties).Including(\"form\", \"polarity\")\n      })\n    },\n    required: [\"linkParentID\", \"linkChildID\", \"linkUpdates\"]\n  };\n});\n\nvar UpdateLink =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateLink, _Command);\n\n  function UpdateLink() {\n    _classCallCheck(this, UpdateLink);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateLink).apply(this, arguments));\n  }\n\n  _createClass(UpdateLink, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"UpdateLink_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          linkParentID = _this$payload.linkParentID,\n          linkChildID = _this$payload.linkChildID,\n          linkUpdates = _this$payload.linkUpdates;\n      var parent = GetNode(linkParentID);\n      AssertV(parent, \"parent is null.\");\n      var oldData = GetLinkUnderParent(linkChildID, parent);\n      this.newData = Object.assign(Object.assign({}, oldData), linkUpdates);\n      AssertValidate(\"ChildEntry\", this.newData, \"New link-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var _this$payload2 = this.payload,\n          linkParentID = _this$payload2.linkParentID,\n          linkChildID = _this$payload2.linkChildID;\n      var updates = {};\n      updates[\"nodes/\".concat(linkParentID, \"/.children/.\").concat(linkChildID)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdateLink;\n}(Command);\n\nUpdateLink = __decorate([UserEdit], UpdateLink);\nexport { UpdateLink };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate, Schema, GetSchemaJSON } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetMap } from \"../Store/firebase/maps\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"Map\";\nAddSchema(\"Update\".concat(MTName, \"Details_payload\"), [MTName], function () {\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: CE(GetSchemaJSON(MTName).properties).Including(\"name\", \"note\", \"noteLine\", \"defaultExpandDepth\", \"defaultTimelineID\", \"requireMapEditorsCanEdit\", \"nodeDefaults\", \"editorIDs\")\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\n\nvar UpdateMapDetails =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateMapDetails, _Command);\n\n  function UpdateMapDetails() {\n    _classCallCheck(this, UpdateMapDetails);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateMapDetails).apply(this, arguments));\n  }\n\n  _createClass(UpdateMapDetails, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"Update\".concat(MTName, \"Details_payload\"), this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.id,\n          mapUpdates = _this$payload.updates;\n      this.oldData = GetMap(mapID);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), mapUpdates);\n      this.newData.editedAt = Date.now();\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"maps/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdateMapDetails;\n}(Command);\n\nUpdateMapDetails = __decorate([MapEdit(\"id\"), UserEdit], UpdateMapDetails);\nexport { UpdateMapDetails };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { MapEdit, UserEdit } from \"../CommandMacros\";\nimport { AssertValidate } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetNode } from \"../Store/firebase/nodes\";\n\nvar UpdateNodeChildrenOrder =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateNodeChildrenOrder, _Command);\n\n  function UpdateNodeChildrenOrder() {\n    _classCallCheck(this, UpdateNodeChildrenOrder);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateNodeChildrenOrder).apply(this, arguments));\n  }\n\n  _createClass(UpdateNodeChildrenOrder, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate({\n        properties: {\n          mapID: {\n            type: \"string\"\n          },\n          nodeID: {\n            type: \"string\"\n          },\n          childrenOrder: {\n            items: {\n              type: \"string\"\n            }\n          }\n        },\n        required: [\"nodeID\", \"childrenOrder\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          mapID = _this$payload.mapID,\n          nodeID = _this$payload.nodeID,\n          childrenOrder = _this$payload.childrenOrder;\n      this.oldNodeData = GetNode(nodeID);\n      AssertV(this.oldNodeData, \"oldNodeData is null.\");\n      this.newNodeData = Object.assign(Object.assign({}, this.oldNodeData), {\n        childrenOrder: childrenOrder\n      });\n      AssertValidate(\"MapNode\", this.newNodeData, \"New node-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var nodeID = this.payload.nodeID;\n      var updates = {};\n      updates[\"nodes/\".concat(nodeID)] = this.newNodeData;\n      return updates;\n    }\n  }]);\n\n  return UpdateNodeChildrenOrder;\n}(Command);\n\nUpdateNodeChildrenOrder = __decorate([MapEdit, UserEdit], UpdateNodeChildrenOrder);\nexport { UpdateNodeChildrenOrder };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AssertV, Command, AV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AddSchema, AssertValidate, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { TagComp_keys } from \"../Store/firebase/nodeTags/@MapNodeTag\";\nimport { GetNodeTag } from \"../Store/firebase/nodeTags\";\nimport { IsUserCreatorOrMod } from \"../Store/firebase/users/$user\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"MapNodeTag\";\nAddSchema(\"Update\".concat(MTName, \"_payload\"), [MTName], function () {\n  var _CE;\n\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: (_CE = CE(GetSchemaJSON(MTName).properties)).Including.apply(_CE, [\"nodes\"].concat(_toConsumableArray(TagComp_keys))),\n        minProperties: 1\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\n\nvar UpdateNodeTag =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateNodeTag, _Command);\n\n  function UpdateNodeTag() {\n    _classCallCheck(this, UpdateNodeTag);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateNodeTag).apply(this, arguments));\n  }\n\n  _createClass(UpdateNodeTag, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"Update\".concat(MTName, \"_payload\"), this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates;\n      this.oldData = AV.NonNull = GetNodeTag(id);\n      AssertV(IsUserCreatorOrMod(this.userInfo.id, this.oldData), \"User is not the tag's creator, or a moderator.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"nodeTags/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdateNodeTag;\n}(Command);\n\nUpdateNodeTag = __decorate([UserEdit], UpdateNodeTag);\nexport { UpdateNodeTag };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AddSchema, GetSchemaJSON, Schema, AssertValidate } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetNodePhrasing } from \"../Store/firebase/nodePhrasings\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"MapNodePhrasing\";\nAddSchema(\"Update\".concat(MTName, \"_payload\"), [MTName], function () {\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: CE(GetSchemaJSON(MTName).properties).Including(\"type\", \"text\", \"description\")\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\n\nvar UpdatePhrasing =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdatePhrasing, _Command);\n\n  function UpdatePhrasing() {\n    _classCallCheck(this, UpdatePhrasing);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdatePhrasing).apply(this, arguments));\n  }\n\n  _createClass(UpdatePhrasing, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"Update\".concat(MTName, \"_payload\"), this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates;\n      this.oldData = GetNodePhrasing(id);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"nodePhrasings/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdatePhrasing;\n}(Command);\n\nUpdatePhrasing = __decorate([UserEdit], UpdatePhrasing);\nexport { UpdatePhrasing };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { CE } from \"js-vextensions\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { AssertValidate, AddSchema, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { GetTerm } from \"../Store/firebase/terms\";\nvar MTName = \"Term\";\nAddSchema(\"Update\".concat(MTName, \"_payload\"), [MTName], function () {\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: CE(GetSchemaJSON(MTName).properties).Including(\"name\", \"forms\", \"disambiguation\", \"type\", \"definition\", \"note\")\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\n\nvar UpdateTerm =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateTerm, _Command);\n\n  function UpdateTerm() {\n    _classCallCheck(this, UpdateTerm);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateTerm).apply(this, arguments));\n  }\n\n  _createClass(UpdateTerm, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _this$payload = this.payload,\n          termID = _this$payload.termID,\n          updates = _this$payload.updates;\n      this.oldData = GetTerm(termID);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(\"Term\", this.newData, \"New-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var termID = this.payload.termID;\n\n      var updates = _defineProperty({}, \"terms/\".concat(termID), this.newData);\n\n      if (this.newData.name != this.oldData.name) {\n        updates[\"termNames/\".concat(this.oldData.name.toLowerCase(), \"/.\").concat(termID)] = null;\n        updates[\"termNames/\".concat(this.newData.name.toLowerCase(), \"/.\").concat(termID)] = true;\n      }\n\n      return updates;\n    }\n  }]);\n\n  return UpdateTerm;\n}(Command);\n\nUpdateTerm = __decorate([UserEdit], UpdateTerm);\nexport { UpdateTerm };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { AssertV, Command } from \"mobx-firelink\";\nimport { AddSchema, AssertValidate, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { GetTimeline } from \"../Store/firebase/timelines\";\nimport { CE } from \"js-vextensions\";\nvar MTName = \"Timeline\";\nAddSchema(\"Update\".concat(MTName, \"_payload\"), [MTName], function () {\n  return {\n    properties: {\n      id: {\n        type: \"string\"\n      },\n      updates: Schema({\n        properties: CE(GetSchemaJSON(MTName).properties).Including(\"name\", \"videoID\", \"videoStartTime\", \"videoHeightVSWidthPercent\")\n      })\n    },\n    required: [\"id\", \"updates\"]\n  };\n});\nexport var UpdateTimeline =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateTimeline, _Command);\n\n  function UpdateTimeline() {\n    _classCallCheck(this, UpdateTimeline);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateTimeline).apply(this, arguments));\n  }\n\n  _createClass(UpdateTimeline, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"Update\".concat(MTName, \"_payload\"), this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          id = _this$payload.id,\n          updates = _this$payload.updates; // this.oldData = await GetAsync(() => GetTimeline(id));\n\n      this.oldData = GetTimeline(id);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), updates);\n      AssertValidate(MTName, this.newData, \"New \".concat(MTName.toLowerCase(), \"-data invalid\"));\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var id = this.payload.id;\n      var updates = {};\n      updates[\"timelines/\".concat(id)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdateTimeline;\n}(Command);","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { AddSchema, AssertValidate, GetSchemaJSON, Schema } from \"mobx-firelink\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { UserEdit } from \"../CommandMacros\";\nimport { GetTimelineStep } from \"../Store/firebase/timelineSteps\";\nimport { CE } from \"js-vextensions\";\nAddSchema(\"UpdateTimelineStep_payload\", [\"TimelineStep\"], function () {\n  return {\n    properties: {\n      stepID: {\n        type: \"string\"\n      },\n      stepUpdates: Schema({\n        properties: CE(GetSchemaJSON(\"TimelineStep\").properties).Including(\"title\", \"message\", \"groupID\", \"videoTime\", \"nodeReveals\")\n      })\n    },\n    required: [\"stepID\", \"stepUpdates\"]\n  };\n});\n\nvar UpdateTimelineStep =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateTimelineStep, _Command);\n\n  function UpdateTimelineStep() {\n    _classCallCheck(this, UpdateTimelineStep);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateTimelineStep).apply(this, arguments));\n  }\n\n  _createClass(UpdateTimelineStep, [{\n    key: \"Validate\",\n    value: function Validate() {\n      AssertValidate(\"UpdateTimelineStep_payload\", this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          stepID = _this$payload.stepID,\n          stepUpdates = _this$payload.stepUpdates;\n      this.oldData = GetTimelineStep(stepID);\n      AssertV(this.oldData, \"oldData is null.\");\n      this.newData = Object.assign(Object.assign({}, this.oldData), stepUpdates);\n      AssertValidate(\"TimelineStep\", this.newData, \"New timeline-step-data invalid\");\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var stepID = this.payload.stepID;\n      var updates = {};\n      updates[\"timelineSteps/\".concat(stepID)] = this.newData;\n      return updates;\n    }\n  }]);\n\n  return UpdateTimelineStep;\n}(Command);\n\nUpdateTimelineStep = __decorate([UserEdit], UpdateTimelineStep);\nexport { UpdateTimelineStep };","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { UserEdit } from \"../CommandMacros\";\nimport { Command, AssertV } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nimport { GetTimeline } from \"../Store/firebase/timelines\";\n\nvar UpdateTimelineStepOrder =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(UpdateTimelineStepOrder, _Command);\n\n  function UpdateTimelineStepOrder() {\n    _classCallCheck(this, UpdateTimelineStepOrder);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UpdateTimelineStepOrder).apply(this, arguments));\n  }\n\n  _createClass(UpdateTimelineStepOrder, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _a;\n\n      var _this$payload = this.payload,\n          timelineID = _this$payload.timelineID,\n          stepID = _this$payload.stepID,\n          newIndex = _this$payload.newIndex;\n      var timeline = GetTimeline(timelineID);\n      AssertV(timeline, \"timeline is null.\");\n      this.timeline_oldSteps = (_a = timeline.steps, _a !== null && _a !== void 0 ? _a : []);\n      this.timeline_newSteps = this.timeline_oldSteps.slice();\n      CE(this.timeline_newSteps).Move(stepID, newIndex, false); // dnd system applies index-fixing itself, so don't apply here\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var timelineID = this.payload.timelineID;\n\n      var updates = _defineProperty({}, \"timelines/\".concat(timelineID, \"/.steps\"), this.timeline_newSteps);\n\n      return updates;\n    }\n  }]);\n\n  return UpdateTimelineStepOrder;\n}(Command);\n\nUpdateTimelineStepOrder = __decorate([UserEdit], UpdateTimelineStepOrder);\nexport { UpdateTimelineStepOrder };","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _toConsumableArray from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport { Command, MergeDBUpdates, AssertV, AssertValidate } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nimport { DeleteNode } from \"../DeleteNode\";\nimport { GetNode } from \"../../Store/firebase/nodes\";\n/*\r\n==========\r\ntemp1 = await RR.GetDBUpdatesFor_DeleteNodeSubtree(NODE_ID, 200);\r\n\r\n// optional\r\n//temp2 = temp1.Pairs().filter(a=>!a.key.includes(\"mapNodeEditTimes\")).length\r\n\r\nawait RR.ApplyDBUpdates({}, temp1)\r\n==========\r\n*/\n\nexport function GetNodesInSubtree(rootNodeID) {\n  var runInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    nodesVisited: new Set()\n  };\n  if (runInfo.nodesVisited.has(rootNodeID)) return [];\n  runInfo.nodesVisited.add(rootNodeID);\n  var rootNode = GetNode(rootNodeID);\n  if (rootNode == null) return null;\n  var result = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = CE(rootNode.children || {}).VKeys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var childID = _step.value;\n      var subtreeNodes = GetNodesInSubtree(childID, runInfo);\n      if (subtreeNodes == null) return null; // if any subtree contents are not yet loaded, have the whole call resolve to null\n\n      result.push.apply(result, _toConsumableArray(subtreeNodes));\n    } // add self last, so that deeper nodes are deleted first\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  result.push(rootNode);\n  return result;\n}\nexport var DeleteNodeSubtree =\n/*#__PURE__*/\nfunction (_Command) {\n  _inherits(DeleteNodeSubtree, _Command);\n\n  function DeleteNodeSubtree() {\n    _classCallCheck(this, DeleteNodeSubtree);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DeleteNodeSubtree).apply(this, arguments));\n  }\n\n  _createClass(DeleteNodeSubtree, [{\n    key: \"Validate\",\n    value: function Validate() {\n      var _this = this;\n\n      AssertValidate({\n        properties: {\n          nodeID: {\n            type: \"string\"\n          },\n          maxDeletes: {\n            type: \"number\"\n          }\n        },\n        required: [\"nodeID\"]\n      }, this.payload, \"Payload invalid\");\n      var _this$payload = this.payload,\n          nodeID = _this$payload.nodeID,\n          maxDeletes = _this$payload.maxDeletes;\n      this.nodesInSubtree = GetNodesInSubtree(nodeID);\n      AssertV(this.nodesInSubtree, \"List of nodes in subtree is still loading.\");\n      AssertV(this.nodesInSubtree.length <= maxDeletes, \"Length of nodes in subtree (\".concat(this.nodesInSubtree.length, \") is greater than the max-deletes limit (\").concat(maxDeletes, \").\"));\n      this.subs_deleteNodes = this.nodesInSubtree.map(function (node) {\n        var deleteNodeCommand = new DeleteNode({\n          nodeID: node._key\n        }).MarkAsSubcommand(_this);\n        deleteNodeCommand.parentsToIgnore = _this.nodesInSubtree.map(function (a) {\n          return a._key;\n        });\n        deleteNodeCommand.childrenToIgnore = _this.nodesInSubtree.map(function (a) {\n          return a._key;\n        });\n        deleteNodeCommand.Validate();\n        return deleteNodeCommand;\n      });\n    }\n  }, {\n    key: \"GetDBUpdates\",\n    value: function GetDBUpdates() {\n      var updates = {};\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.subs_deleteNodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var deleteNodeCommand = _step2.value;\n          updates = MergeDBUpdates(updates, deleteNodeCommand.GetDBUpdates());\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return updates;\n    }\n  }]);\n\n  return DeleteNodeSubtree;\n}(Command);","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\n\nvar _colorMap;\n\nimport { AddSchema, UUID_regex } from \"mobx-firelink\";\nimport { GetDoc, StoreAccessor } from \"mobx-firelink\";\nexport var NodeEditTimes = function NodeEditTimes() {\n  _classCallCheck(this, NodeEditTimes);\n};\nAddSchema(\"NodeEditTimes\", {\n  patternProperties: _defineProperty({}, UUID_regex, {\n    type: \"number\"\n  })\n});\nexport var ChangeType;\n\n(function (ChangeType) {\n  ChangeType[ChangeType[\"Add\"] = 10] = \"Add\";\n  ChangeType[ChangeType[\"Edit\"] = 20] = \"Edit\";\n  ChangeType[ChangeType[\"Remove\"] = 30] = \"Remove\";\n})(ChangeType || (ChangeType = {}));\n/* export class ChangeInfo {\r\n    type: ChangeType;\r\n    time: number;\r\n} */\n\n\nvar colorMap = (_colorMap = {}, _defineProperty(_colorMap, ChangeType.Add, \"0,255,0\"), _defineProperty(_colorMap, ChangeType.Edit, \"255,255,0\"), _defineProperty(_colorMap, ChangeType.Remove, \"255,0,0\"), _colorMap);\nexport function GetChangeTypeOutlineColor(changeType) {\n  if (changeType == null) return null;\n  return colorMap[changeType];\n}\nexport var GetMapNodeEditTimes = StoreAccessor(function (s) {\n  return function (mapID) {\n    return GetDoc({}, function (a) {\n      return a.mapNodeEditTimes.get(mapID);\n    });\n  };\n});","import _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema, UUID_regex } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nexport var Layer = function Layer(initialData) {\n  _classCallCheck(this, Layer);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"Layer\", {\n  properties: {\n    name: {\n      type: \"string\"\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    },\n    mapsWhereEnabled: {\n      patternProperties: _defineProperty({}, UUID_regex, {\n        type: \"boolean\"\n      })\n    },\n    nodeSubnodes: {\n      patternProperties: _defineProperty({}, UUID_regex, {\n        $ref: \"LayerNodeSubnodes\"\n      })\n    }\n  },\n  required: [\"name\", \"creator\", \"createdAt\"]\n});\nAddSchema(\"LayerNodeSubnodes\", {\n  patternProperties: _defineProperty({}, UUID_regex, {\n    type: \"boolean\"\n  })\n});","import { emptyArray } from \"js-vextensions\";\nimport { StoreAccessor } from \"mobx-firelink\";\nimport { GetMap } from \"../maps\";\nimport { GetUser } from \"../users\";\nimport { MapType } from \"./@Map\";\nexport function IsUserMap(map) {\n  return map.type == MapType.Private || map.type == MapType.Public;\n}\nexport var GetRootNodeID = StoreAccessor(function (s) {\n  return function (mapID) {\n    var map = GetMap(mapID);\n    if (map == null) return null;\n    return map.rootNode;\n  };\n});\nexport var GetMapEditorIDs = StoreAccessor(function (s) {\n  return function (mapID) {\n    var _a;\n\n    var map = GetMap(mapID);\n    if (map == null) return null;\n    return _a = map.editorIDs, _a !== null && _a !== void 0 ? _a : emptyArray;\n  };\n});\nexport var GetMapEditors = StoreAccessor(function (s) {\n  return function (mapID) {\n    return GetMapEditorIDs(mapID).map(function (id) {\n      return GetUser(id);\n    });\n  };\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nexport var MapNodePhrasing = function MapNodePhrasing(initialData) {\n  _classCallCheck(this, MapNodePhrasing);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"MapNodePhrasing\", {\n  properties: {\n    node: {\n      type: \"string\"\n    },\n    type: {\n      $ref: \"MapNodePhrasingType\"\n    },\n    text: {\n      type: \"string\"\n    },\n    description: {\n      type: \"string\"\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    }\n  },\n  required: [\"node\", \"type\", \"text\", \"creator\", \"createdAt\"]\n});\nexport var MapNodePhrasingType;\n\n(function (MapNodePhrasingType) {\n  MapNodePhrasingType[MapNodePhrasingType[\"Precise\"] = 10] = \"Precise\";\n  MapNodePhrasingType[MapNodePhrasingType[\"Natural\"] = 20] = \"Natural\";\n})(MapNodePhrasingType || (MapNodePhrasingType = {}));\n\nAddSchema(\"MapNodePhrasingType\", {\n  oneOf: GetValues_ForSchema(MapNodePhrasingType)\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport { Range, Assert, ModifyString, CE } from \"js-vextensions\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { GetDisplayPolarity, GetLinkUnderParent, GetNodeForm, IsMultiPremiseArgument } from \"../nodes/$node\";\nimport { Polarity } from \"../nodes/@MapNode\";\nimport { MapNodeType } from \"../nodes/@MapNodeType\";\nimport { ArgumentType } from \"../nodes/@MapNodeRevision\"; // export type RatingType = \"significance\" | \"neutrality\" | \"probability\" | \"intensity\" | \"adjustment\" | \"strength\";\n// export type RatingType = \"significance\" | \"neutrality\" | \"probability\" | \"support\" | \"adjustment\" | \"strength\";\n// export const ratingTypes = [\"significance\", \"neutrality\", \"probability\", \"truth\", \"impact\", \"strength\"];\n\nexport var ratingTypes = [\"significance\", \"neutrality\", \"truth\", \"relevance\", \"impact\"];\nAddSchema(\"RatingType\", {\n  oneOf: ratingTypes.map(function (a) {\n    return {\n      const: a\n    };\n  })\n});\nexport function PropNameToTitle(propName) {\n  return ModifyString(propName, function (m) {\n    return [m.lowerUpper_to_lowerSpaceLower, m.startLower_to_upper];\n  });\n}\nexport function GetRatingTypeInfo(ratingType, node, parent, path) {\n  var link = GetLinkUnderParent(node._key, parent);\n  var displayPolarity = link ? GetDisplayPolarity(link.polarity, GetNodeForm(parent)) : Polarity.Supporting;\n  var isMultiPremiseArgument = IsMultiPremiseArgument(node);\n  var result = new RatingType_Info();\n  result.displayText = PropNameToTitle(ratingType);\n  result.labels = Range(0, 100);\n  result.values = Range(0, 100);\n  result.tickInterval = 5;\n\n  if (ratingType == \"significance\") {\n    result.description = \"How significant/important is this subject? (0: not worth any time discussing, 100: vital to discuss)\";\n  } else if (ratingType == \"neutrality\") {\n    result.description = \"How neutral/impartial is the phrasing of this statement/question? (0: as biased as they come, 100: no bias)\";\n  }\n  /* else if (ratingType == \"probability\") {\r\n    //result.description = \"Suppose you were as sure as you are right now (of this claim being true, in its basic form), 100 different times (on different topics). How many of those times do you expect you'd be correct?\";\r\n    result.description = \"Consider how sure you are of this statement being true (in its basic form). If you were this sure 100 times (on a variety of things), how many of those times do you think you'd be correct?\";\r\n  } */\n  else if (ratingType == \"truth\") {\n      // result.description = \"To what degree do you consider this statement true? (0: completely false, 50: true to a basic extent, 100: true to a high extent)\";\n      result.description = \"To what degree do you consider this statement true? (0: completely false, 50: somewhat true, 100: completely true)\";\n    } else if (ratingType == \"impact\") {\n      result.description = \"Argument impact is calculated by combining (multiplying) the truth and relevance ratings.\";\n    } else if (ratingType == \"relevance\") {\n      var _premiseCountrStrMap;\n\n      Assert(node.type == MapNodeType.Argument, \"Invalid state. Node with rating-type \\\"relevance\\\" should be an argument. @path:\".concat(path));\n      var premiseCountrStrMap = (_premiseCountrStrMap = {}, _defineProperty(_premiseCountrStrMap, ArgumentType.All, \"they\"), _defineProperty(_premiseCountrStrMap, ArgumentType.AnyTwo, \"at least two of them\"), _defineProperty(_premiseCountrStrMap, ArgumentType.Any, \"at least one of them\"), _premiseCountrStrMap);\n      var premiseCountStr = premiseCountrStrMap[node.current.argumentType];\n      result.description = isMultiPremiseArgument ? \"Assuming \".concat(premiseCountStr, \" were true, how relevant/impactful would the statements (premises) below this be toward the parent claim? (0: not at all, 50: moderately, 100: game-changing)\") : \"Assuming it were true, how relevant/impactful would this statement be toward the parent claim? (0: not at all, 50: moderately, 100: game-changing)\";\n    } else {\n      Assert(false, \"Invalid rating type: \".concat(ratingType));\n    }\n\n  return result;\n}\nexport var RatingType_Info = function RatingType_Info(initialData) {\n  _classCallCheck(this, RatingType_Info);\n\n  CE(this).VSet(initialData);\n};","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nexport var TermAttachment = function TermAttachment(initialData) {\n  _classCallCheck(this, TermAttachment);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"TermAttachment\", {\n  properties: {\n    id: {\n      type: \"string\"\n    }\n  },\n  required: [\"id\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { GetValues_ForSchema, CE } from \"js-vextensions\";\nimport { AddSchema } from \"mobx-firelink\";\nexport var Term = function Term(initialData) {\n  _classCallCheck(this, Term);\n\n  CE(this).VSet(initialData); // this.createdAt = Date.now();\n}; // export const termNameFormat = \"^[^.#$\\\\[\\\\]]+$\";\n\nexport var Term_nameFormat = '^[a-zA-Z0-9 ,\\'\"%-]+$';\nexport var Term_formsEntryFormat = \"^[^A-Z]+$\";\nexport var Term_disambiguationFormat = '^[a-zA-Z0-9 ,\\'\"%-\\\\/]+$'; // export const Term_shortDescriptionFormat = \"^[a-zA-Z ()[],;.!?-+*/]+$\";\n//export const Term_definitionFormat = \"^.+$\";\n\nexport var Term_definitionFormat = \"^(.|\\n)+$\";\nAddSchema(\"Term\", {\n  properties: {\n    name: {\n      type: \"string\",\n      pattern: Term_nameFormat\n    },\n    disambiguation: {\n      type: \"string\",\n      pattern: Term_disambiguationFormat\n    },\n    type: {\n      $ref: \"TermType\"\n    },\n    forms: {\n      items: {\n        type: \"string\",\n        pattern: Term_formsEntryFormat\n      },\n      minItems: 1,\n      uniqueItems: true\n    },\n    definition: {\n      type: \"string\",\n      pattern: Term_definitionFormat\n    },\n    note: {\n      type: \"string\"\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    }\n  },\n  required: [\"name\", \"forms\", \"type\", \"definition\",\n  /* \"components\", */\n  \"creator\", \"createdAt\"]\n});\nexport var TermType;\n\n(function (TermType) {\n  TermType[TermType[\"CommonNoun\"] = 10] = \"CommonNoun\";\n  TermType[TermType[\"ProperNoun\"] = 20] = \"ProperNoun\";\n  TermType[TermType[\"Adjective\"] = 30] = \"Adjective\";\n  TermType[TermType[\"Verb\"] = 40] = \"Verb\";\n  TermType[TermType[\"Adverb\"] = 50] = \"Adverb\";\n})(TermType || (TermType = {}));\n\nAddSchema(\"TermType\", {\n  oneOf: GetValues_ForSchema(TermType)\n});\n/*export type TermComponentSet = ObservableMap<string, boolean>;\r\nAddSchema(\"TermComponentSet\", {patternProperties: {[UUID_regex]: {type: \"boolean\"}}});*/","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nexport var TimelineStep = function TimelineStep(initialData) {\n  _classCallCheck(this, TimelineStep);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"TimelineStep\", {\n  properties: {\n    timelineID: {\n      type: \"string\"\n    },\n    title: {\n      type: \"string\"\n    },\n    groupID: {\n      type: [\"number\", \"null\"]\n    },\n    videoTime: {\n      type: [\"number\", \"null\"]\n    },\n    message: {\n      type: \"string\"\n    },\n    nodeReveals: {\n      $ref: \"NodeReveal\"\n    }\n  },\n  required: [\"timelineID\"]\n});\nexport var NodeReveal = function NodeReveal() {\n  _classCallCheck(this, NodeReveal);\n};\nAddSchema(\"NodeReveal\", {\n  properties: {\n    path: {\n      type: \"string\"\n    },\n    show: {\n      type: \"boolean\"\n    },\n    show_revealDepth: {\n      type: \"number\"\n    },\n    hide: {\n      type: \"boolean\"\n    }\n  },\n  required: [\"path\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nimport { CE } from \"js-vextensions\";\nexport var Timeline = function Timeline(initialData) {\n  _classCallCheck(this, Timeline);\n\n  CE(this).VSet(initialData);\n};\nAddSchema(\"Timeline\", {\n  properties: {\n    mapID: {\n      type: \"string\"\n    },\n    name: {\n      type: \"string\"\n    },\n    creator: {\n      type: \"string\"\n    },\n    createdAt: {\n      type: \"number\"\n    },\n    videoID: {\n      type: [\"string\", \"null\"]\n    },\n    videoStartTime: {\n      type: [\"number\", \"null\"]\n    },\n    videoHeightVSWidthPercent: {\n      type: \"number\"\n    },\n    steps: {\n      items: {\n        type: \"string\"\n      }\n    }\n  },\n  required: [\"mapID\", \"name\", \"creator\", \"createdAt\"]\n});","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\"; // todo: make this have a length constraint as well\n\nexport var User_id = \"^[a-zA-Z0-9]+$\";\nAddSchema(\"UserID\", {\n  pattern: \"^[a-zA-Z0-9]+$\"\n});\nexport var User = function User() {\n  _classCallCheck(this, User);\n};\nAddSchema(\"User\", {\n  properties: {\n    displayName: {\n      type: \"string\"\n    },\n    photoURL: {\n      type: \"string\"\n    },\n    joinDate: {\n      type: \"number\"\n    },\n    permissionGroups: {\n      $ref: \"PermissionGroupSet\"\n    },\n    edits: {\n      type: \"number\"\n    },\n    lastEditAt: {\n      type: \"number\"\n    }\n  }\n});\nexport var PermissionGroupSet = function PermissionGroupSet() {\n  _classCallCheck(this, PermissionGroupSet);\n};\nAddSchema(\"PermissionGroupSet\", {\n  properties: {\n    basic: {\n      type: \"boolean\"\n    },\n    verified: {\n      type: \"boolean\"\n    },\n    mod: {\n      type: \"boolean\"\n    },\n    admin: {\n      type: \"boolean\"\n    }\n  }\n});","import {StoreAccessor} from \"mobx-firelink\";\nimport {GetNodeChildrenL2, GetNodeChildren} from \"@debate-map/server-link\";\nimport {mainMap_rootNodeID} from \"../pages/Questions\";\nimport {MapNodeL2} from \"@debate-map/server-link\";\n\nexport function GetFinalNodeTitle(node: MapNodeL2) {\n\t//if (node == null) return \"\";\n\tlet result = node.current.titles.base;\n\t// in the GAD client/ui, replace \"CC\" with the full \"Climate Change\"\n\tresult = result.replace(/(^|\\W)CC(\\W|$)/g, \"$1Climate Change$2\");\n\treturn result;\n}\n\nexport const GetQuestions = StoreAccessor(s=>()=> {\n\tconst questions = GetNodeChildrenL2(mainMap_rootNodeID);\n  questions.sort((a, b)=>a.createdAt - b.createdAt); // until we have a way to manually specify the order, use node creation-time\n  return questions;\n});\nexport const GetQuestionPositions = StoreAccessor(s=>(questionID: string)=> {\n\treturn GetNodeChildrenL2(questionID);\n});\nexport const GetPositionReasons = StoreAccessor(s=>(positionID: string)=> {\n\treturn GetNodeChildrenL2(positionID);\n});","import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport { observer } from \"mobx-react\";\n\nimport { PageEffects } from '../components/PageEffects'\nimport { ExploreScore } from '../components/ExploreScore'\nimport '../styles/Questions.scss'\nimport { TitleBlock } from '../components/TitleBlock'\nimport {GetQuestions, GetQuestionPositions, GetFinalNodeTitle} from '../firestore/firestore';\n\n// uuid of the root Climate Change debate map, and its root node\nexport const mainMapID = \"DjedFbxfS2-ImEsHDiZNiA\";\nexport const mainMap_rootNodeID = \"v3RJAZH0Tr-nUjjvKd_39g\";\n\nexport const Questions = observer((props) => {\n  /*const questions = [\n    { title: 'What is climate change?', positions: 6 },\n    { title: 'What causes it?', positions: 6 },\n    { title: 'Is it happening?', positions: 14 },\n    { title: 'Is it a threat?', positions: 22 },\n    { title: 'What could or should be done?', positions: 9 },\n    { title: 'What is climate change?', positions: 6 },\n    { title: 'What causes it?', positions: 6 },\n    { title: 'Is it happening?', positions: 14 },\n    { title: 'Is it a threat?', positions: 22 },\n    { title: 'What could or should be done?', positions: 9 },\n  ]*/\n\n  const questions = GetQuestions();\n  const questionPositions = questions.map(question=>GetQuestionPositions(question._key));\n\n  return (\n    <main className=\"page questions\">\n      <PageEffects duration={200} animation=\"fadeOut\" options=\"once\" />\n      <section className=\"top-container\">\n        <TitleBlock title=\"Select your debate question\" />\n        <ExploreScore exploreScore={38} />\n      </section>\n      <section className=\"bottom-container\">\n        <div className=\"question-list-container paper-background\">\n          <ul className=\"question-list scroll-list\">\n            {questions.map((item, index) => {\n              return (\n                <li key={index}>\n                  <Link to={`/positions/${item._key}`}>\n                    <span className=\"question-number\">{index + 1}</span>\n                    <span className=\"question\">{GetFinalNodeTitle(item)}</span>\n                  </Link>\n                  <div className=\"circle circle-s bezel-xs drop-shadow\">\n                    <p>{questionPositions[index].length}</p>\n                    <p>positions</p>\n                  </div>\n                </li>\n              )\n            })}\n          </ul>\n        </div>\n        <p className=\"tip\">Tip: Start with the first question and work your way through</p>\n      </section>\n    </main>\n  )\n});\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { ExploreScore } from './ExploreScore'\n\nimport '../styles/Position.scss'\n\nexport const Position = (props) => {\n  const { title, positionCount, exploreScore, ctaUrl } = props\n\n  return (\n    <div className=\"position\">\n      {positionCount && positionCount > -1 && (\n        <div className=\"position-count circle circle-s bezel-xs drop-shadow\">\n          <p>{positionCount}</p>\n          <p>positions</p>\n        </div>\n      )}\n      {exploreScore !== undefined && exploreScore > -1 && <ExploreScore exploreScore={exploreScore} size=\"s\" />}\n      <div className=\"speech-bubble drop-shadow\">\n        <h3 className=\"position-title text-size-m\">{ctaUrl ? <Link to={ctaUrl}>{title}</Link> : title}</h3>\n        {ctaUrl && (\n          <p>\n            <Link to={ctaUrl}>Explore ></Link>\n          </p>\n        )}\n      </div>\n    </div>\n  )\n}\n","import * as React from 'react'\n\nimport { TitleBlock } from '../components/TitleBlock'\nimport { PageEffects } from '../components/PageEffects'\nimport { Position } from '../components/Position'\n\nimport '../styles/Positions.scss'\nimport {useParams} from 'react-router-dom'\nimport {GetQuestionPositions, GetFinalNodeTitle} from '../firestore/firestore'\nimport {observer} from 'mobx-react'\nimport {GetNodeL2} from '@debate-map/server-link'\n\nexport const Positions = observer((props) => {\n  /*const positions = [\n    { title: \"It's uncertain\", positionCount: 6, exploreScore: 1 },\n    { title: 'Impossible to know', positionCount: 6, exploreScore: 33 },\n    { title: 'Yes', positionCount: 14, exploreScore: 100 },\n    { title: 'No', positionCount: 22 },\n    { title: \"It's uncertain\", positionCount: 6, exploreScore: 0 },\n    { title: 'Impossible to know', positionCount: 6, exploreScore: 0 },\n    { title: 'Yes', positionCount: 14 },\n    { title: 'No', positionCount: 22, exploreScore: 0 },\n  ]*/\n  const { id } = useParams();\n  const question = GetNodeL2(id);\n  if (question == null) return null; // still loading\n  const positions = GetQuestionPositions(id);\n  const exploreScore = 0;\n\n  return (\n    <main className=\"page positions\">\n      <PageEffects duration={200} animation=\"fadeOut\" options=\"once\" />\n      <section className=\"top-container bezel-l\">\n        <TitleBlock title={GetFinalNodeTitle(question)} titleSize=\"l\" subtitle=\"Start exploring positions\" />\n      </section>\n      <section className=\"bottom-container scroll-gradient-top scroll-gradient-bottom \">\n        <div className=\"positions-container\">\n          {positions.map((item, index) => {\n            return (\n              <Position\n                key={index}\n                title={GetFinalNodeTitle(item)}\n                positionCount={positions.length}\n                exploreScore={exploreScore > -1 ? exploreScore : 0}\n                ctaUrl={`/reasons/${item._key}`}\n              />\n            )\n          })}\n        </div>\n      </section>\n    </main>\n  )\n});\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport '../styles/Reason.scss'\n\nexport const Reason = (props) => {\n  const { title, ctaUrl } = props\n\n  return (\n    <div className=\"reason rectangle\">\n      {ctaUrl && <Link to={ctaUrl}>Explore ></Link>}\n      <h3>{title}</h3>\n    </div>\n  )\n}\n","import * as React from 'react'\n\nimport { Position } from '../components/Position'\nimport { Reason } from '../components/Reason'\nimport { TitleBlock } from '../components/TitleBlock'\n\nimport '../styles/Reasons.scss'\nimport {useParams} from 'react-router-dom'\nimport {GetNodeL2} from '@debate-map/server-link'\nimport {GetPositionReasons, GetFinalNodeTitle} from '../firestore/firestore'\nimport {observer} from 'mobx-react'\n\nexport const Reasons = observer((props) => {\n  /*let position = { title: 'Yes', positionCount: 14, exploreScore: 100 }\n  let reasons = [\n    { title: 'Evidenced by global temperature changes', ctaUrl: 'reasons' },\n    { title: 'Evidenced by ocean acidification', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster frequency', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster intensity', ctaUrl: 'reasons' },\n    { title: 'Evidenced by global temperature changes', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster frequency', ctaUrl: 'reasons' },\n    { title: 'Evidenced by ocean acidification', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster intensity', ctaUrl: 'reasons' },\n    { title: 'Evidenced by global temperature changes', ctaUrl: 'reasons' },\n    { title: 'Evidenced by ocean acidification', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster frequency', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster intensity', ctaUrl: 'reasons' },\n    { title: 'Evidenced by global temperature changes', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster frequency', ctaUrl: 'reasons' },\n    { title: 'Evidenced by ocean acidification', ctaUrl: 'reasons' },\n    { title: 'Evidenced by increased natural disaster intensity', ctaUrl: 'reasons' },\n  ]*/\n  const { id } = useParams();\n  let position = GetNodeL2(id);\n  if (position == null) return null; // still loading\n  let reasons = GetPositionReasons(id);\n  let exploreScore = 0;\n\n  return (\n    <main className=\"page reasons\">\n      <section className=\"top-container bezel-l\">\n        <Position title={GetFinalNodeTitle(position)} positionCount={reasons.length} exploreScore={exploreScore} />\n        <TitleBlock\n          title={GetFinalNodeTitle(position)}\n          titleSize=\"m\"\n          subtitle=\"Explore the reasons that support this position\"\n          subtitleSize=\"xs\"\n        />\n      </section>\n      <section className=\"scroll-gradient-top scroll-gradient-bottom bottom-container\">\n        <ul className=\"reasons-list scroll-list\">\n          {reasons.map((item, index) => {\n            return (\n              <li key={index}>\n                <Reason title={GetFinalNodeTitle(item)} ctaUrl={\"reasons\"} />\n              </li>\n            )\n          })}\n        </ul>\n      </section>\n    </main>\n  )\n});\n","import * as React from 'react'\n\nexport const Argument = (props) => {\n  return null\n}\n","import * as React from 'react'\n\nexport const Claim = (props) => {\n  return null\n}\n","import \"mobx\"; // import mobx before we declare the module below, otherwise vscode auto-importer gets confused at path to mobx\nimport firebase from \"firebase\";\nimport {InitFirelink} from \"@debate-map/server-link\";\n\nconst firebaseConfig = {\n\t\"apiKey\":\"AIzaSyCnvv_m-L08i4b5NmxGF5doSwQ2uJZ8i-0\",\n\t\"authDomain\":\"debate-map-prod.firebaseapp.com\",\n\t\"databaseURL\":\"https://debate-map-prod.firebaseio.com\",\n\t\"projectId\":\"debate-map-prod\",\n\t\"storageBucket\":\"debate-map-prod.appspot.com\",\n};\n\nconst dbVersion = 12;\nconst DB_SHORT = \"prod\";\nconst linkRootPath = `versions/v${dbVersion}-${DB_SHORT}`;\n\n// we aren't currently using mobx for a general app data-store, so just pass an empty object\nconst store = {};\n\nexport function initDebateMapServerLink() {\n\tfirebase.initializeApp(firebaseConfig);\n\tInitFirelink(linkRootPath, store);\n}","import React, { Component } from 'react'\nimport { HashRouter, Switch, Route } from 'react-router-dom'\n\nimport { TopNav } from './components/TopNav'\nimport { Welcome } from './pages/Welcome'\nimport { Debates } from './pages/Debates'\nimport { Questions } from './pages/Questions'\nimport { Positions } from './pages/Positions'\nimport { Reasons } from './pages/Reasons'\nimport { Argument } from './pages/Argument'\nimport { Claim } from './pages/Claim'\n\nimport './styles/App.scss'\nimport {initDebateMapServerLink} from './firestore/init-dm-link'\n\ninitDebateMapServerLink();\n\nclass App extends Component {\n  render() {\n    return (\n      <HashRouter basename=\"/\">\n        <div className=\"app\">\n          <TopNav />\n          <Route path=\"/questions\" component={Questions} />\n          <Route path=\"/positions/:id\" component={Positions} />\n          <Route path=\"/reasons/:id\" component={Reasons} />\n          <Route path=\"/argument\" component={Argument} />\n          <Route path=\"/claim\" component={Claim} />\n          <Route path=\"/debates\" component={Debates} />\n          <Route exact path=\"/\" component={Welcome} />\n        </div>\n      </HashRouter>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './styles/index.scss'\n\nReactDOM.render(React.createElement(App), document.getElementById('root'))\n","import _classCallCheck from \"C:\\\\Root\\\\Apps\\\\@V\\\\GAD\\\\Client_Fork\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport { AddSchema } from \"mobx-firelink\";\nexport var User_Private = function User_Private() {\n  _classCallCheck(this, User_Private);\n};\nAddSchema(\"User_Private\", {\n  properties: {\n    //displayName: {type: \"string\"},\n    //avatarUrl: {type: \"string\"},\n    email: {\n      type: \"string\"\n    },\n    providerData: {\n      type: \"array\"\n    },\n    // custom\n    backgroundID: {\n      type: \"string\"\n    },\n    backgroundCustom_enabled: {\n      type: \"boolean\"\n    },\n    backgroundCustom_color: {\n      type: [\"null\", \"string\"]\n    },\n    backgroundCustom_url: {\n      type: \"string\"\n    },\n    backgroundCustom_position: {\n      type: \"string\"\n    }\n  }\n});"],"sourceRoot":""}